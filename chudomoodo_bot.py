"""
Telegram-Ð±Ð¾Ñ‚ "Ð”Ð½ÐµÐ²Ð½Ð¸Ðº Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ñ… Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹".

Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»:
- Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ Ñ‚ÐµÐºÑÑ‚Ñ‹-Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸;
- Ð¾Ñ‡Ð¸Ñ‰Ð°ÐµÑ‚ Ð¼Ð°Ñ‚ Ð¸ Ð½ÐµÑ†ÐµÐ½Ð·ÑƒÑ€Ð½ÑƒÑŽ Ð»ÐµÐºÑÐ¸ÐºÑƒ (Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ ÐºÐ¾Ñ€Ð½ÐµÐ¹);
- ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð² SQLite;
- Ð•Ð–Ð•Ð”ÐÐ•Ð’ÐÐ«Ð™ Ð Ð•Ð–Ð˜Ðœ:
    - Ð² 17:00 â€” Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ, ÐµÑÐ»Ð¸ Ð·Ð° Ð´ÐµÐ½ÑŒ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ Ð½Ð¸ Ð¾Ð´Ð½Ð¾Ð¹ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸;
    - Ð² 19:00 â€” Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑÐ¼Ð¸ Ð·Ð° Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð´Ð½Ñ;
- Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ñ‚Ð¾ÑÐºÐ¸: Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸ Ð½Ð° Ð³Ñ€ÑƒÑÑ‚ÑŒ, ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ, Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ñƒ, Ñ‚ÑÐ¶Ñ‘Ð»Ñ‹Ðµ Ñ„Ñ€Ð°Ð·Ñ‹;
- ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ñ‹Ðµ Ñ‚ÐµÐºÑÑ‚Ñ‹-Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ñ Ð¾Ð´Ð½Ð¸Ð¼ ÑÐ¼Ð¾Ð´Ð·Ð¸ Ð² Ð½Ð°Ñ‡Ð°Ð»Ðµ;
- ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ /stats;
- Ð¿Ð¸ÑÑŒÐ¼Ð¾ ÑÐµÐ±Ðµ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ Ð¿Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ /letter Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¾Ñ‚Ð¼ÐµÐ½Ñ‹ /cancel;
- Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð°Ñ€Ð¸ Ð³Ñ€ÑƒÑÑ‚Ð¸, ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚Ð¸, Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸ Ð¸ Â«Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÂ»;
- Ð±Ð¾Ð»ÐµÐµ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾Ðµ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ð¹, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð¾Ð¿ÐµÑ‡Ð°Ñ‚ÐºÐ¸ Ð¸ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÑƒ;
- Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ wantnow ÑÐ¾ Ð²ÑÐµÐ¼Ð¸ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ð¼Ð¸ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑÐ¼Ð¸;
- Ð½Ð° Ð¾Ð´Ð½Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ â€” Ð¾Ð´Ð¸Ð½ Ð¾Ñ‚Ð²ÐµÑ‚ (Ð±ÐµÐ· Ð´ÑƒÐ±Ð»Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ñ… Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¹).
"""

import os
import time
import sqlite3
import threading
import random
import re
import json
from datetime import datetime, timedelta, date
from typing import List, Tuple, Optional, Dict

import requests

# --------------------------
# CONFIG
# --------------------------

TOKEN = os.getenv("TELEGRAM_TOKEN")
if not TOKEN:
    raise RuntimeError("ÐÐµ Ð·Ð°Ð´Ð°Ð½ TELEGRAM_TOKEN Ð² Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ.")

API_URL = f"https://api.telegram.org/bot{TOKEN}"
DB_PATH = os.path.join(os.path.dirname(__file__), "joys.db")

POLL_TIMEOUT = 30
POLL_SLEEP = 1

# --------------------------
# Ð¡Ð›ÐžÐ’ÐÐ Ð˜ (Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ñ‹)
# --------------------------

# Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¼Ð°Ñ‚Ð¾Ð² Ð¸ "Ð¶Ñ‘ÑÑ‚ÐºÐ¾Ð¹" Ð»ÐµÐºÑÐ¸ÐºÐ¸ (ÐºÐ¾Ñ€Ð½Ð¸)
BAD_WORDS = [
    "Ñ…ÑƒÐ¹", "Ñ…ÑƒÐ¸", "Ñ…ÑƒÐµ", "Ñ…ÑƒÑ‘", "Ñ…ÑƒÑ", "Ñ…ÑƒÐµÐ¼", "Ñ…ÑƒÐ¹Ð½", "Ñ…ÑƒÐ¸Ñ‚", "Ñ…ÑƒÑÑ€",
    "Ñ…ÐµÑ€", "Ñ…Ñ€ÐµÐ½", "Ñ…Ñ€ÐµÐ½Ð°", "Ñ…Ñ€ÐµÐ½Ð¾Ð²", "Ñ…Ñ€ÐµÐ½Ð¾Ñ‚", "Ñ…Ñ€ÐµÐ½Ð¾Ñ‚ÐµÐ½ÑŒ",
    "Ð¿Ð¸Ð·Ð´", "Ð¿Ð¸Ð·Ð´Ð°", "Ð¿Ð¸Ð·Ð´ÐµÑ†", "Ð¿ÐµÐ·Ð´", "Ð¿Ð¸Ð´Ð¾Ñ€", "Ð¿Ð¸Ð´Ð°Ñ€", "Ð¿ÐµÐ´Ñ€Ð¸Ð»Ð°",
    "ÐµÐ±Ð°", "ÐµÐ±Ñƒ", "ÐµÐ±Ñ‘", "ÐµÐ±Ðµ", "ÐµÐ±Ð°Ð½", "Ñ‘Ð±Ð½", "ÐµÐ±Ð»Ð¾", "ÐµÐ±Ð°Ð»ÑŒÐ½", "Ð²Ñ‹ÐµÐ±",
    "ÐµÐ±Ð»Ð¸ÑÑŒ", "ÐµÐ±ÑƒÑ‡", "ÐµÐ±Ð°Ð½ÑƒÑ‚", "Ð´Ð¾ÐµÐ±", "Ð·Ð°ÐµÐ±", "Ð·Ð°Ñ‘Ð±", "Ð·Ð°Ð¸Ð¿Ð°Ð»", "Ð·Ð°Ð¸Ð¿Ð°Ð»Ð¸",
    "ÑÑƒÐºÐ°", "ÑÑƒÐºÐ¸", "ÑÑƒÑ‡Ðº", "ÑÑƒÑ‡Ð°Ñ€", "ÑÑƒÑ‡Ð¾Ð½Ð¾Ðº",
    "Ð±Ð»ÑÐ´", "Ð±Ð»Ñ", "Ð±Ð»ÑÑ‚", "Ð±Ð»ÑÑ…Ð°", "Ð±Ð»ÑÑ…Ð°-Ð¼ÑƒÑ…Ð°", "Ð±Ð»ÑÑ…Ð° Ð¼ÑƒÑ…Ð°",
    "Ð¼Ñ€Ð°Ð·ÑŒ", "Ñ‚Ð²Ð°Ñ€ÑŒ", "Ñ‚Ð²Ð°Ñ€Ð½", "ÑÐºÐ¾Ñ‚Ð¸Ð½Ð°", "ÑƒÐ±Ð»ÑŽÐ´", "ÑƒÐµÐ±Ðº", "ÑƒÑ‘Ð±Ðº",
    "Ð³Ð°Ð½Ð´Ð¾Ð½", "Ð¿Ñ€ÐµÐ·Ð¸Ðº", "ÐºÐ¾Ð½Ñ‡Ð°", "ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð½Ñ‹Ð¹", "ÐºÐ¾Ð½Ñ‡ÐµÐ½Ñ‹Ð¹",
    "Ñ…ÑƒÐ¹Ð½Ñ", "Ñ…ÑƒÑ‘Ð²", "Ñ…Ñ€ÐµÐ½Ð¾Ñ‚", "Ð³Ð¾Ð²Ð½Ð¾", "Ð³Ð¾Ð²Ð½", "Ð´ÐµÑ€ÑŒÐ¼", "ÑÑ€Ð°ÐºÐ°",
    "ÑÑƒÐºÐ°-Ð±Ð»ÑÑ‚ÑŒ", "ÑÑƒÐºÐ° Ð±Ð»ÑÑ‚ÑŒ", "Ð´Ð¾Ð»Ð±Ð¾ÐµÐ±", "Ð´Ð¾Ð»Ð±Ð¾Ñ‘Ð±", "Ð´ÐµÐ±Ð¸Ð»", "Ð¸Ð´Ð¸Ð¾Ñ‚",
    "ÐºÑ€ÐµÑ‚Ð¸Ð½", "Ð¼ÑƒÐ´Ð°Ðº", "Ð¼ÑƒÐ´Ð¸Ð»Ð°", "Ñ‡Ð¼Ð¾", "Ñ‡Ð¼Ð¾ÑˆÐ½", "ÐºÐ¾Ð·Ð»Ð¸Ð½Ð°", "ÑƒÑ€Ð¾Ð´", "ÑƒÑ€Ð¾Ð´Ð¸Ð½",
    "ÑˆÐ»ÑŽÑ…", "Ð¿Ñ€Ð¾ÑÑ‚Ð¸Ñ‚ÑƒÑ‚", "ÑˆÐ°Ð»Ð°Ð²", "Ñ‚Ñ€Ð°Ñ…Ð°", "Ñ‚Ñ€Ð°Ñ…Ð½Ñƒ", "ÑÑ€Ð°Ñ‚ÑŒ", "ÑÑ€Ð°Ð»", "Ð½Ð°ÑÑ€Ð°Ñ‚ÑŒ", "Ð½Ð°ÑÑ€Ð°Ð»",
    "Ð±ÐµÑÐ¸ÑˆÑŒ", "Ð¼Ð¾Ñ€Ð´Ð° ÐºÐ¸Ñ€Ð¿Ð¸Ñ‡Ð¾Ð¼", "Ð¸Ð´Ð¸ Ð² Ð¶Ð¾Ð¿Ñƒ", "Ð¿Ð¾ÑˆÐµÐ» Ð² Ð¶Ð¾Ð¿Ñƒ", "Ð¿Ð¾ÑˆÐ»Ð° Ð² Ð¶Ð¾Ð¿Ñƒ",
    "Ð±Ð»ÑÑ‚ÑŒ", "Ð±Ð»ÑÐ´ÑŒ", "Ð±Ð»ÑÐ´Ð¸Ð½Ð°", "Ð±Ð»ÑÐ´ÑÑ‚Ð²Ð¾", "Ð±Ð»ÑÐ´ÑŽÐ³Ð°", "ÐµÐ±Ð¸ÑÑŒ", "Ñ‘Ð±Ð¸ÑÑŒ", "Ñ‘Ð±Ð½ÑƒÑ‚Ñ‹Ð¹",
    "Ð²Ñ‹ÐµÐ±Ð½ÑƒÐ»ÑÑ", "Ð´Ð¾Ð»Ð±Ð°Ñ‘Ð±", "Ð´Ð¾Ð»Ð±Ð¾Ñ‘Ð±Ð¸Ð½Ð°", "Ð·Ð°ÐµÐ±Ð¸ÑÑŒ", "Ð·Ð°Ñ‘Ð±Ð¸ÑÑŒ", "Ð·Ð°ÐµÐ±Ð°Ð»Ð¸", "Ð·Ð°ÐµÐ±Ð°Ð»Ð¾",
    "Ð·Ð°ÐµÐ±Ð°Ð»", "Ð·Ð°ÐµÐ±Ð°Ð»Ð°", "Ð·Ð°ÐµÐ±Ð°Ð½Ð½Ñ‹Ð¹", "Ð½Ð°ÐµÐ±Ð½ÑƒÑ‚ÑŒÑÑ", "Ð½Ð°ÐµÐ±Ð°Ñ‚ÑŒ", "Ð½Ð°ÐµÐ±Ð°Ñ‚ÑŒÑÑ",
    "Ð¾Ñ‚ÑŠÐµÐ±Ð¸ÑÑŒ", "Ð¾Ñ‚ÑŠÐµÐ±Ð¸Ñ‰Ðµ", "Ð¿Ð¾ÐµÐ±Ð°Ñ‚ÑŒ", "Ð¿Ð¾ÐµÐ±ÐµÐ½ÑŒ", "Ð¿Ð¾Ð´ÑŠÐµÐ±", "Ð¿Ð¾Ð´ÑŠÐµÐ±Ð°Ñ‚ÑŒ",
    "Ñ€Ð°Ð·ÑŠÐµÐ±Ð°Ñ‚ÑŒ", "Ñ€Ð°Ð·ÑŠÐµÐ±Ð°Ð½Ð½Ñ‹Ð¹", "ÑÑŠÐµÐ±Ð°Ñ‚ÑŒ", "ÑÑŠÐµÐ±Ð°Ñ‚ÑŒÑÑ", "ÑƒÐµÐ±Ð°Ñ‚ÑŒ", "ÑƒÐµÐ±Ð°Ñ‚ÑŒÑÑ", "ÑƒÑ‘Ð±Ð¸Ñ‰Ðµ",
    "Ñ…ÑƒÐµÐ²", "Ñ…ÑƒÑ‘Ð²Ñ‹Ð¹", "Ñ…ÑƒÑ‘Ð²Ð¸Ð½Ð°", "Ñ…ÑƒÐµÑ‚Ð°", "Ñ…ÑƒÐµÑ‚ÐµÐ½ÑŒ", "Ñ…ÑƒÐ¸Ð»Ð¾", "Ñ…ÑƒÐ¸Ð»Ð°", "Ñ…ÑƒÐ¸Ñ‰Ðµ",
    "Ñ…ÑƒÐ¹Ð»Ð¾", "Ñ…ÑƒÐ¹Ð½Ñ", "Ñ…ÑƒÐ¹Ñ†Ð¾Ð²Ð¾", "Ñ…ÑƒÐ¹ Ð·Ð½Ð°ÐµÑ‚", "Ð¿Ð¾Ñ…ÑƒÐ¹", "Ð½Ð°Ñ…ÑƒÐ¹", "Ð½Ð¸Ñ…ÑƒÑ", "Ð½Ð¸Ñ…ÑƒÑ ÑÐµÐ±Ðµ",
    "Ð¾Ñ…ÑƒÐµÑ‚ÑŒ", "Ð¾Ñ…ÑƒÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾", "Ð¿Ð¾Ñ…ÑƒÐ¸ÑÑ‚", "Ñ…ÐµÑ€Ð½Ñ", "Ñ…ÐµÑ€Ð¾Ð²Ð¾", "Ñ…ÐµÑ€Ð¾Ð²Ñ‹Ð¹", "Ñ…ÐµÑ€ Ð·Ð½Ð°ÐµÑ‚",
    "Ð¿Ð¸Ð·Ð´ÐµÑ†", "Ð¿Ð¸Ð·Ð´ÐµÑ†Ð¾Ð²Ñ‹Ð¹", "Ð¿Ð¸Ð·Ð´Ñ‘Ð¶", "Ð¿Ð¸Ð·Ð´Ð¾Ð²Ð°Ñ‚ÑŒ", "Ð¿Ð¸Ð·Ð´Ð¾Ð»Ð¸Ð·", "Ð¿Ð¸Ð·Ð´Ð¾Ð»ÑŽÐ±",
    "Ð¿Ð¸Ð·Ð´Ð¾ÑÑ‚Ñ€Ð°Ð´Ð°Ð»ÐµÑ†", "Ð¿Ð¸Ð·Ð´Ð¾Ñ…Ð°", "Ð¿Ð¸Ð·Ð´ÑŽÐº", "Ð¿Ð¸Ð·Ð´ÑŽÐ»Ð¸Ð½Ð°", "Ð¿Ð¸Ð·Ð´ÑŽÐ»Ñ", "Ñ€Ð°ÑÐ¿Ð¸Ð·Ð´ÑÐ¹",
    "ÑÐ¿Ð¸Ð·Ð´Ð¸Ñ‚ÑŒ", "ÑƒÐ¿Ð¸Ð·Ð´Ð¸Ñ‚ÑŒ", "Ð±Ð·Ð´ÐµÑ‚ÑŒ", "Ð±Ð·Ð´Ð½ÑƒÑ‚ÑŒ", "Ð¾Ð±Ð¾ÑÑ€Ð°Ñ‚ÑŒ", "Ð¾Ð±Ð¾ÑÑ€Ð°Ñ‚ÑŒÑÑ",
    "Ð¿Ð¾ÑÑ€Ð°Ñ‚ÑŒ", "ÑÑ€Ð°ÐºÐ°", "ÑÑ€Ð°ÐºÑƒ", "ÑÑ€Ð°Ð½Ñ‹Ð¹", "ÑÑ€Ð°Ð½ÑŒ", "ÑÑ€Ð°Ñ‡", "ÑÑ€Ð°Ñ‡ÐºÐ°",
    "Ð·Ð°ÑÑ€Ð°Ð½ÐµÑ†", "Ð·Ð°ÑÑ€Ð°Ð½ÐºÐ°", "Ð¿ÐµÑ€Ð´ÐµÑ‚ÑŒ", "Ð¿ÐµÑ€Ð´ÑƒÐ½", "Ð¿ÐµÑ€Ð´ÑƒÐ½ÑŒÑ", "Ð¿ÐµÑ€Ð´Ð°Ðº",
    "Ð´ÐµÑ€ÑŒÐ¼Ð¾", "Ð´ÐµÑ€ÑŒÐ¼Ð¾Ð²Ñ‹Ð¹", "Ð·Ð°Ð»ÑƒÐ¿Ð°", "Ð·Ð°Ð»ÑƒÐ¿ÐµÐ½ÑŒ", "Ð¼ÑƒÑÐ¾Ñ€", "Ð¼ÑƒÑÐ¾Ñ€Ð½Ñ‹Ð¹",
    "Ð¾Ñ‚Ð±Ñ€Ð¾Ñ", "Ð¿Ð°Ð´Ð»Ð°", "Ð¿Ð°Ð´Ð»ÑŽÐºÐ°", "ÑÐ²Ð¾Ð»Ð¾Ñ‡ÑŒ", "ÑÐ²Ð¾Ð»Ð¾Ñ‡Ð¸", "ÑÑ‚ÐµÑ€Ð²Ð°", "ÑÑ‚ÐµÑ€Ð²Ð¾Ð·Ð°",
    "Ñ‚Ð²Ð°Ñ€Ð¸Ð½Ð°", "ÑƒÐ±Ð»ÑŽÐ´Ð¾Ðº", "ÑƒÑ€Ð¾Ð´Ð¸Ð½Ð°", "ÑƒÑ€Ð¾Ð´ÐºÐ°", "Ð²Ñ‹Ñ€Ð¾Ð´Ð¾Ðº", "Ð´ÐµÐ³ÐµÐ½ÐµÑ€Ð°Ñ‚",
    "Ð´ÐµÐ±Ð¸Ð»Ð¾Ð¸Ð´", "Ð¸Ð¼Ð±ÐµÑ†Ð¸Ð»", "Ð¾Ð»Ð¸Ð³Ð¾Ñ„Ñ€ÐµÐ½", "Ð´Ð°ÑƒÐ½", "Ð´Ð°ÑƒÐ½ÑÑ€Ð°", "Ð¾Ñ‚Ð¼Ð¾Ñ€Ð¾Ð·Ð¾Ðº",
    "Ð¿Ð¾Ð³Ð°Ð½ÑŒ", "Ð¿Ð¾Ð³Ð°Ð½Ñ‹Ð¹", "Ð¿Ð¾Ð´Ð¾Ð½Ð¾Ðº", "Ð¿Ð¾Ð´Ð¾Ð½ÐºÐ¸", "Ð¿Ð¾Ð´Ð»ÐµÑ†", "Ð¿Ð¾Ð´Ð»Ñ‹Ð¹",
    "Ð¿Ñ€ÐµÐ´Ð°Ñ‚ÐµÐ»ÑŒ", "Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð½Ñ‹Ð¹", "Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð½Ð¸Ðº", "ÑÑƒÐºÐ¸Ð½ ÑÑ‹Ð½", "ÑÑƒÐºÐ¸Ð½Ð° Ð´Ð¾Ñ‡ÑŒ",
    "ÐµÐ±Ð°Ð½Ñ‹Ð¹ Ð² Ñ€Ð¾Ñ‚", "Ñ‘Ð±Ð°Ð½Ñ‹Ð¹ Ð² Ñ€Ð¾Ñ‚", "Ñ‘Ð± Ñ‚Ð²Ð¾ÑŽ Ð¼Ð°Ñ‚ÑŒ", "Ð¿Ð¾ÑˆÑ‘Ð» Ð½Ð° Ñ…ÑƒÐ¹", "Ð¿Ð¾ÑˆÐ»Ð° Ð½Ð° Ñ…ÑƒÐ¹",
    "Ð¸Ð´Ð¸ Ð½Ð° Ñ…ÑƒÐ¹", "Ð¿Ð¾ÑˆÑ‘Ð» Ð² Ð¿Ð¸Ð·Ð´Ñƒ", "Ð¸Ð´Ð¸ Ð² Ð¿Ð¸Ð·Ð´Ñƒ", "Ð¿Ð¾ÑˆÑ‘Ð» Ðº Ñ‡Ñ‘Ñ€Ñ‚Ñƒ", "Ð¸Ð´Ð¸ Ðº Ñ‡Ñ‘Ñ€Ñ‚Ñƒ",
    "Ñ‡Ñ‘Ñ€Ñ‚ Ð¿Ð¾Ð±ÐµÑ€Ð¸", "Ñ‡Ñ‘Ñ€Ñ‚ Ð²Ð¾Ð·ÑŒÐ¼Ð¸", "Ð´ÑŒÑÐ²Ð¾Ð»", "ÑÐ°Ñ‚Ð°Ð½Ð°", "Ð°Ð´", "Ð¿Ñ€Ð¾ÐºÐ»ÑÑ‚Ð¸Ðµ",
    "Ð¿Ñ€Ð¾ÐºÐ»ÑÑ‚Ñ‹Ð¹", "Ð¿Ñ€Ð¾ÐºÐ»ÑÑ‚Ð°Ñ", "Ð°Ð´Ð¾Ð²Ñ‹Ð¹", "Ð°Ð´ÑÐºÐ¸Ð¹", "Ð´ÑŒÑÐ²Ð¾Ð»ÑŒÑÐºÐ¸Ð¹", "Ð±ÐµÑÐ¾Ð²ÑÐºÐ¸Ð¹",
    "Ð±ÐµÑ", "Ð½ÐµÑ‡Ð¸ÑÑ‚ÑŒ", "Ñ‡ÐµÑ€Ñ‚Ð¾Ð²", "Ñ‡Ñ‘Ñ€Ñ‚Ð¾Ð²", "Ð¾ÐºÐ°ÑÐ½Ð½Ñ‹Ð¹", "Ð³Ñ€ÐµÑ…Ð¾Ð²Ð½Ñ‹Ð¹", "Ð³Ñ€ÐµÑˆÐ½Ñ‹Ð¹",
    "Ð¿Ð¾Ñ€Ð¾Ñ‡Ð½Ñ‹Ð¹", "Ñ€Ð°Ð·Ð²Ñ€Ð°Ñ‚Ð½Ñ‹Ð¹", "Ð±Ð»ÑƒÐ´", "Ð±Ð»ÑƒÐ´Ð½Ð¸Ðº", "Ð±Ð»ÑƒÐ´Ð½Ð¸Ñ†Ð°", "Ð¿Ð¾Ñ…Ð¾Ñ‚Ð»Ð¸Ð²Ñ‹Ð¹",
    "ÑÐ»Ð°Ð´Ð¾ÑÑ‚Ñ€Ð°ÑÑ‚Ð½Ñ‹Ð¹", "Ð¿Ð¾Ñ…Ð¾Ñ‚ÑŒ", "Ð²Ð¾Ð¶Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ", "ÑÑ€Ð°Ð¼", "ÑÑ€Ð°Ð¼Ð½Ð¾Ð¹", "ÑÐºÐ²ÐµÑ€Ð½Ð¾ÑÐ»Ð¾Ð²Ð¸Ðµ",
    "Ð¼Ð°Ñ‚ÐµÑ€Ñ‰Ð¸Ð½Ð½Ð¸Ðº", "Ð¼Ð°Ñ‚ÐµÑ€Ñ‰Ð¸Ð½Ð°", "Ð¼Ð°Ñ‚ÐµÑ€Ð½Ñ‹Ð¹", "Ð½ÐµÑ†ÐµÐ½Ð·ÑƒÑ€Ð½Ñ‹Ð¹", "Ð½ÐµÐ¿ÐµÑ‡Ð°Ñ‚Ð½Ñ‹Ð¹",
    "Ð½ÐµÐ¿Ñ€Ð¸Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹", "Ð½ÐµÐ¿Ñ€Ð¸ÑÑ‚Ð¾Ð¹Ð½Ñ‹Ð¹", "Ð½ÐµÐ¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ñ‹Ð¹", "Ð²ÑƒÐ»ÑŒÐ³Ð°Ñ€Ð½Ñ‹Ð¹", "Ð³Ñ€ÑƒÐ±Ñ‹Ð¹",
    "Ñ…Ð°Ð¼ÑÐºÐ¸Ð¹", "Ð½Ð°Ñ…Ð°Ð»ÑŒÐ½Ñ‹Ð¹", "Ð½Ð°Ð³Ð»Ñ‹Ð¹", "Ð±ÐµÑÑÑ‚Ñ‹Ð¶Ð¸Ð¹", "Ð±ÐµÑÐ¿Ð°Ñ€Ð´Ð¾Ð½Ð½Ñ‹Ð¹", "Ð½Ð°Ð³Ð»ÐµÑ†",
    "Ð½Ð°Ñ…Ð°Ð»", "Ñ…Ð°Ð¼", "Ð³Ñ€ÑƒÐ±Ð¸ÑÐ½", "Ð½ÐµÐ²ÐµÐ¶Ð°", "Ð½ÐµÐ²Ð¾ÑÐ¿Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹", "Ð½ÐµÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð½Ñ‹Ð¹",
    "Ð´ÐµÑ€ÐµÐ²ÐµÐ½Ñ‰Ð¸Ð½Ð°", "Ð±Ñ‹Ð´Ð»Ð¾", "Ð¿Ð»ÐµÐ±ÐµÐ¹", "Ñ‡ÐµÑ€Ð½ÑŒ", "Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð½Ð°Ñ€Ð¾Ð´ÑŒÐµ", "ÑÐ¾Ð²ÐºÐ¾Ð²Ñ‹Ð¹",
    "ÑÐ¾Ð²Ð¾Ðº", "Ð²Ð°Ñ‚Ð½Ð¸Ðº", "Ð³Ð¾Ð¼Ð¾Ñ„Ð¾Ð±", "Ñ‚Ñ€Ð°Ð½ÑÑ„Ð¾Ð±", "Ñ€Ð°ÑÐ¸ÑÑ‚", "Ð½Ð°Ñ†Ð¸ÑÑ‚", "Ñ„Ð°ÑˆÐ¸ÑÑ‚",
    "ÑˆÐ¾Ð²Ð¸Ð½Ð¸ÑÑ‚", "ÐºÑÐµÐ½Ð¾Ñ„Ð¾Ð±", "Ð°Ð½Ñ‚Ð¸ÑÐµÐ¼Ð¸Ñ‚", "Ð¼Ð¸Ð·Ð¾Ð³Ð¸Ð½", "ÑÐ¹Ð´Ð¶Ð¸ÑÑ‚", "Ð´Ð¸ÑÐºÑ€Ð¸Ð¼Ð¸Ð½Ð°Ñ‚Ð¾Ñ€",
    "ÑƒÐ³Ð½ÐµÑ‚Ð°Ñ‚ÐµÐ»ÑŒ", "ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ‚Ð¾Ñ€", "Ñ‚Ð¸Ñ€Ð°Ð½", "Ð´ÐµÑÐ¿Ð¾Ñ‚", "Ð´Ð¸ÐºÑ‚Ð°Ñ‚Ð¾Ñ€", "Ñ‚Ð¾Ñ‚Ð°Ð»Ð¸Ñ‚Ð°Ñ€Ð¸ÑÑ‚",
    "Ñ€ÐµÐ¿Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹", "Ñ†ÐµÐ½Ð·ÑƒÑ€Ð°", "Ð¿Ñ€Ð¾Ð¿Ð°Ð³Ð°Ð½Ð´Ð¸ÑÑ‚", "Ð´ÐµÐ¼Ð°Ð³Ð¾Ð³", "Ð¿Ð¾Ð¿ÑƒÐ»Ð¸ÑÑ‚", "Ñ„Ð°Ð½Ð°Ñ‚Ð¸Ðº",
    "ÑÐºÑÑ‚Ñ€ÐµÐ¼Ð¸ÑÑ‚", "Ñ‚ÐµÑ€Ñ€Ð¾Ñ€Ð¸ÑÑ‚", "ÑÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð¸ÑÑ‚", "ÐºÐ¾Ð»Ð»Ð°Ð±Ð¾Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð¸ÑÑ‚", "ÑˆÐ¿Ð¸Ð¾Ð½",
    "Ð´Ð¸Ð²ÐµÑ€ÑÐ°Ð½Ñ‚", "ÑÐ°Ð±Ð¾Ñ‚Ð°Ð¶Ð½Ð¸Ðº", "Ð²Ñ€ÐµÐ´Ð¸Ñ‚ÐµÐ»ÑŒ", "Ð¸Ð·Ð¼ÐµÐ½Ð½Ð¸Ðº", "Ð¿Ñ€ÐµÐ´Ð°Ñ‚ÐµÐ»ÑŒ Ñ€Ð¾Ð´Ð¸Ð½Ñ‹",
    "Ð²Ñ€Ð°Ð³ Ð½Ð°Ñ€Ð¾Ð´Ð°", "Ð´Ð¸ÑÑÐ¸Ð´ÐµÐ½Ñ‚", "Ð¸Ð½Ð°ÐºÐ¾Ð¼Ñ‹ÑÐ»ÑÑ‰Ð¸Ð¹", "ÐµÑ€ÐµÑ‚Ð¸Ðº", "Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ð½Ð¸Ðº",
    "Ð±Ð¾Ð³Ð¾Ñ…ÑƒÐ»ÑŒÐ½Ð¸Ðº", "ÐºÐ¾Ñ‰ÑƒÐ½Ð½Ð¸Ðº", "ÑÐ²ÑÑ‚Ð¾Ñ‚Ð°Ñ‚ÐµÑ†", "Ð½ÐµÑ‡ÐµÑÑ‚Ð¸Ð²ÐµÑ†"
]

# Ð“Ñ€ÑƒÑÑ‚ÑŒ, Ñ‚Ð¾ÑÐºÐ°, Ð¿ÑƒÑÑ‚Ð¾Ñ‚Ð°, Ð¾Ð´Ð¸Ð½Ð¾Ñ‡ÐµÑÑ‚Ð²Ð¾ (Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾ ÑÐ¾ÐºÑ€Ð°Ñ‰ÐµÐ½Ð¾)
SAD_PATTERNS = [
    "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð½Ðµ Ð±Ñ‹Ð»Ð¾", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð½Ðµ Ð±Ñ‹Ð»Ð¾", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾",
    "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ñ€Ð°Ð´ÑƒÐµÑ‚", "Ð½Ð¸Ñ‡Ñ‚Ð¾ Ð½Ðµ Ñ€Ð°Ð´ÑƒÐµÑ‚", "Ð²ÑÑ‘ Ð¿Ð»Ð¾Ñ…Ð¾", "Ð²ÑÐµ Ð¿Ð»Ð¾Ñ…Ð¾", "Ð²ÑÐµ ÑƒÐ¶Ð°ÑÐ½Ð¾",
    "Ð²ÑÑ‘ ÑƒÐ¶Ð°ÑÐ½Ð¾", "ÑÐ¾Ð²ÑÐµÐ¼ Ð¿Ð»Ð¾Ñ…Ð¾", "ÑƒÐ¶Ð°ÑÐ½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð¾Ñ‚Ð²Ñ€Ð°Ñ‚Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð´ÐµÐ½ÑŒ Ð³Ð¾Ð²Ð½Ð¾",
    "Ð´ÐµÐ½ÑŒ Ð¾Ñ‚ÑÑ‚Ð¾Ð¹", "Ð´ÐµÐ½ÑŒ Ð±Ñ‹Ð» ÑƒÐ¶Ð°ÑÐ½Ñ‹Ð¹", "Ð´ÐµÐ½ÑŒ Ð½Ðµ Ð·Ð°Ð´Ð°Ð»ÑÑ", "Ð´ÐµÐ½ÑŒ ÐºÐ¾Ñ‚Ñƒ Ð¿Ð¾Ð´ Ñ…Ð²Ð¾ÑÑ‚",
    "Ð²ÑÑ‘ Ð±ÐµÑÐ¸Ñ‚", "Ð²ÑÐµ Ð±ÐµÑÐ¸Ñ‚", "Ð²ÑÐµ Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ð°ÐµÑ‚", "Ð²ÑÑ‘ Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ð°ÐµÑ‚", "Ð¿Ð»Ð¾Ñ…Ð¾", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ð»Ð¾Ñ…Ð¾",
    "ÐºÑ€Ð°Ð¹Ð½Ðµ Ð¿Ð»Ð¾Ñ…Ð¾", "Ñ‚ÑÐ¶ÐµÐ»Ð¾", "Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‚ÑÐ¶ÐµÐ»Ð¾", "Ð´ÑƒÑˆÐ½Ð¾ Ð²Ð½ÑƒÑ‚Ñ€Ð¸", "Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾",
    "Ð¼Ð½Ðµ Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾", "Ð¼Ð½Ðµ Ð¾Ñ‡ÐµÐ½ÑŒ Ð³Ñ€ÑƒÑÑ‚Ð½Ð¾", "Ñ‚Ð¾ÑÐºÐ»Ð¸Ð²Ð¾", "Ð¼Ð½Ðµ Ñ‚Ð¾ÑÐºÐ»Ð¸Ð²Ð¾", "Ñ…Ñ€ÐµÐ½Ð¾Ð²Ð¾", "Ñ„Ð¸Ð³Ð¾Ð²Ð¾",
    "Ð¾Ñ‚ÑÑ‚Ð¾Ð¹Ð½Ð¾", "Ð¼ÐµÑ€Ð·ÐºÐ¾ Ð½Ð° Ð´ÑƒÑˆÐµ", "Ð´ÐµÐ¿Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾", "Ð´ÐµÐ¿Ñ€ÐµÑÑÐ¸Ñ Ð½Ð°ÐºÑ€Ñ‹Ð»Ð°", "Ð´ÐµÐ¿Ñ€ÐµÑÑÐ½ÑÐº",
    "Ð´ÑƒÑˆÐ° Ð½Ð¾ÐµÑ‚", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ñ…Ð¾Ñ‡ÐµÑ‚ÑÑ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð½Ð¸Ñ‡ÐµÐ³Ð¾", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¼Ð¾Ð³Ñƒ", "Ð½ÐµÑ‚ Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ",
    "Ð½ÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ", "ÑƒÐ¶Ð°Ñ", "Ñ€Ð°Ð·Ð¾Ñ‡Ð°Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ", "ÑÐ¿Ð»Ð¾ÑˆÐ½Ð¾Ðµ Ñ€Ð°Ð·Ð¾Ñ‡Ð°Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ", "Ð¾Ð´Ð¸Ð½Ð¾Ñ‡ÐµÑÑ‚Ð²Ð¾",
    "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð¾Ð´Ð¸Ð½Ð¾ÐºÐ¾", "Ð¼Ð½Ðµ Ð¾Ð´Ð¸Ð½Ð¾ÐºÐ¾", "Ñ Ð¾Ð´Ð½Ð°", "Ñ Ð¾Ð´Ð¸Ð½", "Ð¾ÑÑ‚Ð°Ð»Ð°ÑÑŒ Ð¾Ð´Ð½Ð°", "Ð¾ÑÑ‚Ð°Ð»ÑÑ Ð¾Ð´Ð¸Ð½",
    " Ð½Ð¸ÐºÐ¾Ð¼Ñƒ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð°", "Ð½Ð¸ÐºÐ¾Ð¼Ñƒ Ð½Ðµ Ð½ÑƒÐ¶ÐµÐ½", "Ð¼ÐµÐ½Ñ Ð½Ð¸ÐºÑ‚Ð¾ Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÑ‚", " Ð½Ð¸ÐºÑ‚Ð¾ Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÑ‚",
    "Ð¼ÐµÐ½Ñ Ð½Ðµ ÑÐ»Ñ‹ÑˆÐ°Ñ‚", "Ñ Ñ€ÐµÐ²Ñƒ", "Ñ Ð¿Ð»Ð°Ñ‡Ñƒ", "Ñ…Ð¾Ñ‡Ñƒ Ð¿Ð»Ð°ÐºÐ°Ñ‚ÑŒ", "Ð¿Ð»Ð°ÐºÐ°Ñ‚ÑŒ Ñ…Ð¾Ñ‡ÐµÑ‚ÑÑ", "Ñ€Ñ‹Ð´Ð°ÑŽ",
    "Ð¾Ð¿ÑÑ‚ÑŒ ÑÐ¾Ñ€Ð²Ð°Ð»Ð°ÑÑŒ Ð² ÑÐ»ÐµÐ·Ñ‹", "Ð¾Ð¿ÑÑ‚ÑŒ Ð¿Ð»Ð°Ñ‡Ñƒ", "ÑÐµÑ€Ð´Ñ†Ðµ Ð±Ð¾Ð»Ð¸Ñ‚", "Ð½Ð° Ð´ÑƒÑˆÐµ Ñ‚ÑÐ¶ÐµÐ»Ð¾", "Ð½Ð° Ð´ÑƒÑˆÐµ Ð¿ÑƒÑÑ‚Ð¾",
    "Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¿ÑƒÑÑ‚Ð¾", "ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ñ‚Ð°", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿ÑƒÑÑ‚Ð¾ Ð²Ð½ÑƒÑ‚Ñ€Ð¸", "Ð½Ðµ Ð²Ð¸Ð¶Ñƒ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸", "Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð½ÐµÑ‚",
    "Ð½ÐµÑ‚ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾", "Ð½Ðµ Ð·Ð° Ñ‡Ñ‚Ð¾ Ð·Ð°Ñ†ÐµÐ¿Ð¸Ñ‚ÑŒÑÑ", "Ð½Ðµ Ðº Ñ‡ÐµÐ¼Ñƒ Ð¿Ñ€Ð¸Ð¶Ð°Ñ‚ÑŒÑÑ Ð²Ð½ÑƒÑ‚Ñ€Ð¸", "Ð²ÑÐµ ÑÐµÑ€Ð¾Ðµ",
    "ÑÐ¿Ð»Ð¾ÑˆÐ½Ð°Ñ ÑÐµÑ€Ð°Ñ Ð¼Ð°ÑÑÐ°", "Ð¾Ñ‰ÑƒÑ‰ÐµÐ½Ð¸Ðµ Ð±ÐµÐ·Ñ‹ÑÑ…Ð¾Ð´Ð½Ð¾ÑÑ‚Ð¸", "Ð±ÐµÐ·Ñ‹ÑÑ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ð¾Ð¹",
    "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ñ‹Ð¼", "Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ", "Ð²ÑÐµ Ð¿Ñ€Ð¾Ð¿Ð°Ð»Ð¾", "Ð²ÑÑ‘ Ð¿Ñ€Ð¾Ð¿Ð°Ð»Ð¾", "Ð²ÑÐµ ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð¾",
    "Ð²ÑÑ‘ ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð¾", "Ð½ÐµÑ‚ Ð²Ñ‹Ñ…Ð¾Ð´Ð°", "Ð½Ðµ Ð²Ð¸Ð¶Ñƒ Ð²Ñ‹Ñ…Ð¾Ð´Ð°", "Ð±ÐµÐ·Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ð°Ñ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ñ", "Ð¾Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ Ñ€ÑƒÐºÐ¸",
    "Ñ€ÑƒÐºÐ¸ Ð¾Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ", "Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð» Ñ€ÑƒÐºÐ¸", "Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð»Ð° Ñ€ÑƒÐºÐ¸", "Ð½ÐµÑ‚ Ð½Ð°Ð´ÐµÐ¶Ð´Ñ‹", "Ð½Ð°Ð´ÐµÐ¶Ð´Ñ‹ Ð½ÐµÑ‚",
    "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ð½Ð°Ð´ÐµÐ¶Ð´Ñƒ", "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ»Ð° Ð½Ð°Ð´ÐµÐ¶Ð´Ñƒ", "Ð²ÑÐµ Ð±ÐµÑÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½Ð¾", "Ð²ÑÑ‘ Ð±ÐµÑÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½Ð¾",
    "Ð¶Ð¸Ð·Ð½ÑŒ Ð±ÐµÑÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½Ð°", "Ð½ÐµÑ‚ ÑÐ¸Ð» Ð±Ð¾Ñ€Ð¾Ñ‚ÑŒÑÑ", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ð±Ð¾Ñ€Ð¾Ñ‚ÑŒÑÑ", "ÑƒÑÑ‚Ð°Ð» Ð±Ð¾Ñ€Ð¾Ñ‚ÑŒÑÑ",
    "ÑƒÑÑ‚Ð°Ð»Ð° Ð±Ð¾Ñ€Ð¾Ñ‚ÑŒÑÑ", "Ð²ÑÐµ Ð½Ð°Ð´Ð¾ÐµÐ»Ð¾", "Ð²ÑÑ‘ Ð½Ð°Ð´Ð¾ÐµÐ»Ð¾", "Ð¶Ð¸Ð·Ð½ÑŒ Ð½Ð°Ð´Ð¾ÐµÐ»Ð°", "Ð²ÑÐµ Ð´Ð¾ÑÑ‚Ð°Ð»Ð¾",
    "Ð½ÐµÑ‚ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸", "Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð½Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ñ€Ð°Ð´Ð¾Ð²Ð°Ñ‚ÑŒÑÑ", "Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¿Ð»Ð°Ñ‡Ñƒ",
    "ÑÐ»ÐµÐ·Ñ‹ Ð½Ð°Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°ÑŽÑ‚ÑÑ", "Ð³Ð¾Ñ‚Ð¾Ð² Ñ€Ð°ÑÐ¿Ð»Ð°ÐºÐ°Ñ‚ÑŒÑÑ", "Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÑÑ Ð±Ð¾Ð»ÑŒ", "Ð´ÑƒÑˆÐµÐ²Ð½Ð°Ñ Ð±Ð¾Ð»ÑŒ",
    "Ð±Ð¾Ð»ÑŒ Ð² Ð´ÑƒÑˆÐµ", "ÑÐµÑ€Ð´Ñ†Ðµ Ñ€Ð°Ð·Ñ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð½ÐµÐ½ÑƒÐ¶Ð½Ñ‹Ð¼", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð½ÐµÐ½ÑƒÐ¶Ð½Ð¾Ð¹",
    "Ð¾Ñ‰ÑƒÑ‰Ð°ÑŽ ÑÐ²Ð¾ÑŽ Ð½ÐµÐ½ÑƒÐ¶Ð½Ð¾ÑÑ‚ÑŒ", " Ð½Ð¸ÐºÑ‚Ð¾ Ð½Ðµ Ñ†ÐµÐ½Ð¸Ñ‚", "Ð¼ÐµÐ½Ñ Ð½Ðµ Ñ†ÐµÐ½Ð¸Ñ‚", "Ð½Ðµ Ñ†ÐµÐ½ÑÑ‚ Ð¼Ð¾Ð¸ ÑƒÑÐ¸Ð»Ð¸Ñ",
    "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» ÑÐ¼Ñ‹ÑÐ»", "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ»Ð° ÑÐ¼Ñ‹ÑÐ»", "ÑÐ¼Ñ‹ÑÐ» Ð¶Ð¸Ð·Ð½Ð¸ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ½", "Ð²ÑÐµ Ð²Ð°Ð»Ð¸Ñ‚ÑÑ Ð¸Ð· Ñ€ÑƒÐº",
    "Ð²ÑÑ‘ Ð²Ð°Ð»Ð¸Ñ‚ÑÑ Ð¸Ð· Ñ€ÑƒÐº", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ÑÑ", "Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ñ‹Ðµ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð¸", "Ð¾Ð´Ð½Ð¸ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð¸",
    "Ð½Ðµ Ð²ÐµÐ·ÐµÑ‚", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð½Ð¸ÐºÐ¾Ð¼", "Ñ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð½Ð¸Ðº", "Ñ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð½Ð¸Ñ†Ð°", "Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð² Ð¼ÐµÐ½Ñ",
    "Ð²ÑÑ‘ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð² Ð¼ÐµÐ½Ñ", "Ð¼Ð¸Ñ€ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð² Ð¼ÐµÐ½Ñ", "Ð½ÐµÑÐ¿Ñ€Ð°Ð²ÐµÐ´Ð»Ð¸Ð²Ð¾", "Ð¶Ð¸Ð·Ð½ÑŒ Ð½ÐµÑÐ¿Ñ€Ð°Ð²ÐµÐ´Ð»Ð¸Ð²Ð°",
    "Ð²ÑÐµ Ð½ÐµÑÐ¿Ñ€Ð°Ð²ÐµÐ´Ð»Ð¸Ð²Ð¾", "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ð²ÐµÑ€Ñƒ", "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ»Ð° Ð²ÐµÑ€Ñƒ", "Ð²ÐµÑ€Ð° Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ½Ð°", "Ð²ÑÐµ Ñ€ÑƒÑ…Ð½ÑƒÐ»Ð¾",
    "Ð²ÑÑ‘ Ñ€ÑƒÑ…Ð½ÑƒÐ»Ð¾", "Ð¼Ð¸Ñ€ Ñ€ÑƒÑ…Ð½ÑƒÐ»", "Ð½ÐµÑ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸", "Ð½Ðµ Ð½Ð° ÐºÐ¾Ð³Ð¾ Ð¾Ð¿ÐµÑ€ÐµÑ‚ÑŒÑÑ", "Ð½ÐµÐºÐ¾Ð¼Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ",
    "Ð¾Ð´Ð¸Ð½ Ð½Ð° Ð¾Ð´Ð¸Ð½ Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ð¼Ð¸", "Ð¾Ð´Ð½Ð° Ð½Ð° Ð¾Ð´Ð½Ð° Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ð¼Ð¸", "Ð²ÑÐµ ÑÐ»Ð¾Ð¶Ð½Ð¾", "Ð²ÑÑ‘ ÑÐ»Ð¾Ð¶Ð½Ð¾",
    "ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ ÑÐ»Ð¾Ð¶Ð½Ð¾", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒÑÑ", "Ð½Ðµ ÑÐ¿Ñ€Ð°Ð²Ð»ÑÑŽÑÑŒ", "Ð½Ðµ Ð²Ñ‹Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽ", "Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ñ‹Ð¹ ÑÑ‚Ñ€ÐµÑÑ",
    "Ñ…Ñ€Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÑ‚Ñ€ÐµÑÑ", "Ð¶Ð¸Ð²Ñƒ Ð² ÑÑ‚Ñ€ÐµÑÑÐµ", "Ð½ÐµÑ‚ Ð¿Ð¾ÐºÐ¾Ñ", "Ð¿Ð¾ÐºÐ¾Ñ Ð½ÐµÑ‚", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ ÑƒÑÐ¿Ð¾ÐºÐ¾Ð¸Ñ‚ÑŒÑÑ",
    "Ð²ÑÐµ Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ð°ÐµÑ‚", "Ð²ÑÑ‘ Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ð°ÐµÑ‚", "Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ð°ÑŽÑ‚ Ð²ÑÐµ", "Ð½ÐµÑ‚ Ñ‚ÐµÑ€Ð¿ÐµÐ½Ð¸Ñ", "Ñ‚ÐµÑ€Ð¿ÐµÐ½Ð¸Ñ Ð½ÐµÑ‚",
    "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ñ‚ÐµÑ€Ð¿ÐµÐ½Ð¸Ðµ", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð·Ð°Ð³Ð½Ð°Ð½Ð½Ñ‹Ð¼", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð·Ð°Ð³Ð½Ð°Ð½Ð½Ð¾Ð¹", "Ð² Ñ‚ÑƒÐ¿Ð¸ÐºÐµ",
    "Ð·Ð°ÑˆÐµÐ» Ð² Ñ‚ÑƒÐ¿Ð¸Ðº", "Ð·Ð°ÑˆÐ»Ð° Ð² Ñ‚ÑƒÐ¿Ð¸Ðº", "Ð½ÐµÑ‚ Ð¿ÐµÑ€ÑÐ¿ÐµÐºÑ‚Ð¸Ð²", "Ð¿ÐµÑ€ÑÐ¿ÐµÐºÑ‚Ð¸Ð² Ð½ÐµÑ‚", "Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ Ð¿ÑƒÐ³Ð°ÐµÑ‚"
]

# Ð£ÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ, Ð²Ñ‹Ð³Ð¾Ñ€Ð°Ð½Ð¸Ðµ
TIRED_PATTERNS = [
    "ÑƒÑÑ‚Ð°Ð»Ð°", "ÑƒÑÑ‚Ð°Ð»", "Ñ Ñ‚Ð°Ðº ÑƒÑÑ‚Ð°Ð»Ð°", "Ñ Ñ‚Ð°Ðº ÑƒÑÑ‚Ð°Ð»", "Ð¾Ñ‡ÐµÐ½ÑŒ ÑƒÑÑ‚Ð°Ð»Ð°", "Ð¾Ñ‡ÐµÐ½ÑŒ ÑƒÑÑ‚Ð°Ð»",
    "ÑÐ¸Ð»ÑŒÐ½Ð¾ ÑƒÑÑ‚Ð°Ð»Ð°", "ÑÐ¸Ð»ÑŒÐ½Ð¾ ÑƒÑÑ‚Ð°Ð»", "ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð±ÐµÐ· ÑÐ¸Ð»", "ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð½ÐµÑ‚ ÑÐ¸Ð»", "ÑÐ¸Ð» Ð½ÐµÑ‚",
    "Ð½ÐµÑ‚ ÑÐ¸Ð»", "Ð½Ð¸ Ð½Ð° Ñ‡Ñ‚Ð¾ Ð½ÐµÑ‚ ÑÐ¸Ð»", "ÑÐ¾Ð²ÑÐµÐ¼ Ð½ÐµÑ‚ ÑÐ¸Ð»", "Ð½Ð¸ ÐºÐ°Ð¿Ð»Ð¸ ÑÐ¸Ð»", "Ñ Ð²Ñ‹Ð¼Ð¾Ñ‚Ð°Ð»Ð°ÑÑŒ", "Ñ Ð²Ñ‹Ð¼Ð¾Ñ‚Ð°Ð»ÑÑ",
    "Ð²Ñ‹Ð¼Ð¾Ñ‚Ð°Ð»Ð°ÑÑŒ", "Ð²Ñ‹Ð¼Ð¾Ñ‚Ð°Ð»ÑÑ", "Ð²Ñ‹Ð³Ð¾Ñ€ÐµÐ»Ð°", "Ð²Ñ‹Ð³Ð¾Ñ€ÐµÐ»", " Ñ Ð²Ñ‹Ð³Ð¾Ñ€ÐµÐ»Ð°", " Ñ Ð²Ñ‹Ð³Ð¾Ñ€ÐµÐ»", "ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ Ð²Ñ‹Ð³Ð¾Ñ€ÐµÐ»Ð°",
    "ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ Ð²Ñ‹Ð³Ð¾Ñ€ÐµÐ»", "Ð¼Ð¾Ñ€Ð°Ð»ÑŒÐ½Ð¾ ÑƒÑÑ‚Ð°Ð»Ð°", "Ð¼Ð¾Ñ€Ð°Ð»ÑŒÐ½Ð¾ ÑƒÑÑ‚Ð°Ð»", "Ñ Ð¾Ñ‡ÐµÐ½ÑŒ ÑƒÑÑ‚Ð°Ð»Ð° Ð¼Ð¾Ñ€Ð°Ð»ÑŒÐ½Ð¾",
    "Ñ Ð¾Ñ‡ÐµÐ½ÑŒ ÑƒÑÑ‚Ð°Ð» Ð¼Ð¾Ñ€Ð°Ð»ÑŒÐ½Ð¾", "Ð¾Ð±ÐµÑÑÐ¸Ð»ÐµÐ½Ð°", "Ð¾Ð±ÐµÑÑÐ¸Ð»ÐµÐ½", "Ð¾Ð±ÐµÑÑÐ¸Ð»ÐµÐ½Ð½Ñ‹Ð¹", "Ð¾Ð±ÐµÑÑÐ¸Ð»ÐµÐ½Ð½Ð°Ñ", "Ð¼Ð½Ðµ Ñ‚ÑÐ¶ÐµÐ»Ð¾",
    "Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‚ÑÐ¶ÐµÐ»Ð¾", "Ð½ÐµÐ²Ñ‹Ð½Ð¾ÑÐ¸Ð¼Ð¾ Ñ‚ÑÐ¶ÐµÐ»Ð¾", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐ¸Ð»ÑŒÐ½ÑƒÑŽ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ", "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ",
    "Ð½Ð¸ÐºÐ°ÐºÐ¸Ñ… ÑÐ¸Ð»", "ÑÐ¸Ð» Ð±ÑƒÐºÐ²Ð°Ð»ÑŒÐ½Ð¾ Ð½Ð¾Ð»ÑŒ", "Ð¿ÑƒÑÑ‚Ð°Ñ ÐºÐ°Ðº Ð²Ñ‹Ð¶Ð°Ñ‚Ñ‹Ð¹ Ð»Ð¸Ð¼Ð¾Ð½", "ÐºÐ°Ðº Ð²Ñ‹Ð¶Ð°Ñ‚Ñ‹Ð¹ Ð»Ð¸Ð¼Ð¾Ð½",
    "Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½ÐµÑ‚ ÑÐ½ÐµÑ€Ð³Ð¸Ð¸", "ÑÐ½ÐµÑ€Ð³Ð¸Ñ Ð½Ð° Ð½ÑƒÐ»Ðµ", "Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð°", "Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð°", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½",
    "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ð±Ð¾Ð»ÑŒÑˆÐµ", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ñ‚ÑÐ½ÑƒÑ‚ÑŒ", "Ð½Ðµ Ñ‚ÑÐ½Ñƒ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ", "Ð½ÐµÑ‚ Ñ€ÐµÑÑƒÑ€ÑÐ°",
    "Ð½ÐµÑ‚ Ñ€ÐµÑÑƒÑ€ÑÐ° Ð²Ð¾Ð¾Ð±Ñ‰Ðµ", "Ð½Ð°Ð´Ð¾ÐµÐ»Ð¾ Ð²ÑÐµ Ñ‚Ð°Ñ‰Ð¸Ñ‚ÑŒ", "ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð³Ð¾ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸", "Ð½ÐµÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐµ ÑÐ¸Ð»",
    "ÑÐ¸Ð»Ñ‹ Ð½Ð° Ð¸ÑÑ…Ð¾Ð´Ðµ", "Ð½Ð° Ð¿Ñ€ÐµÐ´ÐµÐ»Ðµ", "Ð²Ñ‹Ð¶Ð°Ñ‚Ð° ÐºÐ°Ðº Ð»Ð¸Ð¼Ð¾Ð½", "Ð²Ñ‹Ð¶Ð°Ñ‚ ÐºÐ°Ðº Ð»Ð¸Ð¼Ð¾Ð½", "Ð²Ñ‹Ð¶Ð°Ñ‚Ñ‹Ð¹ Ð»Ð¸Ð¼Ð¾Ð½",
    "Ð±Ð°Ñ‚Ð°Ñ€ÐµÐ¹ÐºÐ° ÑÐµÐ»Ð°", "ÑÐ½ÐµÑ€Ð³Ð¸Ñ Ð½Ð° Ð½ÑƒÐ»Ðµ", "Ñ€Ð°Ð·Ñ€ÑÐ´Ð¸Ð»ÑÑ", "ÑƒÐ¿Ð°Ð´Ð¾Ðº ÑÐ¸Ð»", "ÑƒÐ¿Ð°Ð´Ð¾Ðº ÑÐ½ÐµÑ€Ð³Ð¸Ð¸", "Ð½ÐµÑ‚ Ð±Ð¾Ð´Ñ€Ð¾ÑÑ‚Ð¸",
    "Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ", "Ñ…Ñ€Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ", "ÑÐ¸Ð½Ð´Ñ€Ð¾Ð¼ Ñ…Ñ€Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚Ð¸", "Ñ†Ñ„Ñ",
    "Ñ„Ð¸Ð±Ñ€Ð¾Ð¼Ð¸Ð°Ð»Ð³Ð¸Ñ", "Ð±Ð¾Ð»Ð¸ Ð¾Ñ‚ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚Ð¸", "Ð¼Ñ‹ÑˆÐµÑ‡Ð½Ð°Ñ ÑÐ»Ð°Ð±Ð¾ÑÑ‚ÑŒ", "Ð½Ð¾Ð³Ð¸ Ð½Ðµ Ð´ÐµÑ€Ð¶Ð°Ñ‚", "Ñ€ÑƒÐºÐ¸ Ð½Ðµ Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÑŽÑ‚ÑÑ",
    "Ñ‚ÑÐ¶ÐµÐ»Ð¾ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒÑÑ", "Ð½ÐµÑ‚ Ñ‚Ð¾Ð½ÑƒÑÐ°", "Ð¼Ñ‹ÑˆÑ†Ñ‹ Ð²ÑÐ»Ñ‹Ðµ", "Ñ‚ÐµÐ»Ð¾ Ð²Ð°Ñ‚Ð½Ð¾Ðµ", "Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ð¾ÑÑ‚ÑŒ", "Ð¾Ñ‰ÑƒÑ‰ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ð¾Ð½Ð¾ÑÑ‚Ð¸",
    "Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ñ‹Ð¹ ÐºÐ¾Ñ€Ñ‹Ñ‚Ð¾Ð¼", "Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ð°Ñ ÐºÐ¾Ñ€Ñ‹Ñ‚Ð¾Ð¼", "ÑƒÑÑ‚Ð°Ð» ÐºÐ°Ðº ÑÐ¾Ð±Ð°ÐºÐ°", "ÑƒÑÑ‚Ð°Ð»Ð° ÐºÐ°Ðº ÑÐ¾Ð±Ð°ÐºÐ°", "ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ Ñ ÑƒÑ‚Ñ€Ð°",
    "Ð¿Ñ€Ð¾ÑÑ‹Ð¿Ð°ÑŽÑÑŒ ÑƒÑÑ‚Ð°Ð²ÑˆÐ¸Ð¼", "Ð½Ðµ Ð²Ñ‹ÑÐ¿Ð°Ð»Ð°ÑÑŒ", "Ð½Ðµ Ð²Ñ‹ÑÐ¿Ð°Ð»ÑÑ", "Ð½ÐµÐ´Ð¾ÑÑ‹Ð¿", "Ð±ÐµÑÑÐ¾Ð½Ð½Ð¸Ñ†Ð°", "Ð¿Ð»Ð¾Ñ…Ð¾ ÑÐ¿Ð»ÑŽ",
    "Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ñ ÑÐ½Ð°", "Ð¿Ñ€ÐµÑ€Ñ‹Ð²Ð¸ÑÑ‚Ñ‹Ð¹ ÑÐ¾Ð½", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ ÑƒÑÐ½ÑƒÑ‚ÑŒ", "Ñ€Ð°Ð½Ð½ÐµÐµ Ð¿Ñ€Ð¾Ð±ÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ", "Ð´Ð½ÐµÐ²Ð½Ð°Ñ ÑÐ¾Ð½Ð»Ð¸Ð²Ð¾ÑÑ‚ÑŒ",
    "Ñ…Ð¾Ñ‡ÐµÑ‚ÑÑ ÑÐ¿Ð°Ñ‚ÑŒ Ð´Ð½ÐµÐ¼", "Ð·Ð°ÑÑ‹Ð¿Ð°ÑŽ Ð½Ð° Ñ…Ð¾Ð´Ñƒ", "ÐºÐ»ÑŽÑŽ Ð½Ð¾ÑÐ¾Ð¼", "Ð±Ð¾Ñ€ÑŽÑÑŒ ÑÐ¾ ÑÐ½Ð¾Ð¼", "ÐºÐ¾Ñ„Ðµ Ð½Ðµ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚",
    "ÑÐ½ÐµÑ€Ð³ÐµÑ‚Ð¸ÐºÐ¸ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚", "Ð½ÐµÑ‚ ÐºÐ¾Ð½Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ñ†Ð¸Ð¸", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ ÑÐ¾ÑÑ€ÐµÐ´Ð¾Ñ‚Ð¾Ñ‡Ð¸Ñ‚ÑŒÑÑ", "Ð¼Ð¾Ð·Ð³ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚",
    "Ð¼Ñ‹ÑÐ»Ð¸ Ð¿ÑƒÑ‚Ð°ÑŽÑ‚ÑÑ", "Ñ‚ÑƒÐ¼Ð°Ð½ Ð² Ð³Ð¾Ð»Ð¾Ð²Ðµ", "Ð¼Ð¾Ð·Ð³Ð¾Ð²Ð¾Ð¹ Ñ‚ÑƒÐ¼Ð°Ð½", "ÐºÐ¾Ð³Ð½Ð¸Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ñ", "Ð¿Ð°Ð¼ÑÑ‚ÑŒ ÑƒÑ…ÑƒÐ´ÑˆÐ¸Ð»Ð°ÑÑŒ",
    "Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ñ€Ð°ÑÑÐµÑÐ½Ð¾", "Ñ€Ð°ÑÑÐµÑÐ½Ð½Ð¾ÑÑ‚ÑŒ", "Ð·Ð°Ð±Ñ‹Ð²Ñ‡Ð¸Ð²Ð¾ÑÑ‚ÑŒ", "Ð²ÑÐµ Ð·Ð°Ð±Ñ‹Ð²Ð°ÑŽ", "Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ ÑÐ¾Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽ",
    "Ñ‚ÑƒÐ³Ð¾ Ð´ÑƒÐ¼Ð°ÐµÑ‚ÑÑ", "ÑƒÐ¼ÑÑ‚Ð²ÐµÐ½Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ", "Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¸Ðµ", "Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÐºÐ¾Ðµ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¸Ðµ",
    "Ð½ÐµÑ‚ Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²ÐµÐ½Ð¸Ñ", "Ð²Ñ‹Ð³Ð¾Ñ€Ð°Ð½Ð¸Ðµ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ðµ", "Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð²Ñ‹Ð³Ð¾Ñ€Ð°Ð½Ð¸Ðµ", "ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¸Ðµ",
    "Ð½ÐµÑ‚ ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ¸Ð»", "Ð°Ð¿Ð°Ñ‚Ð¸Ñ", "Ð±ÐµÐ·Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð¸Ðµ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ", "ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿ÑƒÑÑ‚Ð¾Ñ‚Ð°",
    "Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð¿ÑƒÑÑ‚Ñ‹Ð¼", "Ð½ÐµÑ‚ Ð¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¸", "Ð´ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ñ…Ð¾Ñ‡ÐµÑ‚ÑÑ", "Ð¿Ñ€Ð¾ÐºÑ€Ð°ÑÑ‚Ð¸Ð½Ð°Ñ†Ð¸Ñ",
    "Ð¾Ñ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÑŽ Ð²ÑÐµ", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ð·Ð°ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐµÐ±Ñ", "Ð½ÐµÑ‚ Ð²Ð¾Ð»Ð¸", "ÑÐ¸Ð»Ð° Ð²Ð¾Ð»Ð¸ Ð½Ð° Ð½ÑƒÐ»Ðµ", "ÑÐ°Ð¼Ð¾Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ð° Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚",
    "Ð»ÐµÐ½ÑŒ", "Ð»ÐµÐ½ÑŒ Ñ‡Ñ‚Ð¾-Ð»Ð¸Ð±Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ", "Ð¾Ð±Ñ‰Ð°Ñ Ð»ÐµÐ½ÑŒ", "Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¸Ðµ", "Ñ‚ÐµÐ»Ð¾ Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¾",
    "Ð¸ÑÑ‚Ð¾Ñ‰ÐµÐ½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²", "Ñ€ÐµÐ·ÐµÑ€Ð²Ñ‹ Ð¸ÑÑ‡ÐµÑ€Ð¿Ð°Ð½Ñ‹", "Ð¿ÐµÑ€ÐµÑ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ", "ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð³Ð¾ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²Ð¾Ðº",
    "ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ð²Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ", "Ð¼Ñ‹ÑˆÑ†Ñ‹ Ð½Ðµ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÑŽÑ‚ÑÑ", "Ð±Ð¾Ð»ÑŒ Ð² Ð¼Ñ‹ÑˆÑ†Ð°Ñ…", "ÐºÑ€ÐµÐ¿Ð°Ñ‚ÑƒÑ€Ð°", "Ð¼Ñ‹ÑˆÑ†Ñ‹ Ð±Ð¾Ð»ÑÑ‚",
    "ÑÑƒÑÑ‚Ð°Ð²Ñ‹ Ð±Ð¾Ð»ÑÑ‚", "ÐºÐ¾ÑÑ‚Ð¸ Ð½Ð¾ÑŽÑ‚", "Ð²ÑÐµ Ñ‚ÐµÐ»Ð¾ Ð±Ð¾Ð»Ð¸Ñ‚", "Ð³Ð¾Ð»Ð¾Ð²Ð½Ð°Ñ Ð±Ð¾Ð»ÑŒ Ð¾Ñ‚ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚Ð¸", "Ð³Ð¾Ð»Ð¾Ð²Ð° Ñ€Ð°ÑÐºÐ°Ð»Ñ‹Ð²Ð°ÐµÑ‚ÑÑ",
    "Ð¼Ð¸Ð³Ñ€ÐµÐ½ÑŒ", "ÑÐ¸Ð»ÑŒÐ½Ð°Ñ Ð³Ð¾Ð»Ð¾Ð²Ð½Ð°Ñ Ð±Ð¾Ð»ÑŒ", "Ð³Ð¾Ð»Ð¾Ð²Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ", "ÐºÑ€ÑƒÐ¶Ð¸Ñ‚ÑÑ Ð³Ð¾Ð»Ð¾Ð²Ð°", "Ñ‚Ð¾ÑˆÐ½Ð¾Ñ‚Ð° Ð¾Ñ‚ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚Ð¸",
    "Ð¿Ð¾Ð´Ñ‚Ð°ÑˆÐ½Ð¸Ð²Ð°ÐµÑ‚", "ÑÐ½Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð¼Ð¼ÑƒÐ½Ð¸Ñ‚ÐµÑ‚Ð°", "Ñ‡Ð°ÑÑ‚Ð¾ Ð±Ð¾Ð»ÐµÑŽ", "Ð¿Ñ€Ð¾ÑÑ‚ÑƒÐ´Ñ‹", "Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¿Ñ€Ð¾ÑÑ‚ÑƒÐ¶Ð°ÑŽÑÑŒ",
    "Ð¾Ð±Ð¾ÑÑ‚Ñ€ÐµÐ½Ð¸Ðµ Ñ…Ñ€Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð±Ð¾Ð»ÐµÐ·Ð½ÐµÐ¹", "Ð±Ð¾Ð»ÑÑ‡ÐºÐ¸ Ð²Ñ‹Ð»ÐµÐ·Ð°ÑŽÑ‚", "Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ð¿Ð¸Ñ‰ÐµÐ²Ð°Ñ€ÐµÐ½Ð¸ÐµÐ¼", "Ð¶ÐµÐ»ÑƒÐ´Ð¾Ðº ÑˆÐ°Ð»Ð¸Ñ‚"
]

# Ð¢Ñ€ÐµÐ²Ð¾Ð³Ð°, ÑÑ‚Ñ€Ð°Ñ…, Ð¿Ð°Ð½Ð¸ÐºÐ° (ÑÐ¾ÐºÑ€Ð°Ñ‰Ñ‘Ð½Ð½Ñ‹Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº)
ANXIETY_PATTERNS = [
    "Ð±Ð¾ÑŽÑÑŒ", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð±Ð¾ÑŽÑÑŒ", "Ð±ÐµÐ·ÑƒÐ¼Ð½Ð¾ Ð±Ð¾ÑŽÑÑŒ", "Ð¼Ð½Ðµ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾", "ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾", "Ð´Ð¸ÐºÐ¾ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾",
    "Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ", "ÑÐ¸Ð»ÑŒÐ½Ð¾ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ", "Ñ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ", "Ñ Ð¾Ð¿ÑÑ‚ÑŒ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ",
    "Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾", "Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾", "Ð´Ð¸ÐºÐ¾ Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾", "Ð¼ÐµÐ½Ñ Ñ‚Ñ€ÑÑÐµÑ‚", "Ð¼ÐµÐ½Ñ Ñ‚Ñ€ÑÑÑ‘Ñ‚", "Ð¿Ð°Ð½Ð¸ÐºÐ°",
    "Ð¿Ð°Ð½Ð¸Ñ‡ÐµÑÐºÑƒÑŽ", "Ð¿Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ¸", "Ð¿Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð°Ñ‚Ð°ÐºÐ°", "Ð¿Ð°Ð½Ð¸ÐºÑƒÑŽ", "Ð¾Ð¿ÑÑ‚ÑŒ Ð¿Ð°Ð½Ð¸ÐºÑƒÑŽ", "Ð²Ð´Ñ€ÑƒÐ³ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑÑ",
    "Ð²Ð´Ñ€ÑƒÐ³ Ð²ÑÑ‘ Ð¸ÑÐ¿Ð¾Ñ€Ñ‡Ñƒ", "Ð²Ð´Ñ€ÑƒÐ³ Ð²ÑÑ‘ Ð¿Ð¾Ð¹Ð´ÐµÑ‚ Ð½Ðµ Ñ‚Ð°Ðº", "Ð²Ð´Ñ€ÑƒÐ³ Ð²ÑÑ‘ Ð¿Ð¾Ð¹Ð´Ñ‘Ñ‚ Ð½Ðµ Ñ‚Ð°Ðº", "Ñ Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½Ð°",
    "Ñ Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½", " Ñ Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½Ð° Ð² ÑÐµÐ±Ðµ", "Ñ Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½ Ð² ÑÐµÐ±Ðµ", "Ñ ÑÐ¾Ð¼Ð½ÐµÐ²Ð°ÑŽÑÑŒ", "ÑÐ¾Ð¼Ð½ÐµÐ²Ð°ÑŽÑÑŒ Ð² ÑÐµÐ±Ðµ",
    "Ð²Ð¾Ð»Ð½ÑƒÑŽÑÑŒ", "Ñ Ð²Ð¾Ð»Ð½ÑƒÑŽÑÑŒ", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð²Ð¾Ð»Ð½ÑƒÑŽÑÑŒ", "Ñ Ð²ÑÐµ Ð¸ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ð»Ð°", "Ñ Ð²ÑÐµ Ð¸ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ð»", "Ñ Ð²ÑÑ‘ Ð¸ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ð»Ð°",
    "Ñ Ð²ÑÑ‘ Ð¸ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ð»", "Ð±Ð¾ÑŽÑÑŒ Ð¾ÑˆÐ¸Ð±Ð¸Ñ‚ÑŒÑÑ", "Ð±Ð¾ÑŽÑÑŒ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÑƒ", "ÑÑ‚Ñ€Ð°Ñ…, Ñ‡Ñ‚Ð¾ Ð½Ðµ ÑÐ¿Ñ€Ð°Ð²Ð»ÑŽÑÑŒ",
    "Ð±Ð¾ÑŽÑÑŒ, Ñ‡Ñ‚Ð¾ Ð½Ðµ ÑÐ¿Ñ€Ð°Ð²Ð»ÑŽÑÑŒ", "ÑÑ‚Ñ€Ð°Ñ… Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ³Ð¾", "ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾ Ð·Ð° Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ", "ÑÐµÑ€Ð´Ñ†Ðµ ÐºÐ¾Ð»Ð¾Ñ‚Ð¸Ñ‚ÑÑ",
    "ÑÐµÑ€Ð´Ñ†Ðµ ÑÑ‚ÑƒÑ‡Ð¸Ñ‚ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ ÑÐ¸Ð»ÑŒÐ½Ð¾", "Ñ€ÑƒÐºÐ¸ Ñ‚Ñ€ÑÑÑƒÑ‚ÑÑ", "Ð¼Ð½Ðµ Ñ‚ÑÐ¶ÐµÐ»Ð¾ Ð´Ñ‹ÑˆÐ°Ñ‚ÑŒ Ð¾Ñ‚ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸",
    "ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ð²ÑÑ‘ Ð²Ð°Ð»Ð¸Ñ‚ÑÑ", "Ð¾Ñ‰ÑƒÑ‰ÐµÐ½Ð¸Ðµ, Ñ‡Ñ‚Ð¾ Ð²ÑÑ‘ Ñ€ÑƒÑ…Ð½ÐµÑ‚", "Ð¼Ð½Ðµ Ð½Ðµ Ð¿Ð¾ ÑÐµÐ±Ðµ", "Ð¾Ñ‡ÐµÐ½ÑŒ Ð½Ðµ Ð¿Ð¾ ÑÐµÐ±Ðµ",
    "Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ñ‹Ðµ Ð¼Ñ‹ÑÐ»Ð¸", "Ð½Ð°Ð²ÑÐ·Ñ‡Ð¸Ð²Ñ‹Ðµ Ð¼Ñ‹ÑÐ»Ð¸", "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ñ‚ÑŒ Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ", "Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾Ðµ Ð±ÐµÑÐ¿Ð¾ÐºÐ¾Ð¹ÑÑ‚Ð²Ð¾",
    "Ð²ÐµÑ‡Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ", "Ñ‚Ñ€ÐµÐ²Ð¾Ð¶ÑƒÑÑŒ Ð¿Ð¾ Ð»ÑŽÐ±Ð¾Ð¼Ñƒ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ", "ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ", "Ð±Ð¾ÑŽÑÑŒ Ð»ÑŽÐ´ÐµÐ¹",
    "ÑÑ‚Ñ€Ð°Ñ… Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ", "Ð¿Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð°Ñ‚Ð°ÐºÐ¸", "Ð¿Ñ€Ð¸ÑÑ‚ÑƒÐ¿Ñ‹ Ð¿Ð°Ð½Ð¸ÐºÐ¸", "Ð²Ð½ÐµÐ·Ð°Ð¿Ð½Ñ‹Ð¹ ÑÑ‚Ñ€Ð°Ñ…", "ÑÐµÑ€Ð´Ñ†Ðµ Ð²Ñ‹ÑÐºÐ°ÐºÐ¸Ð²Ð°ÐµÑ‚",
    "Ð¿ÑƒÐ»ÑŒÑ Ð·Ð°ÑˆÐºÐ°Ð»Ð¸Ð²Ð°ÐµÑ‚", "Ð½Ðµ Ñ…Ð²Ð°Ñ‚Ð°ÐµÑ‚ Ð²Ð¾Ð·Ð´ÑƒÑ…Ð°", "Ð·Ð°Ð´Ñ‹Ñ…Ð°ÑŽÑÑŒ", "Ð¾Ð´Ñ‹ÑˆÐºÐ° Ð¾Ñ‚ ÑÑ‚Ñ€Ð°Ñ…Ð°", "Ñ‚Ð¾ÑˆÐ½Ð¾Ñ‚Ð° Ð¾Ñ‚ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸",
    "Ð¼ÑƒÑ‚Ð¸Ñ‚ Ð¾Ñ‚ ÑÑ‚Ñ€Ð°Ñ…Ð°", "Ð³Ð¾Ð»Ð¾Ð²Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ", "Ð·ÐµÐ¼Ð»Ñ ÑƒÑ…Ð¾Ð´Ð¸Ñ‚ Ð¸Ð·-Ð¿Ð¾Ð´ Ð½Ð¾Ð³", "Ð²ÑÐµ Ð¿Ð»Ñ‹Ð²ÐµÑ‚",
]

# ÐžÑ‡ÐµÐ½ÑŒ Ñ‚ÑÐ¶Ñ‘Ð»Ñ‹Ðµ Ñ„Ñ€Ð°Ð·Ñ‹
SEVERE_SAD_PATTERNS = [
    "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð¶Ð¸Ñ‚ÑŒ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¶Ð¸Ñ‚ÑŒ", "Ð½ÐµÑ‚ ÑÐ¼Ñ‹ÑÐ»Ð° Ð¶Ð¸Ñ‚ÑŒ", "Ð½Ðµ Ð²Ð¸Ð¶Ñƒ ÑÐ¼Ñ‹ÑÐ»Ð° Ð¶Ð¸Ñ‚ÑŒ",
    "Ð½Ðµ Ð²Ð¸Ð¶Ñƒ ÑÐ¼Ñ‹ÑÐ»Ð°", "Ð½ÐµÑ‚ ÑÐ¼Ñ‹ÑÐ»Ð°", "Ð¶Ð¸Ð·Ð½ÑŒ Ð±ÐµÑÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½Ð°", "Ð¶Ð¸Ð·Ð½ÑŒ Ð½Ðµ Ð¸Ð¼ÐµÐµÑ‚ ÑÐ¼Ñ‹ÑÐ»Ð°",
    "Ð½ÐµÐ½Ð°Ð²Ð¸Ð¶Ñƒ ÑÐ²Ð¾ÑŽ Ð¶Ð¸Ð·Ð½ÑŒ", "Ð½ÐµÐ½Ð°Ð²Ð¸Ð¶Ñƒ Ð¶Ð¸Ð·Ð½ÑŒ", "Ñ…Ð¾Ñ‡Ñƒ ÑƒÐ¼ÐµÑ€ÐµÑ‚ÑŒ", "Ñ…Ð¾Ñ‡Ñƒ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¸ÑÑ‡ÐµÐ·Ð½ÑƒÑ‚ÑŒ",
    "Ð»ÑƒÑ‡ÑˆÐµ Ð±Ñ‹ Ð¼ÐµÐ½Ñ Ð½Ðµ Ð±Ñ‹Ð»Ð¾", "Ð»ÑƒÑ‡ÑˆÐµ Ð±Ñ‹ Ñ Ð½Ðµ Ñ€Ð¾Ð´Ð¸Ð»Ð°ÑÑŒ", "Ð»ÑƒÑ‡ÑˆÐµ Ð±Ñ‹ Ñ Ð½Ðµ Ñ€Ð¾Ð´Ð¸Ð»ÑÑ",
    "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ", "Ñ Ð½Ð¸Ñ‡Ñ‚Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾", "Ñ Ð½Ð¸ÐºÑ‡ÐµÐ¼Ð½Ð°Ñ",
    "Ñ Ð½Ð¸ÐºÑ‡ÐµÐ¼Ð½Ñ‹Ð¹", "Ñ Ð±ÐµÑÐ¿Ð¾Ð»ÐµÐ·Ð½Ð°Ñ", "Ñ Ð±ÐµÑÐ¿Ð¾Ð»ÐµÐ·Ð½Ñ‹Ð¹", "Ð½ÐµÐ½Ð°Ð²Ð¸Ð¶Ñƒ ÑÐµÐ±Ñ", "ÑÐµÐ±Ñ Ð½ÐµÐ½Ð°Ð²Ð¸Ð¶Ñƒ",
    "Ð½ÐµÐ½Ð°Ð²Ð¸Ð¶Ñƒ Ð²ÑÑ‘", "Ð½ÐµÐ½Ð°Ð²Ð¸Ð¶Ñƒ Ð²ÑÐµÑ…", "Ð½Ð¸ÐºÐ¾Ð¼Ñƒ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð°", "Ð½Ð¸ÐºÐ¾Ð¼Ñƒ Ð½Ðµ Ð½ÑƒÐ¶ÐµÐ½", " Ð½Ð¸ÐºÑ‚Ð¾ Ð¼ÐµÐ½Ñ Ð½Ðµ Ð»ÑŽÐ±Ð¸Ñ‚",
    "Ð¼ÐµÐ½Ñ Ð½Ð¸ÐºÑ‚Ð¾ Ð½Ðµ Ð»ÑŽÐ±Ð¸Ñ‚", "Ð½Ð¸ÐºÑ‚Ð¾ Ð¼ÐµÐ½Ñ Ð½Ðµ ÑÐ»Ñ‹ÑˆÐ¸Ñ‚ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ", "Ð¼Ð½Ðµ ÐºÐ°Ð¶ÐµÑ‚ÑÑ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµÐ¼ Ð±ÐµÐ· Ñ€Ð°Ð·Ð½Ð¸Ñ†Ñ‹",
    "Ð²ÑÐµÐ¼ Ð¿Ð»ÐµÐ²Ð°Ñ‚ÑŒ Ð½Ð° Ð¼ÐµÐ½Ñ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð¿Ñ€Ð¾ÑÑ‹Ð¿Ð°Ñ‚ÑŒÑÑ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð²ÑÑ‚Ð°Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ ÑƒÑ‚Ñ€Ð°Ð¼", "Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð²Ð¸Ð¶Ñƒ Ð²Ñ‹Ñ…Ð¾Ð´Ð°",
    "Ñ…Ð¾Ñ‡Ñƒ Ð¿Ð¾ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑŒ Ñ ÑÐ¾Ð±Ð¾Ð¹", "Ð´ÑƒÐ¼Ð°ÑŽ Ð¾ ÑÐ°Ð¼Ð¾ÑƒÐ±Ð¸Ð¹ÑÑ‚Ð²Ðµ", "ÑÑƒÐ¸Ñ†Ð¸Ð´Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¼Ñ‹ÑÐ»Ð¸", "Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÑŽ ÑÑƒÐ¸Ñ†Ð¸Ð´",
    "Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÑŽÑÑŒ Ðº ÑÑƒÐ¸Ñ†Ð¸Ð´Ñƒ", "Ñ€ÐµÑˆÐ¸Ð» Ð¿Ð¾ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑŒ Ñ ÑÐ¾Ð±Ð¾Ð¹", "Ñ€ÐµÑˆÐ¸Ð»Ð° Ð¿Ð¾ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑŒ Ñ ÑÐ¾Ð±Ð¾Ð¹", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ñ‚Ð°Ðº Ð¶Ð¸Ñ‚ÑŒ",
    "Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾ ÑƒÐ¼Ñ€Ñƒ", "ÑÐºÐ¾Ñ€Ð¾ ÑƒÐ¼Ñ€Ñƒ", "Ð¶Ð´Ñƒ ÑÐ¼ÐµÑ€Ñ‚Ð¸", "ÑÐ¼ÐµÑ€Ñ‚ÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð·Ð±Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼", "Ð»ÑƒÑ‡ÑˆÐµ ÑƒÐ¼ÐµÑ€ÐµÑ‚ÑŒ",
    "Ð¿Ñ€Ð¾Ñ‰Ðµ ÑƒÐ¼ÐµÑ€ÐµÑ‚ÑŒ", "Ð½Ðµ Ð²Ð¸Ð¶Ñƒ ÑÐ²ÐµÑ‚Ð° Ð² ÐºÐ¾Ð½Ñ†Ðµ Ñ‚Ð¾Ð½Ð½ÐµÐ»Ñ", "Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ð½Ð°Ð´ÐµÐ¶Ð´Ñƒ Ð½Ð° ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ",
    "Ð½Ð°Ð´ÐµÐ¶Ð´Ñ‹ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½ÐµÑ‚", "Ð²ÑÐµ ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð¾", "Ð²ÑÐµ Ð¿Ñ€Ð¾Ð¿Ð°Ð»Ð¾", "Ð¶Ð¸Ð·Ð½ÑŒ Ð·Ð°ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð°", " Ñ Ð¾Ð±ÑƒÐ·Ð° Ð´Ð»Ñ Ð²ÑÐµÑ…",
    "Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑˆÐ°ÑŽ", "Ð²ÑÐµÐ¼ Ð±ÑƒÐ´ÐµÑ‚ Ð»ÑƒÑ‡ÑˆÐµ Ð±ÐµÐ· Ð¼ÐµÐ½Ñ", "Ñ Ð½ÐµÐ´Ð¾ÑÑ‚Ð¾Ð¸Ð½ Ð¶Ð¸Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð°ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÑŽ Ð¶Ð¸Ð·Ð½Ð¸",
    "Ð½Ðµ Ð¸Ð¼ÐµÑŽ Ð¿Ñ€Ð°Ð²Ð° Ð¶Ð¸Ñ‚ÑŒ", "Ð¼Ð¸Ñ€ ÑÑ‚Ð°Ð½ÐµÑ‚ Ð»ÑƒÑ‡ÑˆÐµ Ð±ÐµÐ· Ð¼ÐµÐ½Ñ", " Ð½Ð¸ÐºÑ‚Ð¾ Ð½Ðµ Ð·Ð°Ð¼ÐµÑ‚Ð¸Ñ‚ Ð¼Ð¾ÐµÐ³Ð¾ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ñ",
    "Ñ ÑƒÐ¶Ðµ Ð¼ÐµÑ€Ñ‚Ð² Ð²Ð½ÑƒÑ‚Ñ€Ð¸", "Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð²ÑÐµ ÑƒÐ¼ÐµÑ€Ð»Ð¾", "Ð´ÑƒÑˆÐ° Ð¼ÐµÑ€Ñ‚Ð²Ð°", "Ð½Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ ÑÐµÐ±Ñ Ð¶Ð¸Ð²Ñ‹Ð¼",
    "ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽ Ð½Ð¾ Ð½Ðµ Ð¶Ð¸Ð²Ñƒ", "Ð¶Ð¸Ð·Ð½ÑŒ - ÑÑ‚Ð¾ Ð±Ð¾Ð»ÑŒ", "ÑÐ¿Ð»Ð¾ÑˆÐ½Ñ‹Ðµ ÑÑ‚Ñ€Ð°Ð´Ð°Ð½Ð¸Ñ", "Ð¾Ð´Ð½Ð° Ð±Ð¾Ð»ÑŒ", "Ð½Ðµ Ð²Ñ‹Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽ Ð±Ð¾Ð»ÑŒÑˆÐµ",
    "Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ñ‚ÐµÑ€Ð¿ÐµÑ‚ÑŒ", "Ð´Ð¾ÑˆÐµÐ» Ð´Ð¾ Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°", "Ð´Ð¾ÑˆÐ»Ð° Ð´Ð¾ Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°", "Ð½Ð° Ð³Ñ€Ð°Ð½Ð¸",
    "ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽÑÑŒ ÑÐ¾Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ ÑÑƒÐ¸Ñ†Ð¸Ð´", "Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÑŽ ÑƒÐ¹Ñ‚Ð¸ Ð¸Ð· Ð¶Ð¸Ð·Ð½Ð¸"
]

# ÐÐµÐ¹Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ñ‹Ðµ/Ð¿ÑƒÑÑ‚Ñ‹Ðµ Ñ„Ñ€Ð°Ð·Ñ‹ Â«Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÂ»
NO_JOY_PATTERNS = [
    "Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ‡Ñ‚Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ",
    "Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ‡Ñ‚Ð¾ ÐµÑ‰Ðµ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ ÐµÑ‰Ñ‘ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ‡Ñ‚Ð¾ ÐµÑ‰Ðµ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ ÐµÑ‰Ñ‘ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ",
    "Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ‡Ñ‚Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ",
    "Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ ÐºÐ°Ðº Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ Ð¾ Ñ‡ÐµÐ¼ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½ÐµÑ‡ÐµÐ³Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ",
    "Ð½ÐµÑ‡ÐµÐ³Ð¾ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ", "Ð½ÐµÑ‡ÐµÐ³Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ‚ÑŒ", "ÑÐ¾Ð²ÑÐµÐ¼ Ð½ÐµÑ‡ÐµÐ³Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½ÐµÑ‡ÐµÐ³Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½ÐµÑ‡ÐµÐ³Ð¾ Ñ€Ð°ÑÑÐºÐ°Ð·Ð°Ñ‚ÑŒ",
    "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¼Ð¾Ð³Ñƒ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ð»Ð¾ÑÑŒ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð½Ðµ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ð»Ð°",
    "Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð½Ðµ Ð±Ñ‹Ð»Ð¾", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ð³Ð¾ Ð½Ðµ Ð±Ñ‹Ð»Ð¾", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð½Ðµ Ð±Ñ‹Ð»Ð¾",
    "Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð±ÐµÐ· Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹", "Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð´ÐµÐ½ÑŒ", "ÑÐµÑ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð¼Ð½Ðµ Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾", "Ð½Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ Ð½Ð¸Ñ‡ÐµÐ³Ð¾",
    "Ð½Ð¸ÐºÐ°ÐºÐ¸Ñ… ÑÐ¼Ð¾Ñ†Ð¸Ð¹", "Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð´ÐµÐ½ÑŒ Ð¸ Ð´ÐµÐ½ÑŒ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ", "ÑÐ¼Ð¾Ñ†Ð¸Ð¹ Ð½ÐµÑ‚", "Ð½Ðµ ÑÐµÐ¹Ñ‡Ð°Ñ", "Ð¿Ð¾Ð·Ð¶Ðµ Ð½Ð°Ð¿Ð¸ÑˆÑƒ",
    "Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð½Ð°Ð¿Ð¸ÑˆÑƒ", "Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð·Ð¶Ðµ Ð²ÑÐ¿Ð¾Ð¼Ð½ÑŽ", "Ð½Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ Ð»Ð¸ ÑÑ‚Ð¾", "Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½Ð° Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ",
    "ÑÐ¾Ð¼Ð½ÐµÐ²Ð°ÑŽÑÑŒ Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ", "ÑÑ‚Ð¾ Ð²Ñ€Ð¾Ð´Ðµ Ð½Ðµ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ", "Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½Ð° ÑÑ‚Ð¾Ð¸Ñ‚ Ð»Ð¸ ÑÑ‚Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾",
    "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ñ€Ð°Ð´ÑƒÐµÑ‚", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð½Ðµ Ð±Ñ‹Ð»Ð¾", "ÑÐ²Ð½Ð¾ Ð½ÐµÑ‡ÐµÐ¼Ñƒ Ñ€Ð°Ð´Ð¾Ð²Ð°Ñ‚ÑŒÑÑ", "Ð½Ðµ Ð·Ð° Ñ‡Ñ‚Ð¾ Ð·Ð°Ñ†ÐµÐ¿Ð¸Ñ‚ÑŒÑÑ",
    "Ð½ÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½ÐµÑ‚ Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²ÐµÐ½Ð¸Ñ", "Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð´Ð¾ Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹", "Ð½Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹",
    "Ð½Ðµ Ð¼Ð¾Ð³Ñƒ ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ Ñ Ð¼Ñ‹ÑÐ»ÑÐ¼Ð¸", "Ñ‡ÐµÑÑ‚Ð½Ð¾ Ð³Ð¾Ð²Ð¾Ñ€Ñ Ð½ÐµÑ‡ÐµÐ³Ð¾", "Ð²Ñ€Ð¾Ð´Ðµ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾",
    "Ð¼Ð¾Ð¶ÐµÑ‚ Ð·Ð°Ð²Ñ‚Ñ€Ð° Ð²ÑÐ¿Ð¾Ð¼Ð½ÑŽ", "Ñ€Ð°Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð¿Ð¾ÐºÐ°", "Ð»ÐµÐ½ÑŒ Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ", "Ð»ÐµÐ½ÑŒ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ",
    "Ð¼Ð½Ðµ Ð»ÐµÐ½ÑŒ", "Ð¾Ðº", "Ñ‚Ð°ÐºÐ¾Ðµ ÑÐµÐ±Ðµ", "Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾", "Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾, Ð½ÐµÑ‡ÐµÐ³Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ",
    "Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð¾ÑÑŒ", "Ð½Ðµ Ð·Ð½Ð°ÑŽ", "Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ðµ Ð·Ð½Ð°ÑŽ", "Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð¾ Ð½Ðµ Ð·Ð½Ð°ÑŽ"
]

# ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ â€” Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ð½Ð°Ð±Ð¾Ñ€ + Ð¾Ð¿ÐµÑ‡Ð°Ñ‚ÐºÐ¸ + Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ°
GREETING_PATTERNS = [
    "Ð¿Ñ€Ð¸Ð²ÐµÑ‚", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚!", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚Ð¸Ðº", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚Ð¸ÐºÐ¸", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚)", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚))", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽ",
    "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ)", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€", "Ð´Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾",
    "Ð´Ð¾Ð±Ñ€Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸", "Ñ…Ð°Ð¹", "Ñ…Ð°Ð¹!", "Ñ…Ð°Ð¹)", "Ñ…ÑÐ¹", "Ñ…ÐµÐ¹", "Ñ…ÐµÐ»Ð»Ð¾", "Ñ…ÐµÐ»Ð»Ð¾Ñƒ", "hello", "hi", "hey",
    "Ð¹Ð¾Ñƒ", " Ð¹Ð¾", "Ð¹Ð¾Ñƒ)", "Ð¹Ð¾Ñƒ!", "ÐºÑƒ", "ÐºÑƒ!", "ÐºÑƒ)", "Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð¾", "Ð·Ð´Ð¾Ñ€Ð¾Ð²", "Ð·Ð´Ð°Ñ€Ð¾Ð²Ð°", "Ð·Ð´Ð°Ñ€Ð¾Ð²",
    "Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð°", "ÑÐ°Ð»ÑŽÑ‚", "ÑˆÐ°Ð»Ð¾Ð¼", "Ð±Ð¾Ð½Ð¶ÑƒÑ€", "Ñ…Ð¾Ð»Ð°", "Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð´Ð½Ñ", "Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð²ÐµÑ‡ÐµÑ€Ð°", "Ñ€Ð°Ð´ Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ",
    "Ñ€Ð°Ð´Ð° Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ", "ÑÐ½Ð¾Ð²Ð° Ñ", "ÑÑ‚Ð¾ Ñ ÑÐ½Ð¾Ð²Ð°", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚-Ð¿Ñ€Ð¸Ð²ÐµÑ‚", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹-Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹",
    "Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽ Ñ‚ÐµÐ±Ñ", "Ñ€Ð°Ð´ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ", "Ñ€Ð°Ð´Ð° Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ", "Ð´Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ",
    "Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸ÐµÐ¼", "ÐºÐ°Ðº Ð´ÐµÐ»Ð°", "ÐºÐ°Ðº Ñ‚Ñ‹", "ÐºÐ°Ðº Ð¶Ð¸Ð·Ð½ÑŒ", "Ñ‡Ñ‚Ð¾ Ð½Ð¾Ð²Ð¾Ð³Ð¾", "ÐºÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ",
    "Ð¿Ñ€Ð¸Ð²ÐµÑ‚Ð¸ÐºÐ¸-Ð¿Ñ€Ð¸Ð²ÐµÑ‚Ð¸ÐºÐ¸", "Ð·Ð´Ñ€Ð°ÑÑŒÑ‚Ðµ", "Ð·Ð´Ñ€Ð°ÑÑ‚Ðµ", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽ Ð²Ð°Ñ", "Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÑÑƒÑ‚Ð¾Ðº",
    "Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ", "Ð¼Ð¾Ðµ Ð¿Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ", "Ð·Ð´Ñ€Ð°Ð²Ð¸Ñ Ð¶ÐµÐ»Ð°ÑŽ",
    # Ð¾Ð¿ÐµÑ‡Ð°Ñ‚ÐºÐ¸ Ð¸ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ°
    "Ð¿Ñ€Ð²Ð¸ÐµÑ‚", "Ð¿Ñ€ÐµÐ²ÐµÑ‚", "Ð¿Ñ€Ð¸Ð²Ñ‚Ðµ", "Ð¿Ñ€ÑŽÐ²ÐµÑ‚", "Ð¿Ñ€Ð¸Ð²", "ghbdtn", "ghbdtn!", "ghbdtn)", "privet", "privet!", "privetik",
    "privetik!", "privet)", "privetik)"
]

# Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ñ‹
CANCEL_PATTERNS = [
    "Ð¾Ñ‚Ð¼ÐµÐ½Ð°", "Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ", "Ñ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°Ð»Ð°", "Ñ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°Ð»", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð¿Ð¸ÑÑŒÐ¼Ð¾",
    "Ð½Ðµ Ñ…Ð¾Ñ‡Ñƒ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°Ñ‚ÑŒ", "Ð½Ðµ Ð±ÑƒÐ´Ñƒ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ", "/cancel"
]

# --------------------------
# Ð¢Ð•ÐšÐ¡Ð¢ÐžÐ’Ð«Ð• ÐžÐ¢Ð’Ð•Ð¢Ð«
# --------------------------

# ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ (greeting)
GREETING_RESPONSES = [
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ðµ ÑÑ‡Ð°ÑÑ‚ÑŒÐµ ÑÐ¾ÑÑ‚Ð¾Ð¸Ñ‚ Ð¸Ð· Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ñ… Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð¸Ð¹. ÐšÐ°ÐºÐ¾Ðµ Ð¸Ð· Ð½Ð¸Ñ… Ð·Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ð»Ð¾ÑÑŒ Ñ‚ÐµÐ±Ðµ ÑÐµÐ³Ð¾Ð´Ð½Ñ?",
    "ÐžÐ¾Ð¾Ð¾Ð¾)) Ð Ð°Ð´Ð° Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð·Ð´ÐµÑÑŒ. Ð”Ð°Ð²Ð°Ð¹ Ð¾Ñ‚Ð¼ÐµÑ‚Ð¸Ð¼ Ñ‡Ñ‚Ð¾-Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾Ðµ Ð¸Ð· ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð½Ñ?",
    "Ð¥ÐµÐ¹! ÐŸÐµÑ€Ð²Ð°Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ â€” Ñ‚Ñ‹. Ð’Ñ‚Ð¾Ñ€Ð°Ñ â€” Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¼Ð½Ðµ Ñ€Ð°ÑÑÐºÐ°Ð¶ÐµÑˆÑŒ.",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð”Ð°Ð²Ð°Ð¹ Ñ‡ÐµÑÑ‚Ð½Ð¾: Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð¾ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¸ Ð½Ðµ Ð±ÐµÑÐ¸Ð»Ð¾? Ð¢Ð°ÐºÐ¸Ðµ Ð²ÐµÑ‰Ð¸ Ð½Ð°Ð´Ð¾ ÑƒÐ²Ð°Ð¶Ð°Ñ‚ÑŒ.",
    "ÐžÐ¾Ð¾, Ñ‚Ñ‹ Ð·Ð´ÐµÑÑŒ! ÐŸÐ¾Ð´ÐºÐ¸Ð½ÑŒ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ, Ð¿Ð¾ÑÐ»Ðµ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ñ‚Ñ‹ Ð½Ðµ Ð·Ð°ÐºÐ°Ñ‚Ð¸Ð»Ð° Ð³Ð»Ð°Ð·Ð°. Ð­Ñ‚Ð¾ Ñ€ÐµÐ´ÐºÐ¾ÑÑ‚ÑŒ, ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€!",
    "ÐžÐ¾Ð¾))) Ð¡Ð°Ð¼Ð°Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð°Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ ÑÐ»ÑƒÑ‡Ð¸Ð»Ð°ÑÑŒ â€” Ñ‚Ñ‹ Ð¿Ð¾ÑÐ²Ð¸Ð»Ð°ÑÑŒ! Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð´Ð°Ð²Ð°Ð¹ Ð²Ñ‚Ð¾Ñ€ÑƒÑŽ, Ð¿Ð¾ÐºÐ° Ð¿Ð¾Ð±ÐµÐ´Ð° Ð½Ðµ Ð¸ÑÐ¿Ð°Ñ€Ð¸Ð»Ð°ÑÑŒ.",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐŸÑ€ÐµÐ´Ð»Ð°Ð³Ð°ÑŽ ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð½ÑƒÑ‚ÑŒ Ñ Ñ‡ÐµÐ³Ð¾-Ñ‚Ð¾ Ð¾Ñ‡ÐµÐ²Ð¸Ð´Ð½Ð¾Ð³Ð¾: Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð¾ Ñ‚Ð²Ð¾Ð¸Ð¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ð¼ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼Ð¾Ð¼? Ð•Ð´Ð°, Ð¼ÑƒÐ·Ñ‹ÐºÐ° Ð¸Ð»Ð¸ ÐºÐ¾Ñ„Ðµ?",
    "Ð¯ Ñ‚ÑƒÑ‚! ÐšÐ¸Ð´Ð°Ð¹ ÑÐ²Ð¾ÑŽ Ð¿Ð¾Ð±ÐµÐ´Ñƒ Ð´Ð½Ñ. Ð”Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ð»Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½ÑƒÑŽ Ð»ÐµÐ½ÑŒ â€” Ð¼Ñ‹ Ñ‚Ð°ÐºÐ¾Ðµ ÑƒÐ²Ð°Ð¶Ð°ÐµÐ¼!",
    "Ð Ð°Ð´, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð·Ð°Ð³Ð»ÑÐ½ÑƒÐ»Ð°! Ð”Ð°Ð²Ð°Ð¹, Ð²ÑÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð¹: Ñ‡Ñ‚Ð¾ Ð² ÑÑ‚Ð¾Ñ‚ Ð´ÐµÐ½ÑŒ Ð±Ñ‹Ð»Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾? Ð¥Ð¾Ñ‚ÑŒ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾? Ð¥Ð¾Ñ‚ÑŒ ÐºÑ‚Ð¾-Ñ‚Ð¾?",
    "Ð¥ÑÐ¹! Ð¯ Ñ‚ÑƒÑ‚, Ñ‚Ñ‹ Ñ‚ÑƒÑ‚ â€” ÑƒÐ¶Ðµ Ð½ÐµÐ¿Ð»Ð¾Ñ…Ð¾, ÑÐ¾Ð³Ð»Ð°ÑÐ¸ÑÑŒ. Ð Ñ‡Ñ‚Ð¾ ÐµÑ‰Ñ‘ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾?",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚, Ñ†Ñ‹Ð¿Ð°! ÐœÐ¸Ñ€ Ð²ÑÑ‘ ÐµÑ‰Ñ‘ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ, Ð° Ñ‚Ñ‹ Ð²ÑÑ‘ ÐµÑ‰Ñ‘ ÐºÑ€Ð°ÑÐ°Ð²Ð¸Ñ†Ð°. Ð§Ñ‚Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾?",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ñ‚ÑƒÑ‚ ÑƒÐ¶Ðµ Ð¿Ð¾Ð´ÑƒÐ¼Ð°Ð»Ð°, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð° Ð½Ð°ÑÑ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ð°, Ñ‡Ñ‚Ð¾ Ð·Ð°Ð±Ñ‹Ð»Ð° Ð¿Ñ€Ð¾ Ð²ÑÑ‘ Ð½Ð° ÑÐ²ÐµÑ‚Ðµ. Ð¢Ð°ÐºÐ¾Ðµ Ð±Ñ‹Ð²Ð°ÐµÑ‚!",
    "ÐžÐ¾Ð¾, Ñ€Ð°Ð´Ð°, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð½Ðµ ÑÑ‚Ð°Ð»Ð° NPC Ð² ÑÐ²Ð¾ÐµÐ¹ Ð¶Ðµ Ð¶Ð¸Ð·Ð½Ð¸! Ð”Ð°Ð²Ð°Ð¹ Ð·Ð°Ð¿Ð¸ÑˆÐµÐ¼, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð¾ Ð¿Ð¾-Ð½Ð°ÑÑ‚Ð¾ÑÑ‰ÐµÐ¼Ñƒ ÐºÐ»Ð°ÑÑÐ½Ñ‹Ð¼!",
    "Ð­Ð¹, Ð½Ñƒ Ñ‡Ñ‚Ð¾, Ð¾Ð¿ÑÑ‚ÑŒ Ñ€ÐµÑˆÐ¸Ð»Ð° Ð±Ñ‹Ñ‚ÑŒ ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ð¾Ð¹? Ð›Ð°Ð´Ð½Ð¾, Ñ Ñ Ñ‚Ð¾Ð±Ð¾Ð¹.",
    "Ð¥ÐµÐ¹! ÐšÐ°Ð¶ÐµÑ‚ÑÑ, Ñ‚Ð²Ð¾Ð¹ Ð´ÐµÐ½ÑŒ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ñ…Ð¾Ñ€Ð¾Ñˆ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¾Ð¹Ñ‚Ð¸ Ð¼Ð¸Ð¼Ð¾.",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð”Ð°Ð²Ð°Ð¹ Ð¾Ñ‚Ð¼ÐµÑ‚Ð¸Ð¼ Ð²ÑÐµ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð½Ñ‹Ðµ Ð¼ÐµÐ»Ð¾Ñ‡Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð´ÐµÐ»Ð°ÑŽÑ‚ Ð´ÐµÐ½ÑŒ Ð»ÑƒÑ‡ÑˆÐµ.",
    "Ð­Ð¹! ÐšÐ°Ð¶ÐµÑ‚ÑÑ, Ð´ÐµÐ½ÑŒ Ð¿Ð¾Ð»Ð¾Ð½ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ñ… Ð¿Ð¾Ð±ÐµÐ´. Ð—Ð°Ð¿Ð¸ÑˆÐµÐ¼ Ð¸Ñ…?",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð Ð°Ð´Ð¾ÑÑ‚ÑŒ â€” ÑˆÑ‚ÑƒÐºÐ° Ð·Ð°Ñ€Ð°Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ, Ñ‚Ð°Ðº Ñ‡Ñ‚Ð¾ Ð´ÐµÐ»Ð¸ÑÑŒ!",
    "Ð¥ÑÐ¹! ÐšÐ°Ð¶Ð´Ð¾Ðµ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ ÑÑ‡Ð°ÑÑ‚ÑŒÐµ Ð·Ð°ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÐµÑ‚ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ. Ð”Ð°Ð²Ð°Ð¹ Ð·Ð°Ð¿Ð¸ÑˆÐµÐ¼ Ñ‚Ð²Ð¾Ñ‘!",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐÑƒ Ñ‡Ñ‚Ð¾, Ð¾Ð¿ÑÑ‚ÑŒ Ñ€ÐµÑˆÐ¸Ð»Ð° Ð±Ñ‹Ñ‚ÑŒ ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ð¾Ð¹? Ð¡Ð¼ÐµÐ»Ð¾. ÐœÐ½Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ.",
    "Ð­Ð¹! Ð”ÐµÐ½ÑŒ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ñ…Ð¾Ñ€Ð¾Ñˆ. Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ Ñ„Ð¸ÐºÑÐ¸Ñ€ÑƒÐµÐ¼ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸.",
    "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ñ‚ÑƒÑ‚, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ: Ð´Ð°Ð¶Ðµ Ð¼ÐµÐ»ÐºÐ°Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ â€” ÑƒÐ¶Ðµ Ð¿Ð¾Ð±ÐµÐ´Ð°.",
    "Ð­Ð¹, Ð½Ñƒ Ñ‡Ñ‚Ð¾, Ð¾Ð¿ÑÑ‚ÑŒ Ñ€ÐµÑˆÐ¸Ð»Ð° Ñ€Ð°Ð´Ð¾Ð²Ð°Ñ‚ÑŒÑÑ? Ð¡Ñ€Ð°Ð·Ñƒ Ð²Ð¸Ð´Ð½Ð¾: Ð´ÐµÐ½ÑŒ Ñ‚Ð²Ð¾Ð¹."
]

JOY_EMOJIS = ["âœ¨", "ðŸ˜Š", "ðŸŒˆ", "ðŸ’›", "ðŸŒŸ"]
REMINDER_EMOJIS = ["âœ¨", "ðŸ“Œ", "ðŸ˜Š"]
STATS_EMOJIS = ["ðŸ“Š", "ðŸ“ˆ", "â­"]
CALM_EMOJIS = ["ðŸ™‚", "ðŸŒ¿", "âœ¨", "â˜•", "ðŸ•Š", "ðŸƒ"]

# ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° Ð³Ñ€ÑƒÑÑ‚ÑŒ
SAD_RESPONSES = [
    "Ð—Ð²ÑƒÑ‡Ð¸Ñ‚ ÐºÐ°Ðº Ð¾Ñ‡ÐµÐ½ÑŒ Ð½ÐµÐ¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð´ÐµÐ½ÑŒ. ÐÐµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¸ÑÐºÐ°Ñ‚ÑŒ Ð² Ð½Ñ‘Ð¼ Ð¿Ð»ÑŽÑÑ‹.",
    "Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð¼Ñ‹ÑÐ»ÑŒ Ð²Ñ€Ð¾Ð´Ðµ Â«ÐºÐ¾Ñ„Ðµ Ð¿Ð¾Ð¼Ð¾Ð³Â» â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸. Ð¯ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑŽ.",
    "Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð·Ð¶Ðµ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑÑ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚, ÐºÐ¾Ð³Ð´Ð° Ð½Ð° Ð´ÑƒÑˆÐµ ÑÑ‚Ð°Ð»Ð¾ ÑÐ²ÐµÑ‚Ð»ÐµÐµ â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÐºÐ¸Ð½ÑŒ ÐµÐ³Ð¾ ÑÑŽÐ´Ð°. Ð¯ Ð·Ð°Ð¿Ð¾Ð¼Ð½ÑŽ.",
    "ÐŸÐ¾Ð½Ð¸Ð¼Ð°ÑŽ, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð¼Ð¾Ð³Ð»Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑÐ¶ÐµÐ»Ð¾. Ð¢Ñ‹ Ð²ÑÐµÐ³Ð´Ð° ÑƒÐ¼Ð½Ð¸Ñ†Ð°, Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ ÑÐ°Ð¼Ð¾Ð¹ Ñ‚Ð°Ðº Ð½Ðµ ÐºÐ°Ð¶ÐµÑ‚ÑÑ.",
    "ÐŸÐ¾Ð½Ð¸Ð¼Ð°ÑŽ, Ð´ÐµÐ½ÑŒ Ð¼Ð¾Ð³ Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑÐ¶ÐºÐ¾Ð²Ð°Ñ‚Ñ‹Ð¼ â€” Ð¶Ð¸Ð·Ð½ÑŒ Ð¸Ð½Ð¾Ð³Ð´Ð° Ð»ÑŽÐ±Ð¸Ñ‚ Ð´Ñ€Ð°Ð¼Ñƒ. ÐÐ¾ Ñ‚Ñ‹ Ð²ÑÑ‘ Ñ€Ð°Ð²Ð½Ð¾ ÑƒÐ¼Ð½Ð¸Ñ†Ð°, Ð´Ð°Ð¶Ðµ ÐºÐ¾Ð³Ð´Ð° Ñ…Ð¾Ð´Ð¸ÑˆÑŒ Ð² ÑÐ½ÐµÑ€Ð³Ð¾ÑÐ±ÐµÑ€ÐµÐ³Ð°ÑŽÑ‰ÐµÐ¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ.",
    "ÐœÐ¾Ð¶ÐµÑˆÑŒ Ð´Ð°Ð¶Ðµ Ð¾Ð´Ð½Ð¸Ð¼ ÑÐ»Ð¾Ð²Ð¾Ð¼ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚, ÐºÐ¾Ð³Ð´Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑÑ‚Ð°Ð»Ð¾ Ñ‡ÑƒÑ‚ÑŒ ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½ÐµÐµ â€” Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾Ð½ Ð´Ð»Ð¸Ð»ÑÑ ÑÐµÐºÑƒÐ½Ð´Ñƒ. Ð¯ Ð·Ð°Ð¿Ð¾Ð¼Ð½ÑŽ.",
    "ÐŸÐ¾Ð½Ð¸Ð¼Ð°ÑŽ, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð¾ Ñ‚ÑÐ¶ÐµÐ»Ð¾Ð²Ð°Ñ‚Ð¾. ÐÐµ Ð·Ð°ÑÑ‚Ð°Ð²Ð»ÑÐ¹ ÑÐµÐ±Ñ Ð¸ÑÐºÐ°Ñ‚ÑŒ Ð¿Ð»ÑŽÑÑ‹.",
    "Ð•ÑÐ»Ð¸ Ð²ÐµÑ‡ÐµÑ€Ð¾Ð¼ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑÑ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚ÑŒ Ð½Ð° Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ Ð¾Ñ‚Ð¿ÑƒÑÑ‚Ð¸Ð»Ð¾ â€” Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Â«Ð³Ð¾Ñ€ÑÑ‡Ð¸Ð¹ Ð´ÑƒÑˆÂ» Ð¸Ð»Ð¸ Â«Ñ‚Ð¸ÑˆÐ¸Ð½Ð°Â» â€” Ð¿Ñ€Ð¸ÑˆÐ»Ð¸, Ñ Ð·Ð°Ð¿Ð¸ÑˆÑƒ.",
    "Ð’Ð¸Ð¶Ñƒ, Ñ‡Ñ‚Ð¾ Ð´ÐµÐ½ÑŒ Ð±Ñ‹Ð» Ð½Ðµ ÑÐ°Ñ…Ð°Ñ€. Ð˜ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð´ÑƒÐ¼Ñ‹Ð²Ð°Ñ‚ÑŒ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾.",
    "Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð¿Ð¾Ð¹Ð¼Ð°ÐµÑˆÑŒ ÑÐµÐ±Ñ Ð½Ð° Ñ‡Ñ‘Ð¼-Ñ‚Ð¾ Ð²Ñ€Ð¾Ð´Ðµ Â«ÐºÐ¾Ñ„Ðµ Ð¿Ð¾Ð¼Ð¾Ð³Â» Ð¸Ð»Ð¸ Â«Ð±ÐµÑÑ‚Ð¸Ñ Ð¿Ñ€Ð¸ÑÐ»Ð°Ð»Ð° ÑÐ¼ÐµÑˆÐ½Ð¾Ð¹ Ð¼ÐµÐ¼Â» â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ð¼Ð½Ðµ. Ð¯ Ð·Ð°Ð¿Ð¾Ð¼Ð½ÑŽ.",
    "Ð§ÑƒÐ²ÑÑ‚Ð²ÑƒÑŽ, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð¾ Ð½ÐµÐ»ÐµÐ³ÐºÐ¾. ÐÐµ ÑÑ‚Ð¾Ð¸Ñ‚ Ñ„Ð¾Ñ€ÑÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐµ.",
    "Ð•ÑÐ»Ð¸ Ð½ÐµÐ²Ð·Ð½Ð°Ñ‡Ð°Ð¹ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑÑ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚, ÐºÐ¾Ð³Ð´Ð° ÑÑ‚Ð°Ð»Ð¾ Ñ‡ÑƒÑ‚ÑŒ Ð»ÐµÐ³Ñ‡Ðµ â€” Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ð² Ð´Ð²ÑƒÑ… ÑÐ»Ð¾Ð²Ð°Ñ…. Ð¯ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑŽ ÐºÐ°Ðº ÐµÑÑ‚ÑŒ.",
]

# ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ
TIRED_RESPONSES = [
    "Ð›Ð¾Ð²Ð»ÑŽ Ñ‚Ð²Ð¾Ñ‘ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ Ð±ÐµÐ· ÑÐ»Ð¾Ð². Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð¿Ð¾Ð·Ð¶Ðµ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑÑ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ðµ Ð²Ñ€Ð¾Ð´Ðµ Â«Ð´Ð¾Ð¶Ð´ÑŒ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð»ÑÑ ÐºÐ°Ðº Ð¿Ð¾ Ð·Ð°ÐºÐ°Ð·ÑƒÂ» â€” Ñ Ð½Ð° Ð¿Ð¾Ð´Ñ…Ð²Ð°Ñ‚Ðµ!",
    "Ð’ÑÑ‘ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾, Ñ Ñ€ÑÐ´Ð¾Ð¼. ÐÐµ Ñ‚Ñ‹ ÑÐ»Ð°Ð±Ð°Ñ â€” Ð´ÐµÐ½ÑŒ Ð±Ñ‹Ð» ÑÐ¸Ð»ÑŒÐ½Ñ‹Ð¼. Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð¿Ð¾Ð¹Ð¼Ñ‘ÑˆÑŒ, Ñ‡Ñ‚Ð¾ ÑƒÐ¶Ð¸Ð½ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð½ÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð¾ Ð±Ñ‹Ð» Ð²ÐºÑƒÑÐ½Ñ‹Ð¼ â€” ÑÑ‚Ð¾ Ñ‚Ð¾Ð¶Ðµ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ. ÐŸÐ¸ÑˆÐ¸ â€” Ñ Ð·Ð°Ð¿Ð¾Ð¼Ð½ÑŽ!",
    "Ð¢Ñ‹ Ð½Ðµ ÑƒÑÑ‚Ð°Ð²ÑˆÐ°Ñ â€” Ñ‚Ñ‹ Ð³ÐµÑ€Ð¾Ð¹ Ð±ÐµÐ· Ð¿Ð°Ñ„Ð¾ÑÐ°. ÐœÐ¾Ð¶Ð½Ð¾ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ. Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð¿Ð¾Ð¹Ð¼Ð°ÐµÑˆÑŒ ÑÐµÐ±Ñ Ð½Ð° Ð¼Ñ‹ÑÐ»Ð¸ Â«Ð£ Ð¼ÐµÐ½Ñ Ð¶Ðµ Ð¾ÑÑ‚Ð°Ð»Ð¸ÑÑŒ ÐºÐ¾Ð½Ñ„ÐµÑ‚Ñ‹!Â» â€” ÑÑ‚Ð¾ ÑƒÐ¶Ðµ Ð¿Ð¾Ð²Ð¾Ð´ Ð´Ð»Ñ Ð½Ð°ÑˆÐµÐ³Ð¾ Ñ‡Ð°Ñ‚Ð°!",
    "ÐžÐºÐµÐ¹, Ð²Ð¸Ð¶Ñƒ, Ñ‡Ñ‚Ð¾ ÑÐ»Ð¾Ð² Ð½ÐµÑ‚. ÐœÐ¾Ð»Ñ‡Ñƒ ÐºÐ°Ðº Ñ€Ñ‹Ð±Ð°. Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸ÑˆÑŒ, ÐºÐ°Ðº Ñ‚Ð²Ð¾Ð¹ ÐºÐ¾Ñ‚Ð¸Ðº ÑÐ¿Ð°Ð» Ñ€ÑÐ´Ð¾Ð¼ â€” Ñ Ð½Ð° Ð½Ð¸Ð·ÐºÐ¾Ð¼ ÑÑ‚Ð°Ñ€Ñ‚Ðµ! ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑŽ Ð² Ð½Ð°ÑˆÑƒ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹.",
    "Ð¢Ñ‹ Ð½Ðµ ÑÐ´Ð°Ñ‘ÑˆÑŒÑÑ â€” Ñ‚Ñ‹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ ÑƒÑÑ‚Ð°Ð»Ð°. Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑÑ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚, ÐºÐ¾Ð³Ð´Ð° ÑÑ‚Ð°Ð»Ð¾ Ñ…Ð¾Ñ‚ÑŒ Ñ‡ÑƒÑ‚ÑŒ-Ñ‡ÑƒÑ‚ÑŒ ÑÐ²ÐµÑ‚Ð»ÐµÐµ â€” ÑÑ‚Ð¾ ÑƒÐ¶Ðµ Ð¿Ñ€Ð¾Ñ€Ñ‹Ð²! Ð¡Ð¾Ð¾Ð±Ñ‰Ð¸ â€” Ð·Ð°Ð¿Ð¸ÑˆÐµÐ¼ Ð² Ð½Ð°Ñˆ Ð°Ñ€Ñ…Ð¸Ð² Ð¿Ð¾Ð±ÐµÐ´.",
]

# ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ñƒ
ANXIETY_RESPONSES = [
    "ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, Ñ‚Ð²Ð¾Ñ Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ñ€ÐµÑˆÐ¸Ð»Ð° Ð¿Ñ€Ð¾Ð¹Ñ‚Ð¸ÑÑŒ Ð¿Ð¾ Ð²ÑÐµÐ¼ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸ÑÐ¼ ÑÑ€Ð°Ð·Ñƒ. ÐÐ¾ ÑÑ‚Ð¾ Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑƒÐ¼ÐµÐµÑˆÑŒ Ð·Ð°Ñ€Ð°Ð½ÐµÐµ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ Ð² Ð³Ð¾Ð»Ð¾Ð²Ñƒ Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÐ´ÐµÐ»ÑŽ.",
    "Ð¢Ð°Ðº, ÑÐ»Ñ‹ÑˆÑƒ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð½Ñ‹Ð¹ Ð·Ð²ÑƒÐº: Â«Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð»ÑÑ Ð½Ð¾Ð²Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸Â». ÐÐ¾ ÐµÑÐ»Ð¸ Ð¿Ñ€Ð¸ÑÐ»ÑƒÑˆÐ°Ñ‚ÑŒÑÑ â€” ÑÑ‚Ð¾ Ð²ÑÐµÐ³Ð¾ Ð»Ð¸ÑˆÑŒ Ñ‚Ð²Ð¾Ñ Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ñ‡ÑƒÑ‚ÑŒ Ð¿ÐµÑ€ÐµÐ³Ð½ÑƒÐ»Ð° Ð¿Ð°Ð»ÐºÑƒ.",
    "Ð¢Ð°Ðº-Ñ‚Ð°Ðº, Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð° Ð½Ð° Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ðµ! ÐÐ¾ ÐµÑÐ»Ð¸ Ð¿Ñ€Ð¸ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒÑÑ â€” ÑÑ‚Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð¼Ð°ÑÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð·Ð°Ð±Ð¾Ñ‚Ð° Ð¾ Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ Ñ‚ÐµÐ±Ðµ Ð´Ð¾Ñ€Ð¾Ð³Ð¾.",
    "Ð¡Ð»ÑƒÑˆÐ°Ð¹, Ð° Ð²ÐµÐ´ÑŒ Ñ‚Ð²Ð¾Ñ Ñ‚Ñ€ÐµÐ²Ð¾Ð¶ÐºÐ° â€” ÑÑ‚Ð¾ ÐºÐ°Ðº ÑÑƒÐ¿ÐµÑ€ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ â€” Ð³Ð¸Ð¿ÐµÑ€Ð·Ð°Ð±Ð¾Ñ‚Ð° Ð¾ Ð²Ð°Ð¶Ð½Ð¾Ð¼. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾ÐºÐ° Ð¿Ñ€Ð¾ÐºÐ°Ñ‡Ð°Ð½Ð° Ð½Ðµ Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð°.",
    "Ð­Ñ…, ÑÐ¼Ð¾Ñ‚Ñ€ÑŽ, Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ ÐºÑ€Ð¸Ñ‚Ð¸Ðº Ð¾Ð¿ÑÑ‚ÑŒ ÑƒÑÑ‚Ñ€Ð¾Ð¸Ð» Ð´Ñ€Ð°Ð¼Ñƒ, ÐºÐ°Ðº Ð² ÑÐµÑ€Ð¸Ð°Ð»Ðµ. Ð Ð²ÐµÐ´ÑŒ ÑÑ‚Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ‚Ð²Ð¾Ñ ÑÑƒÐ¿ÐµÑ€ÑÐ¸Ð»Ð° â€” Ð·Ð°Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð¼ÐµÐ»Ð¾Ñ‡ÑŒ!",
]

# ÐžÑ‚Ð²ÐµÑ‚Ñ‹, ÐºÐ¾Ð³Ð´Ð° Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¿Ð¸ÑˆÐµÑ‚ Â«Ð½Ðµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÂ»
NO_JOY_RESPONSES = [
    "ÐÐ¸Ñ‡ÐµÐ³Ð¾, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð½ÐµÑ‡ÐµÐ³Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ. Ð‘Ñ‹Ð²Ð°ÐµÑ‚. ÐÐµ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°Ð¹. Ð•ÑÐ»Ð¸ Ð²ÐµÑ‡ÐµÑ€Ð¾Ð¼ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸ÑˆÑŒ, Ñ‡Ñ‚Ð¾ Ð¸Ð³Ñ€Ð°Ð»Ð° Ð»ÑŽÐ±Ð¸Ð¼Ð°Ñ Ð¿ÐµÑÐ½Ñ Ð¸Ð»Ð¸ Ð±Ñ‹Ð»Ð¸ ÐºÐ»Ð°ÑÑÐ½Ñ‹Ðµ ÑÐºÐ¸Ð´ÐºÐ¸ Ð½Ð° WB â€” Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ð¼Ð½Ðµ. Ð¯ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑŽ.",
    "ÐŸÑƒÑÑ‚Ð¾Ñ‚Ð° Ð² Ð´Ð½ÑÑ… â€” ÑÑ‚Ð¾ ÐºÐ°Ðº Ð¿Ð°ÑƒÐ·Ð° Ð² Ð¼ÑƒÐ·Ñ‹ÐºÐµ. ÐÐµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÐµÑ‘ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ.",
    "ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹! ÐÐ¾ ÐµÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸ÑˆÑŒ Ð³Ð¾Ð»ÑƒÐ±Ñ ÑÐ¾ ÑÐ¼ÐµÑˆÐ½Ð¾Ð¹ Ð¿Ð¾Ñ…Ð¾Ð´ÐºÐ¾Ð¹ Ð¸Ð»Ð¸ Ð½ÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿Ð»Ð¸Ð¼ÐµÐ½Ñ‚ â€” ÑÑ‚Ð¾ Ð¿Ð¾Ð²Ð¾Ð´ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¼Ð½Ðµ!",
    "ÐÐ¸Ñ‡ÐµÐ³Ð¾, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½ÑÑˆÐ½Ð¸Ð¹ Ð´ÐµÐ½ÑŒ ÐºÐ°Ðº Ñ‡Ð¸ÑÑ‚Ñ‹Ð¹ Ð»Ð¸ÑÑ‚. Ð‘Ñ‹Ð²Ð°ÐµÑ‚ Ð¸ Ñ‚Ð°ÐºÐ¾Ðµ. Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð²ÐµÑ‡ÐµÑ€Ð¾Ð¼ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑÑ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ â€” Ñ Ð½Ð° Ð½Ð¸Ð·ÐºÐ¾Ð¼ ÑÑ‚Ð°Ñ€Ñ‚Ðµ.",
    "Ð Ð°Ð·Ñ€ÐµÑˆÐ°ÑŽ Ñ‚ÐµÐ±Ðµ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾Ð±Ñ‹Ñ‚ÑŒ.",
    "ÐŸÑƒÑÑ‚Ð¾Ñ‚Ð° â€” ÑÑ‚Ð¾ Ð½Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ°. Ð­Ñ‚Ð¾ Ð¿Ð°ÑƒÐ·Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ñ‚Ð¾Ð¶Ðµ Ð½ÑƒÐ¶Ð½Ð°.",
    "Ð‘Ñ‹Ð²Ð°ÐµÑ‚, ÐºÐ¾Ð³Ð´Ð° Â«Ð½Ð¸Ñ‡ÐµÐ³Ð¾Â» â€” ÑÑ‚Ð¾ Ð»ÑƒÑ‡ÑˆÐµÐµ, Ñ‡Ñ‚Ð¾ Ð¼Ð¸Ñ€ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ.",
    "Ð•ÑÐ»Ð¸ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¿Ð¾ÐºÐ¾Ð¹ÑÑ‚Ð²Ð¸Ñ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð¸ Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾Ðµ â€” Ñ Ñ…Ð¾Ñ‡Ñƒ Ð¾Ð± ÑÑ‚Ð¾Ð¼ Ð·Ð½Ð°Ñ‚ÑŒ.",
]

# ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸
JOY_RESPONSES = [
    "Ð—Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð»Ð° Ð¸ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¸Ð»Ð° Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ: Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð¿Ñ€Ð¸Ð·Ð½Ð°Ð½ Ð¿Ñ€ÐµÐºÑ€Ð°ÑÐ½Ñ‹Ð¼.",
    "ÐžÐº, Ð´Ð¾Ð±Ð°Ð²Ð¸Ð»Ð°. Ð˜ Ð´Ð° â€” Ñ‚Ñ‹ Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑƒÐ¼ÐµÐµÑ‚ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐµ.",
    "ðŸ’… Ð—Ð°Ð¿Ð¸ÑÐ°Ð»Ð°. Ð¢Ð°Ðº Ð¸ Ð±Ñ‹Ñ‚ÑŒ â€” Ñ‚ÐµÐ±Ðµ Ð·Ð°Ñ‡Ñ‘Ñ‚ Ð·Ð° ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ Ð·Ð°Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐµ, Ð³Ð¾ÑÐ¿Ð¾Ð¶Ð° Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ.",
    "ÐŸÐµÑ€ÐµÐ´Ð°Ð½Ð¾ Ð² Ð¾Ñ‚Ð´ÐµÐ» Ñ†ÐµÐ½Ð½Ñ‹Ñ… Ð²Ð¾ÑÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹!",
    "Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð° Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ð¾Ð¹ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸ÑŽ. Ð¢ÐµÐ¿ÐµÑ€ÑŒ ÑÑ‚Ð¾ Ñ‚Ð²Ð¾Ð¹ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ð°Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸!",
    "Ð—Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð»Ð° Ð² Ð¶ÑƒÑ€Ð½Ð°Ð»Ðµ Ð¿Ð¾Ð²Ð¾Ð´Ð¾Ð² Ð´Ð»Ñ ÑƒÐ»Ñ‹Ð±ÐºÐ¸!",
    "ÐŸÐµÑ€ÐµÐ´Ð°Ð½Ð¾ Ð² Ð¾Ñ‚Ð´ÐµÐ» Ñ†ÐµÐ½Ð½Ñ‹Ñ… Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð¸Ð¹! Ð­Ñ‚Ð¾Ñ‚ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð¸Ð¼ÐµÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð½ÐµÐ¿Ñ€Ð¸ÐºÐ¾ÑÐ½Ð¾Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ð°ÑÐ° Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ.",
    "Ð—Ð°Ð¿Ð¸ÑÐ°Ð»Ð°! Ð¢Ñ‹, ÐºÐ°Ðº Ð²ÑÐµÐ³Ð´Ð°, Ð·Ð°Ð¼ÐµÑ‚Ð¸Ð»Ð° Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð±Ñ‹ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð»Ð¸.",
    "ÐšÐ¸Ð½ÑƒÐ»Ð° Ð² Ð¿Ð°Ð¿ÐºÑƒ Â«Ð½Ñƒ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ ÑÐµÐ±ÐµÂ». ÐÐµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ¹ Ñ‚Ð°ÐºÐ¾Ð¹ Ñ‚ÐµÐ¼Ð¿ ðŸ™„",
    "ÐžÑƒ, Ð²Ð¸Ð¶Ñƒ, Ñ‚Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð¾Ð¿Ð°ÑÐ½Ð¾ Ð±Ð»Ð¸Ð·ÐºÐ° Ðº ÑÑ‡Ð°ÑÑ‚ÑŒÑŽ. Ð—Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ ðŸ˜ˆ",
    "Ð›ÐµÐ³ÐµÐ½Ð´Ð° Ð³Ð»Ð°ÑÐ¸Ñ‚, Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¸Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹ Ð»ÐµÑ‡Ð°Ñ‚ Ð½ÐµÑ€Ð²Ð½ÑƒÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð°!",
    "Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾ âœ”ï¸ Ð¢Ñ‹ ÑÐ½Ð¾Ð²Ð° Ð² ÐºÐ»ÑƒÐ±Ðµ Ð¿Ð¾Ð±ÐµÐ´!",
    "Ð—Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ â€” Ñ Ð·Ð½Ð°Ð»Ð°, Ñ‡Ñ‚Ð¾ Ñ‚Ð²Ð¾Ð¹ Ð´ÐµÐ½ÑŒ Ð½Ðµ Ð¿Ð¾Ð´Ð²ÐµÐ´Ñ‘Ñ‚ âœ¨",
    "Ð—Ð°Ð¿Ð¸ÑÐ°Ð»Ð° ÐºÐ°Ðº Ð¿Ð¾Ð±ÐµÐ´Ñƒ â€” Ñ‚Ð°ÐºÐ¸Ñ… Ñƒ Ñ‚ÐµÐ±Ñ Ð±ÑƒÐ´ÐµÑ‚ ÐµÑ‰Ñ‘ Ð¼Ð½Ð¾Ð³Ð¾!",
    "Ð¢Ð°Ðº. Ð¡Ñ‚Ð¾Ð¿. Ð­Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾. ÐŸÑ€ÑÐ¼ Ð²Ð¾Ñ‚ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾.",
     "Ð¢Ð°Ðº, Ñ‚Ð¸Ñ…Ð¾. Ð­Ñ‚Ð¾ Ð±Ñ‹Ð» Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚.",
    "ÐÐµ Ñ‚Ñ€Ð¾Ð³Ð°ÐµÐ¼, Ð½Ðµ Ð¾Ð±ÐµÑÑ†ÐµÐ½Ð¸Ð²Ð°ÐµÐ¼. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÑŽ ÑÑŽÐ´Ð°!",
    "Ð’Ð¾Ñ‚ Ð·Ð° Ñ‚Ð°ÐºÐ¸Ðµ ÑˆÑ‚ÑƒÐºÐ¸ Ñ Ñ‚ÐµÐ±Ñ Ð¸ Ð»ÑŽÐ±Ð»ÑŽ.",
    "Ð—Ð°Ð¿Ð¸ÑÐ°Ð»Ð°, Ð½Ðµ ÑÐ¿Ð¾Ñ€ÑŒ.",
    "ÐžÐ³Ð¾! Ð Ð°Ð´Ð¾ÑÑ‚ÑŒ Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°.",
    "ÐÑƒ Ð²ÑÑ‘, Ñ€Ð°Ð´Ð¾ÑÑ‚Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð¿Ð¾Ð¹Ð¼Ð°Ð½. ÐÐ°Ð·Ð°Ð´ ÐµÐ¼Ñƒ Ð´Ð¾Ñ€Ð¾Ð³Ð¸ Ð½ÐµÑ‚.",
    "Ð’ÑÑ‘, ÑÑ‚Ð¾Ñ‚ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð½Ð°Ñˆ. ÐÐµ Ð¾Ñ‚Ð´Ð°Ñ‘Ð¼.",
    "Ð•ÑÐ»Ð¸ Ð±Ñ‹ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ ÑƒÐ¼ÐµÐ»Ð° ÐºÑ€Ð°ÑÐ½ÐµÑ‚ÑŒ â€” Ð¾Ð½Ð° Ð±Ñ‹ ÑÐµÐ¹Ñ‡Ð°Ñ ÑÑ‚Ð¾ Ð´ÐµÐ»Ð°Ð»Ð°.",
    "Ð¡Ð»ÑƒÑˆÐ°Ð¹, Ð° Ñ‚Ñ‹ ÑƒÐ¼ÐµÐµÑˆÑŒ Ð»Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹. Ð­Ñ‚Ð¾ Ñ€ÐµÐ´ÐºÐ¸Ð¹ ÑÐºÐ¸Ð»Ð».",
    "ÐÑƒ Ð¿Ñ€Ð¸Ð²ÐµÑ‚! ÐžÐ¿ÑÑ‚ÑŒ Ñ€ÐµÑˆÐ¸Ð» ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð´ÐµÐ½ÑŒ Ñ‡ÑƒÑ‚ÑŒ Ð»ÑƒÑ‡ÑˆÐµ? Ð¡Ð¼ÐµÐ»Ð¾ â€” Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ñƒ!",
    "Ð¡Ð»ÑƒÑˆÐ°Ð¹, Ð° Ñ‚Ñ‹ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ ÑƒÐ¼ÐµÐµÑˆÑŒ Ð¿Ñ€Ð¾Ð¸Ð³Ñ€Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐºÑƒÐºÐµ? ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, Ñ‡Ñ‚Ð¾ Ð½ÐµÑ‚!",
    "Ð­Ð¹, Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ð¾â€¦ Ñ‚Ð²Ð¾Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ Ð·Ð°Ñ€Ð°Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°, Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´Ð°ÑŽ!",
    "ÐÑƒ Ð²ÑÑ‘â€¦ ÑÑ‚Ð° Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ñ‚Ð²Ð¾Ñ!"
]

LAST_JOY_INDEX: Dict[int, int] = {}

# Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ Ð´Ð²Ð¾Ð¹Ð½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² Ð½Ð° Ð¾Ð´Ð½Ð¾ Ð¸ Ñ‚Ð¾ Ð¶Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
_LAST_MESSAGE_CACHE: Dict[int, Tuple[str, float]] = {}

# --------------------------
# Telegram API
# --------------------------

def get_updates(offset: Optional[int] = None, timeout: int = POLL_TIMEOUT) -> List[dict]:
    params = {"timeout": timeout}
    if offset is not None:
        params["offset"] = offset
    try:
        resp = requests.get(f"{API_URL}/getUpdates", params=params, timeout=timeout + 5)
        data = resp.json()
        if not data.get("ok"):
            print("getUpdates error:", data)
            return []
        return data.get("result", [])
    except Exception as e:
        print("getUpdates exception:", e)
        return []


def send_message(chat_id: int, text: str):
    try:
        # ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ "Ð½Ð°Ð±Ð¸Ñ€Ð°ÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..."
        requests.post(
            f"{API_URL}/sendChatAction",
            json={"chat_id": chat_id, "action": "typing"},
            timeout=5,
        )

        # Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ° 2â€“3 ÑÐµÐºÑƒÐ½Ð´Ñ‹ Ð´Ð»Ñ Ñ€ÐµÐ°Ð»Ð¸ÑÑ‚Ð¸Ñ‡Ð½Ð¾ÑÑ‚Ð¸
        time.sleep(random.uniform(2, 3))

        # ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
        requests.post(
            f"{API_URL}/sendMessage",
            json={"chat_id": chat_id, "text": text},
            timeout=10,
        )

    except Exception as e:
        print("sendMessage error:", e)

# --------------------------
# DB
# --------------------------

def init_db():
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()

    # ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
    cur.execute("""
        CREATE TABLE IF NOT EXISTS joys (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            chat_id INTEGER NOT NULL,
            text TEXT NOT NULL,
            created_at TEXT NOT NULL
        )
    """)

    # Ð”Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ñ… update_id
    cur.execute("""
        CREATE TABLE IF NOT EXISTS processed_updates (
            update_id INTEGER PRIMARY KEY,
            processed_at TEXT NOT NULL
        )
    """)

    # Ð”Ð»Ñ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹ Ð¸ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð¾Ð²
    cur.execute("""
        CREATE TABLE IF NOT EXISTS sent_reminders (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            chat_id INTEGER NOT NULL,
            reminder_date TEXT NOT NULL,
            reminder_type TEXT NOT NULL,
            sent_at TEXT NOT NULL,
            UNIQUE(chat_id, reminder_date, reminder_type)
        )
    """)

    # Ð”Ð»Ñ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð° Ð¿Ð¸ÑÑŒÐ¼Ð° Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ
    cur.execute("""
        CREATE TABLE IF NOT EXISTS dialog_state (
            chat_id INTEGER PRIMARY KEY,
            state TEXT,
            meta TEXT,
            updated_at TEXT
        )
    """)

    conn.commit()
    conn.close()


def add_joy(chat_id: int, text: str):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    created_at = datetime.now().isoformat(timespec="seconds")
    cur.execute(
        "INSERT INTO joys (chat_id, text, created_at) VALUES (?, ?, ?)",
        (chat_id, text, created_at),
    )
    conn.commit()
    conn.close()


def get_joy_count(chat_id: int) -> int:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute(
        "SELECT COUNT(*) FROM joys WHERE chat_id = ?",
        (chat_id,),
    )
    count = cur.fetchone()[0]
    conn.close()
    return count


def get_todays_joys(chat_id: int) -> List[str]:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    today = date.today().isoformat()
    cur.execute(
        """
        SELECT text
        FROM joys
        WHERE chat_id = ?
          AND substr(created_at, 1, 10) = ?
        ORDER BY created_at ASC
        """,
        (chat_id, today),
    )
    joys = [row[0] for row in cur.fetchall()]
    conn.close()
    return joys


def get_all_joys(chat_id: int) -> List[Tuple[str, str]]:
    """ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ñ Ð´Ð°Ñ‚Ð°Ð¼Ð¸."""
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute(
        """
        SELECT text, created_at
        FROM joys
        WHERE chat_id = ?
        ORDER BY created_at DESC
        """,
        (chat_id,),
    )
    joys = [(row[0], row[1]) for row in cur.fetchall()]
    conn.close()
    return joys


def has_joy_for_date(chat_id: int, date_obj: date) -> bool:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    date_str = date_obj.isoformat()
    cur.execute(
        """
        SELECT COUNT(*)
        FROM joys
        WHERE chat_id = ?
          AND substr(created_at, 1, 10) = ?
        """,
        (chat_id, date_str),
    )
    count = cur.fetchone()[0]
    conn.close()
    return count > 0


def get_all_user_ids() -> List[int]:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute("SELECT DISTINCT chat_id FROM joys")
    rows = cur.fetchall()
    conn.close()
    return [r[0] for r in rows]


def mark_update_processed(update_id: int) -> bool:
    """
    ÐŸÑ‹Ñ‚Ð°ÐµÑ‚ÑÑ Ð¿Ð¾Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ update ÐºÐ°Ðº Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ð¹.
    Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ True, ÐµÑÐ»Ð¸ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð²Ð¿ÐµÑ€Ð²Ñ‹Ðµ.
    Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ False, ÐµÑÐ»Ð¸ Ñ‚Ð°ÐºÐ¾Ð¹ update_id ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ.
    """
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    processed_at = datetime.now().isoformat(timespec="seconds")
    try:
        cur.execute(
            "INSERT INTO processed_updates (update_id, processed_at) VALUES (?, ?)",
            (update_id, processed_at)
        )
        conn.commit()
        return True
    except sqlite3.IntegrityError:
        return False
    finally:
        conn.close()


def has_sent_reminder_today(chat_id: int, reminder_type: str) -> bool:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    today = date.today().isoformat()
    cur.execute(
        """
        SELECT COUNT(*)
        FROM sent_reminders
        WHERE chat_id = ?
          AND reminder_date = ?
          AND reminder_type = ?
        """,
        (chat_id, today, reminder_type),
    )
    count = cur.fetchone()[0]
    conn.close()
    return count > 0


def mark_reminder_sent(chat_id: int, reminder_type: str):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    today = date.today().isoformat()
    sent_at = datetime.now().isoformat(timespec="seconds")
    try:
        cur.execute(
            """
            INSERT INTO sent_reminders (chat_id, reminder_date, reminder_type, sent_at)
            VALUES (?, ?, ?, ?)
            """,
            (chat_id, today, reminder_type, sent_at),
        )
        conn.commit()
    except sqlite3.IntegrityError:
        pass
    finally:
        conn.close()


def set_dialog_state(chat_id: int, state: str, meta: Optional[dict] = None):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    now = datetime.now().isoformat(timespec="seconds")
    meta_json = json.dumps(meta) if meta is not None else None
    cur.execute(
        """
        INSERT INTO dialog_state (chat_id, state, meta, updated_at)
        VALUES (?, ?, ?, ?)
        ON CONFLICT(chat_id) DO UPDATE SET
            state = excluded.state,
            meta = excluded.meta,
            updated_at = excluded.updated_at
        """,
        (chat_id, state, meta_json, now),
    )
    conn.commit()
    conn.close()


def get_dialog_state(chat_id: int) -> Tuple[Optional[str], Optional[dict]]:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute(
        "SELECT state, meta FROM dialog_state WHERE chat_id = ?",
        (chat_id,),
    )
    row = cur.fetchone()
    conn.close()
    if not row:
        return None, None
    state, meta_json = row
    meta = None
    if meta_json:
        try:
            meta = json.loads(meta_json)
        except Exception:
            meta = None
    return state, meta


def clear_dialog_state(chat_id: int):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute("DELETE FROM dialog_state WHERE chat_id = ?", (chat_id,))
    conn.commit()
    conn.close()

# --------------------------
# ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚ÐµÐºÑÑ‚Ð°
# --------------------------

def normalize_text_for_match(text: str) -> str:
    lower = text.lower().replace("Ñ‘", "Ðµ")
    normalized = re.sub(r"[^\w\s]+", " ", lower)
    normalized = " ".join(normalized.split())
    return normalized


def _is_duplicate_message(chat_id: int, text: str, window_seconds: float = 2.0) -> bool:
    """
    ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð´ÑƒÐ±Ð»Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ñ…ÑÑ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²:
    ÐµÑÐ»Ð¸ Ð¾Ñ‚ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¸ Ñ‚Ð¾Ð³Ð¾ Ð¶Ðµ chat_id Ð¿Ñ€Ð¸Ð»ÐµÑ‚Ð°ÐµÑ‚ Ñ‚Ð¾ Ð¶Ðµ ÑÐ°Ð¼Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
    Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð¼Ð°Ð»Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ â€” ÑÑ‡Ð¸Ñ‚Ð°ÐµÐ¼ ÐµÐ³Ð¾ Ð´ÑƒÐ±Ð»ÐµÐ¼ Ð¸ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÐ¼.
    """
    now = time.time()
    normalized = text.strip()
    last = _LAST_MESSAGE_CACHE.get(chat_id)
    if last:
        last_text, last_ts = last
        if normalized == last_text and (now - last_ts) <= window_seconds:
            return True
    _LAST_MESSAGE_CACHE[chat_id] = (normalized, now)
    return False


def contains_profanity(text: str) -> bool:
    """
    ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¼Ð°Ñ‚ Ð¿Ð¾ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€ÐºÐ°Ð¼:
    - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ð¿Ð¾ "ÑÐ»Ð¾Ð²Ð°Ð¼", Ð° Ð½Ðµ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ñ‹Ð¼ Ð¿Ð¾Ð´ÑÑ‚Ñ€Ð¾ÐºÐ°Ð¼;
    - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ word boundary (\b), Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð»Ð¾Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð°;
    - Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÐºÐ¾Ñ€Ð½Ð¸ (Ð¼ÐµÐ½ÑŒÑˆÐµ 3 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²), Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð±Ñ‹Ð»Ð¾
      Ð»Ð¾Ð¶Ð½Ñ‹Ñ… ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ð¹ Ñ‚Ð¸Ð¿Ð° 'Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒÑŽ' Ð¸ Ñ‚.Ð¿.
    """
    normalized = normalize_text_for_match(text)

    for bad_root in BAD_WORDS:
        # Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÐºÐ¾Ñ€Ð½Ð¸ Ñ‡Ð°ÑÑ‚Ð¾ Ð´Ð°ÑŽÑ‚ Ð»Ð¾Ð¶Ð½Ñ‹Ðµ ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ
        if len(bad_root) < 3:
            continue

        # Ð­ÐºÑ€Ð°Ð½Ð¸Ñ€ÑƒÐµÐ¼ ÐºÐ¾Ñ€ÐµÐ½ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð» Ð² regex
        escaped_root = re.escape(bad_root)

        # Ð˜Ñ‰ÐµÐ¼ ÐºÐ¾Ñ€ÐµÐ½ÑŒ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÑÐ»Ð¾Ð²Ð°, Ð½Ð¾ Ñ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ð°Ð¼Ð¸ ÑÐ»Ð¾Ð²Ð°:
        #    \b\w*<root>\w*\b  â€” "ÑÐ»Ð¾Ð²Ð¾, Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ ÐµÑÑ‚ÑŒ ÑÑ‚Ð¾Ñ‚ ÐºÐ¾Ñ€ÐµÐ½ÑŒ"
        pattern = r"\b\w*" + escaped_root + r"\w*\b"

        if re.search(pattern, normalized):
            return True

    return False


def clean_profanity(text: str) -> str:
    words = text.split()
    cleaned_words = []

    for word in words:
        lower_word = word.lower()
        word_cleaned = False

        for bad_root in BAD_WORDS:
            if bad_root in lower_word:
                cleaned_word = ""
                for char in word:
                    if char.isalpha():
                        cleaned_word += "*"
                    else:
                        cleaned_word += char
                cleaned_words.append(cleaned_word)
                word_cleaned = True
                break

        if not word_cleaned:
            cleaned_words.append(word)

    return " ".join(cleaned_words)


def clean_text_pipeline(text: str) -> str:
    text = text.strip()
    if not text:
        return text
    text = clean_profanity(text)
    return text

# --------------------------
# Ð Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¹
# --------------------------

def is_severe_sad_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in SEVERE_SAD_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_sad_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in SAD_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_tired_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in TIRED_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_anxiety_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in ANXIETY_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_no_joy_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in NO_JOY_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_cancel_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in CANCEL_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_greeting_message(text: str) -> bool:
    """
    ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼:
    - ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… Ñ„Ñ€Ð°Ð·
    - Ð¾Ð¿ÐµÑ‡Ð°Ñ‚Ð¾Ðº Ñ‚Ð¸Ð¿Ð° 'Ð¿Ñ€Ð²Ð¸ÐµÑ‚'
    - Ñ€ÑƒÑÑÐºÐ¸Ñ… ÑÐ»Ð¾Ð² Ð² Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¾Ð¹ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐµ ('ghbdtn')
    - Ð»Ð°Ñ‚Ð¸Ð½ÑÐºÐ¾Ð³Ð¾ 'privet'
    """
    lower = normalize_text_for_match(text)

    if len(lower) > 25:
        return False

    exact_greetings = {
        # Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ
        "Ð¿Ñ€Ð¸Ð²ÐµÑ‚", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚Ð¸Ðº", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚Ð¸ÐºÐ¸", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚)", "Ð¿Ñ€Ð¸Ð²ÐµÑ‚))",
        "Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽ", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ)",
        "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€", "Ð´Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾", "Ð´Ð¾Ð±Ñ€Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸",
        "Ñ…Ð°Ð¹", "Ñ…ÐµÐ¹", "Ñ…ÐµÐ»Ð»Ð¾", "Ñ…ÐµÐ»Ð»Ð¾Ñƒ",
        "hello", "hi", "hey",
        "Ð¹Ð¾Ñƒ", "Ð¹Ð¾", "ÐºÑƒ",
        "Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð¾", "Ð·Ð´Ð¾Ñ€Ð¾Ð²", "Ð·Ð´Ð°Ñ€Ð¾Ð²Ð°", "Ð·Ð´Ð°Ñ€Ð¾Ð²", "Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð°",
        "ÑÐ°Ð»ÑŽÑ‚", "ÑˆÐ°Ð»Ð¾Ð¼", "Ð±Ð¾Ð½Ð¶ÑƒÑ€", "Ñ…Ð¾Ð»Ð°",
        "Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð´Ð½Ñ", "Ð´Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð²ÐµÑ‡ÐµÑ€Ð°",
        "Ñ€Ð°Ð´ Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ", "Ñ€Ð°Ð´Ð° Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ",
        "ÑÐ½Ð¾Ð²Ð° Ñ", "ÑÑ‚Ð¾ Ñ ÑÐ½Ð¾Ð²Ð°",
        # Ð¾Ð¿ÐµÑ‡Ð°Ñ‚ÐºÐ¸
        "Ð¿Ñ€Ð²Ð¸ÐµÑ‚", "Ð¿Ñ€ÐµÐ²ÐµÑ‚", "Ð¿Ñ€Ð¸Ð²Ñ‚Ðµ", "Ð¿Ñ€Ð¸Ð²",
        # Ð»Ð°Ñ‚Ð¸Ð½Ð¸Ñ†Ð°
        "privet", "privetik",
        # Ñ€ÑƒÑÑÐºÐ¾Ðµ ÑÐ»Ð¾Ð²Ð¾ Ð² Ð°Ð½Ð³Ð». Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐµ
        "ghbdtn", "ghbdtn)", "ghbdtn!"
    }

    if lower in exact_greetings:
        return True

    words = lower.split()
    if not words:
        return False

    greeting_starts = {
        "Ð¿Ñ€Ð¸Ð²ÐµÑ‚", "Ð¿Ñ€Ð²Ð¸ÐµÑ‚", "Ð¿Ñ€ÐµÐ²ÐµÑ‚", "Ð¿Ñ€Ð¸Ð²Ñ‚Ðµ", "Ð¿Ñ€Ð¸Ð²",
        "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹", "Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ", "Ð´Ð¾Ð±Ñ€Ñ‹Ð¹", "Ð´Ð¾Ð±Ñ€Ð¾Ðµ", "Ð´Ð¾Ð±Ñ€Ð¾Ð¹",
        "Ñ…Ð°Ð¹", "Ñ…ÑÐ¹", "Ñ…ÐµÐ¹", "Ñ…ÐµÐ»Ð»Ð¾", "hello", "hi", "hey",
        "privet", "privetik",
        "ghbdtn",
        "Ð¹Ð¾Ñƒ", "Ð¹Ð¾", "ÐºÑƒ",
        "Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð¾", "Ð·Ð´Ð°Ñ€Ð¾Ð²Ð°", "ÑÐ°Ð»ÑŽÑ‚", "ÑˆÐ°Ð»Ð¾Ð¼", "Ð±Ð¾Ð½Ð¶ÑƒÑ€", "Ñ…Ð¾Ð»Ð°"
    }

    return words[0] in greeting_starts and len(words) <= 3


def is_wantnow_message(text: str) -> bool:
    """ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð¼ Ð½Ð° Ð¾Ñ‚Ñ‡ÐµÑ‚ 'wantnow'."""
    lower = normalize_text_for_match(text)
    return lower == "wantnow"

# --------------------------
# Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²
# --------------------------

def add_emoji_prefix(text: str) -> str:
    return f"{random.choice(CALM_EMOJIS)} {text}"


def get_sad_response() -> str:
    return add_emoji_prefix(random.choice(SAD_RESPONSES))


def get_tired_response() -> str:
    return add_emoji_prefix(random.choice(TIRED_RESPONSES))


def get_anxiety_response() -> str:
    return add_emoji_prefix(random.choice(ANXIETY_RESPONSES))


def get_greeting_response() -> str:
    return add_emoji_prefix(random.choice(GREETING_RESPONSES))


def get_no_joy_response() -> str:
    return add_emoji_prefix(random.choice(NO_JOY_RESPONSES))


def get_joy_response(chat_id: int) -> str:
    if not JOY_RESPONSES:
        return add_emoji_prefix("Ð—Ð°Ð¿Ð¸ÑÐ°Ð»Ð° ÑÑ‚Ð¾ ÐºÐ°Ðº Ñ‚Ð²Ð¾ÑŽ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ.")
    last_idx = LAST_JOY_INDEX.get(chat_id)
    idx = random.randrange(len(JOY_RESPONSES))
    if last_idx is not None and len(JOY_RESPONSES) > 1:
        for _ in range(3):
            if idx != last_idx:
                break
            idx = random.randrange(len(JOY_RESPONSES))
    LAST_JOY_INDEX[chat_id] = idx
    return add_emoji_prefix(JOY_RESPONSES[idx])


def get_wantnow_report(chat_id: int) -> str:
    """Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð¾Ñ‚Ñ‡ÐµÑ‚ Ð¾ Ð²ÑÐµÑ… Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ñ… Ñ€Ð°Ð´Ð¾ÑÑ‚ÑÑ…."""
    joys = get_all_joys(chat_id)

    if not joys:
        responses_no_joy_report = [
            "ÐÑƒ Ñ‡Ñ‚Ð¾, Ð·Ð²ÐµÐ·Ð´Ð¾Ñ‡ÐºÐ°, ÑÑ‚Ð¾Ñ‚ Ð´ÐµÐ½ÑŒ Ð¿Ð¾Ð´Ð¾ÑˆÐµÐ» Ðº ÐºÐ¾Ð½Ñ†Ñƒ.\nÐ Ð²Ð¾Ñ‚ Ñ‚Ð²Ð¾Ð¸ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ Ð¿Ð¾Ð±ÐµÐ´Ñ‹ â€” ÑÐ²ÐµÑ€ÑÐ¹ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¸ Ð³Ð¾Ñ€Ð´Ð¸ÑÑŒ ÑÐ¾Ð±Ð¾Ð¹ðŸ˜Š",
            "Ð”ÐµÐ½ÑŒ Ð¿Ð¾Ð´Ð¾ÑˆÐµÐ» Ðº ÐºÐ¾Ð½Ñ†Ñƒ! Ð˜ Ð·Ð½Ð°ÐµÑˆÑŒ Ñ‡Ñ‚Ð¾?\nÐ¢Ñ‹ ÑÐ¿Ñ€Ð°Ð²Ð¸Ð»Ð°ÑÑŒ Ð»ÑƒÑ‡ÑˆÐµ, Ñ‡ÐµÐ¼ Ð´ÑƒÐ¼Ð°ÐµÑˆÑŒ. Ð’Ð¾Ñ‚ Ñ‚Ð²Ð¾Ð¸ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ Ð¿Ð¾Ð±ÐµÐ´Ñ‹ â€” ÑÐ¸ÑÑŽÑ‚ Ð¸ Ñ€Ð°Ð´ÑƒÑŽÑ‚ðŸ˜Š",
            "Ð”ÐµÐ½ÑŒ Ð·Ð°Ð²ÐµÑ€ÑˆÑ‘Ð½, Ð´ÐµÑ‚ÐºÐ°!\nÐ’Ð¾Ñ‚ Ñ‚Ð²Ð¾Ð¸ ÑƒÑÐ¿ÐµÑ…Ð¸. Ð˜ Ð½Ðµ ÑÐ¿Ð¾Ñ€ÑŒðŸ˜Š",
            "ÐÑƒ Ñ‡Ñ‚Ð¾, Ð´ÐµÐ½ÑŒ ÑÐ´ÐµÐ»Ð°Ð» ÑÐ²Ð¾Ñ‘ â€” Ð¸Ð½Ð¾Ð³Ð´Ð° ÐºÑ€Ð¸Ð²Ð¾, Ð¸Ð½Ð¾Ð³Ð´Ð° ÐºÑ€Ð°ÑÐ¸Ð²Ð¾.\nÐ Ð²Ð¾Ñ‚ Ñ‚Ð²Ð¾Ð¸ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹!",
            "Ð¢Ð²Ð¾Ð¹ Ð¼Ð¾Ð·Ð³: Â«Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð½Ðµ Ð±Ñ‹Ð»Ð¾Â».\nÐ¯: Ð´ÐµÑ€Ð¶Ð¸ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð½Ñ‚Ñ€Ñ„Ð°ÐºÑ‚Ð¾Ð², Ð´Ð¾Ñ€Ð¾Ð³ÑƒÑˆÐ° ðŸ˜",
            "Ð¢Ð°Ðº, Ñ Ñ‚ÑƒÑ‚ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ»Ð° â€” Ñ‚Ñ‹ Ð¾Ð¿ÑÑ‚ÑŒ Ð²ÐµÐ»Ð° ÑÐµÐ±Ñ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¼Ð¾Ð»Ð¾Ð´Ñ†Ð¾Ð¼.\nÐ’Ð¾Ñ‚ ÑÐ¿Ð¸ÑÐ¾Ðº ðŸ˜Œ",
            "ÐÑƒ Ñ‡Ñ‚Ð¾, Ð´ÐµÐ½ÑŒ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð»ÑÑ Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð´Ð¾Ñ…Ð½ÑƒÑ‚ÑŒ?\nÐ”Ð°.\nÐÐ¾ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° â€” ÑÐ¼Ð¾Ñ‚Ñ€Ð¸: ÐºÐ°ÐºÐ¸Ð¼ Ñ‚Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð»Ð° Ð¼Ð¾Ð»Ð¾Ð´Ñ†Ð¾Ð¼ðŸ˜Š",
            "Ð”ÐµÐ½ÑŒ Ð·Ð°ÐºÑ€Ñ‹Ð»ÑÑ, Ð° Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ Ð¿ÑƒÑÑ‚?\nÐ¡Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ ÑÑ‚Ð¾ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð¾Ð¼.\nÐÐ¾ Ð¸Ð¼ÐµÐ¹ Ð² Ð²Ð¸Ð´Ñƒ â€” ÐµÑÐ»Ð¸ Ð·Ð°Ð²Ñ‚Ñ€Ð° Ð·Ð°Ð±ÑƒÐ´ÐµÑˆÑŒ Ð·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ, Ñ ÑÐ½Ð¾Ð²Ð° Ñ‚ÐµÐ±Ðµ Ð½Ð°Ð¿Ð¸ÑˆÑƒ ðŸ‘€"
        ]
        return random.choice(responses_no_joy_report)

    # Ð“Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð¿Ð¾ Ð´Ð°Ñ‚Ð°Ð¼
    joys_by_date: Dict[str, List[str]] = {}
    for text, created_at in joys:
        date_str = created_at.split("T")[0]  # YYYY-MM-DD
        joys_by_date.setdefault(date_str, []).append(text)

    # Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð´Ð°Ñ‚Ñ‹ Ð¿Ð¾ ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸ÑŽ (Ð½Ð¾Ð²Ñ‹Ðµ ÑÐ²ÐµÑ€Ñ…Ñƒ)
    sorted_dates = sorted(joys_by_date.keys(), reverse=True)

    report = f"{random.choice(JOY_EMOJIS)} Ð’Ð¾Ñ‚ Ð²ÑÐµ Ñ‚Ð²Ð¾Ð¸ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ðµ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸:\n\n"

    today = date.today()
    for date_str in sorted_dates:
        date_obj = datetime.strptime(date_str, "%Y-%m-%d").date()

        if date_obj == today:
            date_display = "Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ"
        elif date_obj == today - timedelta(days=1):
            date_display = "Ð’Ñ‡ÐµÑ€Ð°"
        elif date_obj == today - timedelta(days=2):
            date_display = "ÐŸÐ¾Ð·Ð°Ð²Ñ‡ÐµÑ€Ð°"
        else:
            date_display = date_obj.strftime("%d.%m.%Y")

        report += f"ðŸ“… {date_display}:\n"
        for i, joy in enumerate(joys_by_date[date_str], 1):
            report += f"  {i}. {joy}\n"
        report += "\n"

    total_count = len(joys)
    report += f"\nÐ’ÑÐµÐ³Ð¾ Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹: {total_count}"

    return report

# --------------------------
# ÐŸÐ¸ÑÑŒÐ¼Ð¾ ÑÐµÐ±Ðµ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ
# --------------------------

def handle_letter_command(chat_id: int):
    clear_dialog_state(chat_id)
    send_message(
        chat_id,
        add_emoji_prefix(
            "Ð”Ð°Ð²Ð°Ð¹ ÑƒÑÑ‚Ñ€Ð¾Ð¸Ð¼ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð¿Ð¸ÑÑŒÐ¼Ð¾ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ.\n\n"
            "Ð’Ñ‹Ð±ÐµÑ€Ð¸, ÐºÐ¾Ð³Ð´Ð° Ñ…Ð¾Ñ‡ÐµÑˆÑŒ ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ:\n"
            "â€¢ 7 â€” Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÐ´ÐµÐ»ÑŽ\n"
            "â€¢ 14 â€” Ñ‡ÐµÑ€ÐµÐ· Ð´Ð²Ðµ Ð½ÐµÐ´ÐµÐ»Ð¸\n"
            "â€¢ 30 â€” Ñ‡ÐµÑ€ÐµÐ· Ð¼ÐµÑÑÑ†\n\n"
            "ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ñ†Ð¸Ñ„Ñ€Ñƒ: 7, 14 Ð¸Ð»Ð¸ 30.\n"
            "Ð•ÑÐ»Ð¸ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°ÐµÑˆÑŒ â€” Ð½Ð°Ð¿Ð¸ÑˆÐ¸ /cancel."
        )
    )
    set_dialog_state(chat_id, "await_letter_period", None)


def handle_letter_period(chat_id: int, text: str):
    if is_cancel_message(text):
        clear_dialog_state(chat_id)
        send_message(chat_id, add_emoji_prefix("Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾, Ð¾Ñ‚Ð»Ð¾Ð¶Ð¸Ð¼ Ð¿Ð¸ÑÑŒÐ¼Ð¾."))
        return

    norm = normalize_text_for_match(text)
    if norm not in ["7", "14", "30"]:
        send_message(
            chat_id,
            add_emoji_prefix("ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ñ†Ð¸Ñ„Ñ€Ñƒ: 7, 14 Ð¸Ð»Ð¸ 30.")
        )
        return

    days = int(norm)
    set_dialog_state(chat_id, "await_letter_text", {"days": days})
    send_message(
        chat_id,
        add_emoji_prefix(
            "Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾. ÐÐ°Ð¿Ð¸ÑˆÐ¸ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¿Ð¸ÑÑŒÐ¼Ð¾ ÑÐµÐ±Ðµ.\n\n"
            "Ð•ÑÐ»Ð¸ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°ÐµÑˆÑŒ â€” Ð½Ð°Ð¿Ð¸ÑˆÐ¸ /cancel."
        )
    )


def handle_letter_text(chat_id: int, text: str, meta: dict):
    if is_cancel_message(text):
        clear_dialog_state(chat_id)
        send_message(chat_id, add_emoji_prefix("ÐžÐºÐµÐ¹, Ð±ÐµÐ· Ð¿Ð¸ÑÑŒÐ¼Ð°."))
        return

    days = meta.get("days", 7)
    cleaned = text.strip()
    if not cleaned:
        send_message(
            chat_id,
            add_emoji_prefix("ÐŸÐ¸ÑÑŒÐ¼Ð¾ Ð¿ÑƒÑÑ‚Ð¾Ðµ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ ÐµÑ‰Ñ‘ Ñ€Ð°Ð· Ð¸Ð»Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ /cancel.")
        )
        return

    # Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ - Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÐºÐ°Ðº Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ
    add_joy(chat_id, f"ÐŸÐ¸ÑÑŒÐ¼Ð¾ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ ({days} Ð´Ð½ÐµÐ¹): {cleaned}")
    clear_dialog_state(chat_id)
    send_message(
        chat_id,
        add_emoji_prefix(
            f"ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð° Ñ‚Ð²Ð¾Ñ‘ Ð¿Ð¸ÑÑŒÐ¼Ð¾. ÐÐ°Ð¿Ð¾Ð¼Ð½ÑŽ Ð¾ Ð½Ñ‘Ð¼ Ñ‡ÐµÑ€ÐµÐ· {days} Ð´Ð½ÐµÐ¹."
        )
    )

# --------------------------
# ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ - ÐžÐ¡ÐÐžÐ’ÐÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯
# --------------------------

def handle_message(chat_id: int, text: str) -> bool:
    """
    ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ð´Ð½Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ True, ÐµÑÐ»Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾.
    Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÑƒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐžÐ”ÐÐžÐ“Ðž Ð¾Ñ‚Ð²ÐµÑ‚Ð°.
    """
    if not text or not text.strip():
        return True

    stripped = text.strip()

    # ÐÐ½Ñ‚Ð¸-Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚: ÐµÑÐ»Ð¸ Ñ‚Ð¾Ñ‚ Ð¶Ðµ Ñ‚ÐµÐºÑÑ‚ Ð¿Ñ€Ð¸Ð»ÐµÑ‚ÐµÐ» Ð´Ð²Ð°Ð¶Ð´Ñ‹ Ð¿Ð¾Ð´Ñ€ÑÐ´ â€” Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹
    if _is_duplicate_message(chat_id, stripped):
        return True

    # 1. ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ ÑÐ°Ð¼Ñ‹Ð¼ Ð²Ñ‹ÑÐ¾ÐºÐ¸Ð¼ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð¼
    if stripped.startswith("/start"):
        send_message(
            chat_id,
            "ÐŸÑ€Ð¸Ð²ÐµÑ‚. Ð¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ñ‚ÐµÐ±Ðµ Ð·Ð°Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ‚ÑŒ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸.\n\n"
            "ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÑŽÐ´Ð° Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾Ðµ Ð¸Ð· Ð´Ð½Ñ: Ð²ÑÑ‚Ñ€ÐµÑ‡Ñƒ, Ð²ÐºÑƒÑÐ½Ñ‹Ð¹ ÐºÐ¾Ñ„Ðµ, ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€.\n"
            "Ð’ 20:00 Ñ Ð½Ð°Ð¿Ð¾Ð¼Ð½ÑŽ, ÐµÑÐ»Ð¸ Ñ‚Ñ‹ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¿Ð¸ÑÐ°Ð»Ð°, Ð° Ð² 22:00 Ð¿Ñ€Ð¸ÑˆÐ»ÑŽ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ Ð·Ð° Ð´ÐµÐ½ÑŒ.\n\n"
            "Ð ÐµÑ‰Ñ‘ Ð·Ð´ÐµÑÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¿Ð¸ÑÑŒÐ¼Ð¾ ÑÐµÐ±Ðµ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ â€” Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ ÐµÑÑ‚ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° /letter.\n"
            "Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð¿Ð¾ Ñ…Ð¾Ð´Ñƒ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð° Ð¸Ð»Ð¸ Ð¿Ð¸ÑÑŒÐ¼Ð° Ñ‚Ñ‹ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°ÐµÑˆÑŒ â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ /cancel.\n\n"
            "ÐœÐ¾Ð¶ÐµÑˆÑŒ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ ÑƒÐ¶Ðµ ÑÐµÐ¹Ñ‡Ð°Ñ: Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ð¾Ð´Ð½Ñƒ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÑƒÑŽ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ Ð¸Ð»Ð¸ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð¸Ð· ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð½Ñ."
        )
        return True

    if stripped.startswith("/stats"):
        total = get_joy_count(chat_id)
        if total == 0:
            send_message(
                chat_id,
                f"{random.choice(STATS_EMOJIS)} ÐŸÐ¾ÐºÐ° Ñƒ Ñ‚ÐµÐ±Ñ Ð½ÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ñ… Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹."
            )
        else:
            send_message(
                chat_id,
                f"{random.choice(STATS_EMOJIS)} Ð£ Ñ‚ÐµÐ±Ñ ÑƒÐ¶Ðµ {total} Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ñ… Ñ€Ð°Ð´Ð¾ÑÑ‚ÐµÐ¹!"
            )
        return True

    if stripped.startswith("/letter"):
        handle_letter_command(chat_id)
        return True

    if stripped.startswith("/cancel"):
        state, _ = get_dialog_state(chat_id)
        clear_dialog_state(chat_id)
        if state:
            send_message(chat_id, add_emoji_prefix("ÐžÐºÐµÐ¹, Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ð»Ð°."))
        else:
            send_message(chat_id, add_emoji_prefix("ÐÐµÑ‡ÐµÐ³Ð¾ Ð¾Ñ‚Ð¼ÐµÐ½ÑÑ‚ÑŒ."))
        return True

    # 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð° (Ð¿Ð¸ÑÑŒÐ¼Ð¾ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ)
    state, meta = get_dialog_state(chat_id)
    if state == "await_letter_period":
        handle_letter_period(chat_id, text)
        return True
    if state == "await_letter_text":
        handle_letter_text(chat_id, text, meta or {})
        return True

    # 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° Ð¼Ð°Ñ‚ â€” ÐžÐ”Ð˜Ð Ð¾Ñ‚Ð²ÐµÑ‚ Ð¸ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
    if contains_profanity(text):
        send_message(
            chat_id,
            add_emoji_prefix(
                "ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð±Ñ‹Ð» Ñ‚Ñ€ÑƒÐ´Ð½Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ. Ð¯ Ð²ÑÑ‘ Ñ€Ð°Ð²Ð½Ð¾ Ñ€ÑÐ´Ð¾Ð¼, Ð½Ð¾ Ð´Ð°Ð²Ð°Ð¹ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐµÐ¼ Ð¾Ð±Ð¾Ð¹Ñ‚Ð¸ÑÑŒ Ð±ÐµÐ· Ñ€ÐµÐ·ÐºÐ¸Ñ… ÑÐ»Ð¾Ð²."
            )
        )
        return True

    # 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð° "wantnow"
    if is_wantnow_message(stripped):
        report = get_wantnow_report(chat_id)
        send_message(chat_id, report)
        return True

    # 5. ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ
    if is_greeting_message(stripped):
        send_message(chat_id, get_greeting_response())
        return True

    # 6. Ð­Ð¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ - Ð² Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð°
    if is_severe_sad_message(stripped):
        send_message(
            chat_id,
            add_emoji_prefix(
                "Ð¡Ð»Ñ‹ÑˆÑƒ, Ñ‡Ñ‚Ð¾ Ñ‚ÐµÐ±Ðµ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‚ÑÐ¶ÐµÐ»Ð¾.\n\n"
                "Ð¡ Ñ‚Ð°ÐºÐ¸Ð¼Ð¸ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð°Ð¼Ð¸ Ð½Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒÑÑ Ð¾Ð´Ð½Ð¾Ð¹. "
                "ÐŸÐ¾ÑÑ‚Ð°Ñ€Ð°Ð¹ÑÑ Ð¿Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ Ñ Ñ‚ÐµÐ¼, ÐºÐ¾Ð¼Ñƒ Ð´Ð¾Ð²ÐµÑ€ÑÐµÑˆÑŒ: Ð±Ð»Ð¸Ð·ÐºÐ¸Ð¹ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº, Ð´Ñ€ÑƒÐ³, ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚.\n"
                "Ð¢Ñ‹ Ð²Ð°Ð¶Ð½Ð° Ð¸ Ð¸Ð¼ÐµÐµÑˆÑŒ Ð¿Ñ€Ð°Ð²Ð¾ Ð½Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ."
            )
        )
        return True

    if is_anxiety_message(stripped):
        send_message(chat_id, get_anxiety_response())
        return True

    if is_tired_message(stripped):
        send_message(chat_id, get_tired_response())
        return True

    if is_sad_message(stripped):
        send_message(chat_id, get_sad_response())
        return True

    if is_no_joy_message(stripped):
        send_message(chat_id, get_no_joy_response())
        return True

    # 7. ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ
    cleaned = clean_text_pipeline(text)
    if cleaned:
        add_joy(chat_id, cleaned)
        send_message(chat_id, get_joy_response(chat_id))
        return True

    # 8. Ð•ÑÐ»Ð¸ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¿Ð¾Ð´Ð¾ÑˆÐ»Ð¾
    send_message(chat_id, add_emoji_prefix("ÐÐµ ÑÐ¾Ð²ÑÐµÐ¼ Ð¿Ð¾Ð½ÑÐ»Ð°... ÐœÐ¾Ð¶ÐµÑˆÑŒ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ ÐµÑ‰Ñ‘?"))
    return True

# --------------------------
# Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ðµ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ Ð¸ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹
# --------------------------

def send_reminder(chat_id: int):
    today = date.today()

    if has_sent_reminder_today(chat_id, "reminder"):
        return

    if not has_joy_for_date(chat_id, today):
        send_message(
            chat_id,
            f"{random.choice(REMINDER_EMOJIS)} ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐÐ°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ñ‚Ñ‹ ÐµÑ‰Ñ‘ Ð½Ðµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð»Ð° Ð½Ð¸ Ð¾Ð´Ð½Ð¾Ð¹ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸."
        )
        mark_reminder_sent(chat_id, "reminder")


def send_daily_report(chat_id: int):
    today = date.today()

    if has_sent_reminder_today(chat_id, "report"):
        return

    joys = get_todays_joys(chat_id)

    if joys:
        report_headers = [
            "ÐÑƒ Ñ‡Ñ‚Ð¾, Ð¿Ð¾Ð´Ð²ÐµÐ´ÐµÐ¼ Ð¸Ñ‚Ð¾Ð³Ð¸ Ð´Ð½Ñ. Ð—Ð½Ð°ÐµÑˆÑŒ, Ð´ÐµÐ½ÑŒ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÑÐ»ÑÑ, Ð½Ð¾ Ñ‚Ñ‹ Ð±Ñ‹Ð» ÑÐ¸Ð»ÑŒÐ½ÐµÐµ!\nÐ˜ Ð²Ð¾Ñ‚ Ð½Ð°ÑÐºÐ¾Ð»ÑŒÐºÐ¾:",
            "Ð”ÐµÐ½ÑŒ Ð´ÑƒÐ¼Ð°Ð», Ñ‡Ñ‚Ð¾ Ð¾Ð½ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹. ÐžÑˆÐ¸Ð±ÑÑ!\nÐ’Ð¾Ñ‚ Ñ‚Ð²Ð¾Ð¸ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ:",
            "Ð¢Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑÐ²Ð½Ð¾ Ð¸Ð³Ñ€Ð°Ð» Ð½Ð° ÑÑ‚Ð¾Ñ€Ð¾Ð½Ðµ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾!\nÐ’Ð¾Ñ‚ Ñ‚Ð²Ð¾Ð¹ Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹Ñˆ:",
            "Ð¡ÐµÐ³Ð¾Ð´Ð½ÑÑˆÐ½Ð¸Ð¹ ÑƒÐ»Ð¾Ð².\nÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸, ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ:",
            "Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð´Ð½Ñ:\nÐ¢Ð²Ð¾Ð¸ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸ Ð·Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ:",
        ]
        intro = random.choice(report_headers)
        report = f"{random.choice(JOY_EMOJIS)} {intro}\n\n"
        for i, joy in enumerate(joys, 1):
            report += f"{i}. {joy}\n"
        report += "\nÐ¡Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸!"
    else:
        report = f"{random.choice(CALM_EMOJIS)} Ð”ÐµÐ½ÑŒ Ð¿Ð¾Ð´Ð¾ÑˆÑ‘Ð» Ðº ÐºÐ¾Ð½Ñ†Ñƒ. Ð—Ð°Ð²Ñ‚Ñ€Ð° Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ ÑˆÐ°Ð½Ñ!"

    send_message(chat_id, report)
    mark_reminder_sent(chat_id, "report")


def daily_scheduler():
    """ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ‚Ð¾Ðº Ð´Ð»Ñ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ñ… Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹ Ð¸ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð¾Ð²."""
    last_reminder_day = None
    last_report_day = None

    while True:
        now = datetime.now()
        today = now.date()

                # ÐÐ°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ Ð² 20:00
        if now.hour == 20 and now.minute == 0:
            if last_reminder_day != today:
                print(f"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ Ð² {now}")
                for user_id in get_all_user_ids():
                    try:
                        send_reminder(user_id)
                    except Exception as e:
                        print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ {user_id}: {e}")
                last_reminder_day = today
                time.sleep(61)
            else:
                time.sleep(30)

        # ÐžÑ‚Ñ‡Ñ‘Ñ‚ Ð² 22:00
        elif now.hour == 22 and now.minute == 0:
            if last_report_day != today:
                print(f"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹ Ð² {now}")
                for user_id in get_all_user_ids():
                    try:
                        send_daily_report(user_id)
                    except Exception as e:
                        print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ {user_id}: {e}")
                last_report_day = today
                time.sleep(61)
            else:
                time.sleep(30)

        else:
            time.sleep(30)


# --------------------------
# ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð¸ÐºÐ» Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
# --------------------------

def main_loop():
    """ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð¸ÐºÐ» Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹."""
    last_update_id = 0

    while True:
        try:
            updates = get_updates(last_update_id + 1 if last_update_id else None, POLL_TIMEOUT)

            for update in updates:
                update_id = update.get("update_id")
                if update_id is None:
                    continue

                # ÐŸÐ¾Ð¼ÐµÑ‡Ð°ÐµÐ¼ update ÐºÐ°Ðº Ð½Ð¾Ð²Ñ‹Ð¹. Ð•ÑÐ»Ð¸ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ â€” ÑƒÐ¶Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½.
                if not mark_update_processed(update_id):
                    print(f"Update {update_id} ÑƒÐ¶Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½, Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼")
                    continue

                if update_id > last_update_id:
                    last_update_id = update_id

                # ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
                if "message" in update:
                    msg = update["message"]
                    chat = msg.get("chat") or {}
                    chat_id = chat.get("id")
                    text = msg.get("text", "")

                    if chat_id and text is not None:
                        print(f"ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ {update_id}: '{text[:50]}...'")
                        handle_message(chat_id, text)

            time.sleep(POLL_SLEEP)

        except Exception as e:
            print(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼ Ñ†Ð¸ÐºÐ»Ðµ: {e}")
            time.sleep(POLL_SLEEP)

# --------------------------
# MAIN
# --------------------------

def main():
    print("Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð±Ð¾Ñ‚Ð°...")
    init_db()

    scheduler_thread = threading.Thread(target=daily_scheduler, daemon=True)
    scheduler_thread.start()

    main_loop()


if __name__ == "__main__":
    main()













