"""
Telegram-–±–æ—Ç "–î–Ω–µ–≤–Ω–∏–∫ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ä–∞–¥–æ—Å—Ç–µ–π".

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ–∫—Å—Ç—ã-—Ä–∞–¥–æ—Å—Ç–∏;
- –æ—á–∏—â–∞–µ—Ç –º–∞—Ç –∏ –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—É—é –ª–µ–∫—Å–∏–∫—É (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –∫–æ—Ä–Ω–µ–π);
- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞–¥–æ—Å—Ç–∏ –≤ SQLite;
- –ï–ñ–ï–î–ù–ï–í–ù–´–ô –†–ï–ñ–ò–ú:
    - –≤ 18:00 ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞ –¥–µ–Ω—å –Ω–µ –±—ã–ª–æ –Ω–∏ –æ–¥–Ω–æ–π —Ä–∞–¥–æ—Å—Ç–∏;
    - –≤ 21:00 ‚Äî –æ—Ç—á—ë—Ç —Å —Ä–∞–¥–æ—Å—Ç—è–º–∏ –∑–∞ —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è;
- –∑–∞—â–∏—Ç–∞ –æ—Ç —Ç–æ—Å–∫–∏: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –≥—Ä—É—Å—Ç—å, —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Ç—Ä–µ–≤–æ–≥—É, —Ç—è–∂—ë–ª—ã–µ —Ñ—Ä–∞–∑—ã;
- —Å–ø–æ–∫–æ–π–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã-–æ—Ç–≤–µ—Ç—ã —Å –æ–¥–Ω–∏–º —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ;
- —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–µ /stats;
- –ø–∏—Å—å–º–æ —Å–µ–±–µ –≤ –±—É–¥—É—â–µ–µ –ø–æ –∫–æ–º–∞–Ω–¥–µ /letter —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã /cancel;
- —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ –≥—Ä—É—Å—Ç–∏, —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —Ç—Ä–µ–≤–æ–≥–∏ –∏ ¬´–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å¬ª;
- –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π, –≤–∫–ª—é—á–∞—è –æ–ø–µ—á–∞—Ç–∫–∏ –∏ —Ä–∞—Å–∫–ª–∞–¥–∫—É;
- –æ—Ç—á—ë—Ç wantnow —Å–æ –≤—Å–µ–º–∏ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–º–∏ —Ä–∞–¥–æ—Å—Ç—è–º–∏;
- –Ω–∞ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç (–±–µ–∑ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Ä–µ–∞–∫—Ü–∏–π).
"""

import os
import time
import sqlite3
import threading
import random
import re
import json
from datetime import datetime, timedelta, date
from typing import List, Tuple, Optional, Dict

import requests

# --------------------------
# CONFIG
# --------------------------

TOKEN = os.getenv("TELEGRAM_TOKEN")
if not TOKEN:
    raise RuntimeError("–ù–µ –∑–∞–¥–∞–Ω TELEGRAM_TOKEN –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.")

API_URL = f"https://api.telegram.org/bot{TOKEN}"
DB_PATH = os.path.join(os.path.dirname(__file__), "joys.db")

POLL_TIMEOUT = 30
POLL_SLEEP = 1

# --------------------------
# –°–õ–û–í–ê–†–ò (–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
# --------------------------

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–∞—Ç–æ–≤ –∏ "–∂—ë—Å—Ç–∫–æ–π" –ª–µ–∫—Å–∏–∫–∏ (–∫–æ—Ä–Ω–∏)
BAD_WORDS = [
    "—Ö—É–π", "—Ö—É–∏", "—Ö—É–µ", "—Ö—É—ë", "—Ö—É—è", "—Ö—É–µ–º", "—Ö—É–π–Ω", "—Ö—É–∏—Ç", "—Ö—É—è—Ä",
    "—Ö–µ—Ä", "—Ö—Ä–µ–Ω", "—Ö—Ä–µ–Ω–∞", "—Ö—Ä–µ–Ω–æ–≤", "—Ö—Ä–µ–Ω–æ—Ç", "—Ö—Ä–µ–Ω–æ—Ç–µ–Ω—å",
    "–ø–∏–∑–¥", "–ø–∏–∑–¥–∞", "–ø–∏–∑–¥–µ—Ü", "–ø–µ–∑–¥", "–ø–∏–¥–æ—Ä", "–ø–∏–¥–∞—Ä", "–ø–µ–¥—Ä–∏–ª–∞",
    "–µ–±–∞", "–µ–±—É", "–µ–±—ë", "–µ–±–µ", "–µ–±–∞–Ω", "—ë–±–Ω", "–µ–±–ª–æ", "–µ–±–∞–ª—å–Ω", "–≤—ã–µ–±",
    "–µ–±–ª–∏—Å—å", "–µ–±—É—á", "–µ–±–∞–Ω—É—Ç", "–¥–æ–µ–±", "–∑–∞–µ–±", "–∑–∞—ë–±", "–∑–∞–∏–ø–∞–ª", "–∑–∞–∏–ø–∞–ª–∏",
    "—Å—É–∫–∞", "—Å—É–∫–∏", "—Å—É—á–∫", "—Å—É—á–∞—Ä", "—Å—É—á–æ–Ω–æ–∫",
    "–±–ª—è–¥", "–±–ª—è", "–±–ª—è—Ç", "–±–ª—è—Ö–∞", "–±–ª—è—Ö–∞-–º—É—Ö–∞", "–±–ª—è—Ö–∞ –º—É—Ö–∞",
    "–º—Ä–∞–∑—å", "—Ç–≤–∞—Ä—å", "—Ç–≤–∞—Ä–Ω", "—Å–∫–æ—Ç–∏–Ω–∞", "—É–±–ª—é–¥", "—É–µ–±–∫", "—É—ë–±–∫",
    "–≥–∞–Ω–¥–æ–Ω", "–ø—Ä–µ–∑–∏–∫", "–∫–æ–Ω—á–∞", "–∫–æ–Ω—á–µ–Ω–Ω—ã–π", "–∫–æ–Ω—á–µ–Ω—ã–π",
    "—Ö—É–π–Ω—è", "—Ö—É—ë–≤", "—Ö—Ä–µ–Ω–æ—Ç", "–≥–æ–≤–Ω–æ", "–≥–æ–≤–Ω", "–¥–µ—Ä—å–º", "—Å—Ä–∞–∫–∞",
    "—Å—É–∫–∞-–±–ª—è—Ç—å", "—Å—É–∫–∞ –±–ª—è—Ç—å", "–¥–æ–ª–±–æ–µ–±", "–¥–æ–ª–±–æ—ë–±", "–¥–µ–±–∏–ª", "–∏–¥–∏–æ—Ç",
    "–∫—Ä–µ—Ç–∏–Ω", "–º—É–¥–∞–∫", "–º—É–¥–∏–ª–∞", "—á–º–æ", "—á–º–æ—à–Ω", "–∫–æ–∑–ª–∏–Ω–∞", "—É—Ä–æ–¥", "—É—Ä–æ–¥–∏–Ω",
    "—à–ª—é—Ö", "–ø—Ä–æ—Å—Ç–∏—Ç—É—Ç", "—à–∞–ª–∞–≤", "—Ç—Ä–∞—Ö–∞", "—Ç—Ä–∞—Ö–Ω—É", "—Å—Ä–∞—Ç—å", "—Å—Ä–∞–ª", "–Ω–∞—Å—Ä–∞—Ç—å", "–Ω–∞—Å—Ä–∞–ª",
    "–±–µ—Å–∏—à—å", "–º–æ—Ä–¥–∞ –∫–∏—Ä–ø–∏—á–æ–º", "–∏–¥–∏ –≤ –∂–æ–ø—É", "–ø–æ—à–µ–ª –≤ –∂–æ–ø—É", "–ø–æ—à–ª–∞ –≤ –∂–æ–ø—É",
    "–±–ª—è—Ç—å", "–±–ª—è–¥—å", "–±–ª—è–¥–∏–Ω–∞", "–±–ª—è–¥—Å—Ç–≤–æ", "–±–ª—è–¥—é–≥–∞", "–µ–±–∏—Å—å", "—ë–±–∏—Å—å", "—ë–±–Ω—É—Ç—ã–π",
    "–≤—ã–µ–±–Ω—É–ª—Å—è", "–¥–æ–ª–±–∞—ë–±", "–¥–æ–ª–±–æ—ë–±–∏–Ω–∞", "–∑–∞–µ–±–∏—Å—å", "–∑–∞—ë–±–∏—Å—å", "–∑–∞–µ–±–∞–ª–∏", "–∑–∞–µ–±–∞–ª–æ",
    "–∑–∞–µ–±–∞–ª", "–∑–∞–µ–±–∞–ª–∞", "–∑–∞–µ–±–∞–Ω–Ω—ã–π", "–Ω–∞–µ–±–Ω—É—Ç—å—Å—è", "–Ω–∞–µ–±–∞—Ç—å", "–Ω–∞–µ–±–∞—Ç—å—Å—è",
    "–æ—Ç—ä–µ–±–∏—Å—å", "–æ—Ç—ä–µ–±–∏—â–µ", "–ø–æ–µ–±–∞—Ç—å", "–ø–æ–µ–±–µ–Ω—å", "–ø–æ–¥—ä–µ–±", "–ø–æ–¥—ä–µ–±–∞—Ç—å",
    "—Ä–∞–∑—ä–µ–±–∞—Ç—å", "—Ä–∞–∑—ä–µ–±–∞–Ω–Ω—ã–π", "—Å—ä–µ–±–∞—Ç—å", "—Å—ä–µ–±–∞—Ç—å—Å—è", "—É–µ–±–∞—Ç—å", "—É–µ–±–∞—Ç—å—Å—è", "—É—ë–±–∏—â–µ",
    "—Ö—É–µ–≤", "—Ö—É—ë–≤—ã–π", "—Ö—É—ë–≤–∏–Ω–∞", "—Ö—É–µ—Ç–∞", "—Ö—É–µ—Ç–µ–Ω—å", "—Ö—É–∏–ª–æ", "—Ö—É–∏–ª–∞", "—Ö—É–∏—â–µ",
    "—Ö—É–π–ª–æ", "—Ö—É–π–Ω—è", "—Ö—É–π—Ü–æ–≤–æ", "—Ö—É–π –∑–Ω–∞–µ—Ç", "–ø–æ—Ö—É–π", "–Ω–∞—Ö—É–π", "–Ω–∏—Ö—É—è", "–Ω–∏—Ö—É—è —Å–µ–±–µ",
    "–æ—Ö—É–µ—Ç—å", "–æ—Ö—É–∏—Ç–µ–ª—å–Ω–æ", "–ø–æ—Ö—É–∏—Å—Ç", "—Ö–µ—Ä–Ω—è", "—Ö–µ—Ä–æ–≤–æ", "—Ö–µ—Ä–æ–≤—ã–π", "—Ö–µ—Ä –∑–Ω–∞–µ—Ç",
    "–ø–∏–∑–¥–µ—Ü", "–ø–∏–∑–¥–µ—Ü–æ–≤—ã–π", "–ø–∏–∑–¥—ë–∂", "–ø–∏–∑–¥–æ–≤–∞—Ç—å", "–ø–∏–∑–¥–æ–ª–∏–∑", "–ø–∏–∑–¥–æ–ª—é–±",
    "–ø–∏–∑–¥–æ—Å—Ç—Ä–∞–¥–∞–ª–µ—Ü", "–ø–∏–∑–¥–æ—Ö–∞", "–ø–∏–∑–¥—é–∫", "–ø–∏–∑–¥—é–ª–∏–Ω–∞", "–ø–∏–∑–¥—é–ª—è", "—Ä–∞—Å–ø–∏–∑–¥—è–π",
    "—Å–ø–∏–∑–¥–∏—Ç—å", "—É–ø–∏–∑–¥–∏—Ç—å", "–±–∑–¥–µ—Ç—å", "–±–∑–¥–Ω—É—Ç—å", "–æ–±–æ—Å—Ä–∞—Ç—å", "–æ–±–æ—Å—Ä–∞—Ç—å—Å—è",
    "–ø–æ—Å—Ä–∞—Ç—å", "—Å—Ä–∞–∫–∞", "—Å—Ä–∞–∫—É", "—Å—Ä–∞–Ω—ã–π", "—Å—Ä–∞–Ω—å", "—Å—Ä–∞—á", "—Å—Ä–∞—á–∫–∞",
    "–∑–∞—Å—Ä–∞–Ω–µ—Ü", "–∑–∞—Å—Ä–∞–Ω–∫–∞", "–ø–µ—Ä–¥–µ—Ç—å", "–ø–µ—Ä–¥—É–Ω", "–ø–µ—Ä–¥—É–Ω—å—è", "–ø–µ—Ä–¥–∞–∫",
    "–¥–µ—Ä—å–º–æ", "–¥–µ—Ä—å–º–æ–≤—ã–π", "–∑–∞–ª—É–ø–∞", "–∑–∞–ª—É–ø–µ–Ω—å", "–º—É—Å–æ—Ä", "–º—É—Å–æ—Ä–Ω—ã–π",
    "–æ—Ç–±—Ä–æ—Å", "–ø–∞–¥–ª–∞", "–ø–∞–¥–ª—é–∫–∞", "—Å–≤–æ–ª–æ—á—å", "—Å–≤–æ–ª–æ—á–∏", "—Å—Ç–µ—Ä–≤–∞", "—Å—Ç–µ—Ä–≤–æ–∑–∞",
    "—Ç–≤–∞—Ä–∏–Ω–∞", "—É–±–ª—é–¥–æ–∫", "—É—Ä–æ–¥–∏–Ω–∞", "—É—Ä–æ–¥–∫–∞", "–≤—ã—Ä–æ–¥–æ–∫", "–¥–µ–≥–µ–Ω–µ—Ä–∞—Ç",
    "–¥–µ–±–∏–ª–æ–∏–¥", "–∏–º–±–µ—Ü–∏–ª", "–æ–ª–∏–≥–æ—Ñ—Ä–µ–Ω", "–¥–∞—É–Ω", "–¥–∞—É–Ω—è—Ä–∞", "–æ—Ç–º–æ—Ä–æ–∑–æ–∫",
    "–ø–æ–≥–∞–Ω—å", "–ø–æ–≥–∞–Ω—ã–π", "–ø–æ–¥–æ–Ω–æ–∫", "–ø–æ–¥–æ–Ω–∫–∏", "–ø–æ–¥–ª–µ—Ü", "–ø–æ–¥–ª—ã–π",
    "–ø—Ä–µ–¥–∞—Ç–µ–ª—å", "–ø—Ä–æ–¥–∞–∂–Ω—ã–π", "–ø—Ä–æ–¥–∞–∂–Ω–∏–∫", "—Å—É–∫–∏–Ω —Å—ã–Ω", "—Å—É–∫–∏–Ω–∞ –¥–æ—á—å",
    "–µ–±–∞–Ω—ã–π –≤ —Ä–æ—Ç", "—ë–±–∞–Ω—ã–π –≤ —Ä–æ—Ç", "—ë–± —Ç–≤–æ—é –º–∞—Ç—å", "–ø–æ—à—ë–ª –Ω–∞ —Ö—É–π", "–ø–æ—à–ª–∞ –Ω–∞ —Ö—É–π",
    "–∏–¥–∏ –Ω–∞ —Ö—É–π", "–ø–æ—à—ë–ª –≤ –ø–∏–∑–¥—É", "–∏–¥–∏ –≤ –ø–∏–∑–¥—É", "–ø–æ—à—ë–ª –∫ —á—ë—Ä—Ç—É", "–∏–¥–∏ –∫ —á—ë—Ä—Ç—É",
    "—á—ë—Ä—Ç –ø–æ–±–µ—Ä–∏", "—á—ë—Ä—Ç –≤–æ–∑—å–º–∏", "–¥—å—è–≤–æ–ª", "—Å–∞—Ç–∞–Ω–∞", "–∞–¥", "–ø—Ä–æ–∫–ª—è—Ç–∏–µ",
    "–ø—Ä–æ–∫–ª—è—Ç—ã–π", "–ø—Ä–æ–∫–ª—è—Ç–∞—è", "–∞–¥–æ–≤—ã–π", "–∞–¥—Å–∫–∏–π", "–¥—å—è–≤–æ–ª—å—Å–∫–∏–π", "–±–µ—Å–æ–≤—Å–∫–∏–π",
    "–±–µ—Å", "–Ω–µ—á–∏—Å—Ç—å", "—á–µ—Ä—Ç–æ–≤", "—á—ë—Ä—Ç–æ–≤", "–æ–∫–∞—è–Ω–Ω—ã–π", "–≥—Ä–µ—Ö–æ–≤–Ω—ã–π", "–≥—Ä–µ—à–Ω—ã–π",
    "–ø–æ—Ä–æ—á–Ω—ã–π", "—Ä–∞–∑–≤—Ä–∞—Ç–Ω—ã–π", "–±–ª—É–¥", "–±–ª—É–¥–Ω–∏–∫", "–±–ª—É–¥–Ω–∏—Ü–∞", "–ø–æ—Ö–æ—Ç–ª–∏–≤—ã–π",
    "—Å–ª–∞–¥–æ—Å—Ç—Ä–∞—Å—Ç–Ω—ã–π", "–ø–æ—Ö–æ—Ç—å", "–≤–æ–∂–¥–µ–ª–µ–Ω–∏–µ", "—Å—Ä–∞–º", "—Å—Ä–∞–º–Ω–æ–π", "—Å–∫–≤–µ—Ä–Ω–æ—Å–ª–æ–≤–∏–µ",
    "–º–∞—Ç–µ—Ä—â–∏–Ω–Ω–∏–∫", "–º–∞—Ç–µ—Ä—â–∏–Ω–∞", "–º–∞—Ç–µ—Ä–Ω—ã–π", "–Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—ã–π", "–Ω–µ–ø–µ—á–∞—Ç–Ω—ã–π",
    "–Ω–µ–ø—Ä–∏–ª–∏—á–Ω—ã–π", "–Ω–µ–ø—Ä–∏—Å—Ç–æ–π–Ω—ã–π", "–Ω–µ–ø–æ—Ç—Ä–µ–±–Ω—ã–π", "–≤—É–ª—å–≥–∞—Ä–Ω—ã–π", "–≥—Ä—É–±—ã–π",
    "—Ö–∞–º—Å–∫–∏–π", "–Ω–∞—Ö–∞–ª—å–Ω—ã–π", "–Ω–∞–≥–ª—ã–π", "–±–µ—Å—Å—Ç—ã–∂–∏–π", "–±–µ—Å–ø–∞—Ä–¥–æ–Ω–Ω—ã–π", "–Ω–∞–≥–ª–µ—Ü",
    "–Ω–∞—Ö–∞–ª", "—Ö–∞–º", "–≥—Ä—É–±–∏—è–Ω", "–Ω–µ–≤–µ–∂–∞", "–Ω–µ–≤–æ—Å–ø–∏—Ç–∞–Ω–Ω—ã–π", "–Ω–µ–∫—É–ª—å—Ç—É—Ä–Ω—ã–π",
    "–¥–µ—Ä–µ–≤–µ–Ω—â–∏–Ω–∞", "–±—ã–¥–ª–æ", "–ø–ª–µ–±–µ–π", "—á–µ—Ä–Ω—å", "–ø—Ä–æ—Å—Ç–æ–Ω–∞—Ä–æ–¥—å–µ", "—Å–æ–≤–∫–æ–≤—ã–π",
    "—Å–æ–≤–æ–∫", "–≤–∞—Ç–Ω–∏–∫", "–≥–æ–º–æ—Ñ–æ–±", "—Ç—Ä–∞–Ω—Å—Ñ–æ–±", "—Ä–∞—Å–∏—Å—Ç", "–Ω–∞—Ü–∏—Å—Ç", "—Ñ–∞—à–∏—Å—Ç",
    "—à–æ–≤–∏–Ω–∏—Å—Ç", "–∫—Å–µ–Ω–æ—Ñ–æ–±", "–∞–Ω—Ç–∏—Å–µ–º–∏—Ç", "–º–∏–∑–æ–≥–∏–Ω", "—ç–π–¥–∂–∏—Å—Ç", "–¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä",
    "—É–≥–Ω–µ—Ç–∞—Ç–µ–ª—å", "—ç–∫—Å–ø–ª—É–∞—Ç–∞—Ç–æ—Ä", "—Ç–∏—Ä–∞–Ω", "–¥–µ—Å–ø–æ—Ç", "–¥–∏–∫—Ç–∞—Ç–æ—Ä", "—Ç–æ—Ç–∞–ª–∏—Ç–∞—Ä–∏—Å—Ç",
    "—Ä–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã–π", "—Ü–µ–Ω–∑—É—Ä–∞", "–ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∏—Å—Ç", "–¥–µ–º–∞–≥–æ–≥", "–ø–æ–ø—É–ª–∏—Å—Ç", "—Ñ–∞–Ω–∞—Ç–∏–∫",
    "—ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç", "—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç", "—Å–µ–ø–∞—Ä–∞—Ç–∏—Å—Ç", "–∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–æ–Ω–∏—Å—Ç", "—à–ø–∏–æ–Ω",
    "–¥–∏–≤–µ—Ä—Å–∞–Ω—Ç", "—Å–∞–±–æ—Ç–∞–∂–Ω–∏–∫", "–≤—Ä–µ–¥–∏—Ç–µ–ª—å", "–∏–∑–º–µ–Ω–Ω–∏–∫", "–ø—Ä–µ–¥–∞—Ç–µ–ª—å —Ä–æ–¥–∏–Ω—ã",
    "–≤—Ä–∞–≥ –Ω–∞—Ä–æ–¥–∞", "–¥–∏—Å—Å–∏–¥–µ–Ω—Ç", "–∏–Ω–∞–∫–æ–º—ã—Å–ª—è—â–∏–π", "–µ—Ä–µ—Ç–∏–∫", "–æ—Ç—Å—Ç—É–ø–Ω–∏–∫",
    "–±–æ–≥–æ—Ö—É–ª—å–Ω–∏–∫", "–∫–æ—â—É–Ω–Ω–∏–∫", "—Å–≤—è—Ç–æ—Ç–∞—Ç–µ—Ü", "–Ω–µ—á–µ—Å—Ç–∏–≤–µ—Ü"
]

# –ì—Ä—É—Å—Ç—å, —Ç–æ—Å–∫–∞, –ø—É—Å—Ç–æ—Ç–∞, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ (—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–∫—Ä–∞—â–µ–Ω–æ)
SAD_PATTERNS = [
    "–Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ –Ω–µ –±—ã–ª–æ", "–Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –±—ã–ª–æ", "–Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ",
    "–Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–¥—É–µ—Ç", "–Ω–∏—á—Ç–æ –Ω–µ —Ä–∞–¥—É–µ—Ç", "–≤—Å—ë –ø–ª–æ—Ö–æ", "–≤—Å–µ –ø–ª–æ—Ö–æ", "–≤—Å–µ —É–∂–∞—Å–Ω–æ",
    "–≤—Å—ë —É–∂–∞—Å–Ω–æ", "—Å–æ–≤—Å–µ–º –ø–ª–æ—Ö–æ", "—É–∂–∞—Å–Ω—ã–π –¥–µ–Ω—å", "–æ—Ç–≤—Ä–∞—Ç–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å", "–¥–µ–Ω—å –≥–æ–≤–Ω–æ",
    "–¥–µ–Ω—å –æ—Ç—Å—Ç–æ–π", "–¥–µ–Ω—å –±—ã–ª —É–∂–∞—Å–Ω—ã–π", "–¥–µ–Ω—å –Ω–µ –∑–∞–¥–∞–ª—Å—è", "–¥–µ–Ω—å –∫–æ—Ç—É –ø–æ–¥ —Ö–≤–æ—Å—Ç",
    "–≤—Å—ë –±–µ—Å–∏—Ç", "–≤—Å–µ –±–µ—Å–∏—Ç", "–≤—Å–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç", "–≤—Å—ë —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç", "–ø–ª–æ—Ö–æ", "–æ—á–µ–Ω—å –ø–ª–æ—Ö–æ",
    "–∫—Ä–∞–π–Ω–µ –ø–ª–æ—Ö–æ", "—Ç—è–∂–µ–ª–æ", "–æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ", "–¥—É—à–Ω–æ –≤–Ω—É—Ç—Ä–∏", "–≥—Ä—É—Å—Ç–Ω–æ", "–æ—á–µ–Ω—å –≥—Ä—É—Å—Ç–Ω–æ",
    "–º–Ω–µ –≥—Ä—É—Å—Ç–Ω–æ", "–º–Ω–µ –æ—á–µ–Ω—å –≥—Ä—É—Å—Ç–Ω–æ", "—Ç–æ—Å–∫–ª–∏–≤–æ", "–º–Ω–µ —Ç–æ—Å–∫–ª–∏–≤–æ", "—Ö—Ä–µ–Ω–æ–≤–æ", "—Ñ–∏–≥–æ–≤–æ",
    "–æ—Ç—Å—Ç–æ–π–Ω–æ", "–º–µ—Ä–∑–∫–æ –Ω–∞ –¥—É—à–µ", "–¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω–æ", "–¥–µ–ø—Ä–µ—Å—Å–∏—è –Ω–∞–∫—Ä—ã–ª–∞", "–¥–µ–ø—Ä–µ—Å—Å–Ω—è–∫",
    "–¥—É—à–∞ –Ω–æ–µ—Ç", "–Ω–∏—á–µ–≥–æ –Ω–µ —Ö–æ—á–µ—Ç—Å—è", "–Ω–µ —Ö–æ—á—É –Ω–∏—á–µ–≥–æ", "–Ω–∏—á–µ–≥–æ –Ω–µ –º–æ–≥—É", "–Ω–µ—Ç –∂–µ–ª–∞–Ω–∏—è –≤–æ–æ–±—â–µ",
    "–Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è", "—É–∂–∞—Å", "—Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ", "—Å–ø–ª–æ—à–Ω–æ–µ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ", "–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ",
    "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –æ–¥–∏–Ω–æ–∫–æ", "–º–Ω–µ –æ–¥–∏–Ω–æ–∫–æ", "—è –æ–¥–Ω–∞", "—è –æ–¥–∏–Ω", "–æ—Å—Ç–∞–ª–∞—Å—å –æ–¥–Ω–∞", "–æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω",
    " –Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–Ω–∞", "–Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–µ–Ω", "–º–µ–Ω—è –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç", " –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç",
    "–º–µ–Ω—è –Ω–µ —Å–ª—ã—à–∞—Ç", "—è —Ä–µ–≤—É", "—è –ø–ª–∞—á—É", "—Ö–æ—á—É –ø–ª–∞–∫–∞—Ç—å", "–ø–ª–∞–∫–∞—Ç—å —Ö–æ—á–µ—Ç—Å—è", "—Ä—ã–¥–∞—é",
    "–æ–ø—è—Ç—å —Å–æ—Ä–≤–∞–ª–∞—Å—å –≤ —Å–ª–µ–∑—ã", "–æ–ø—è—Ç—å –ø–ª–∞—á—É", "—Å–µ—Ä–¥—Ü–µ –±–æ–ª–∏—Ç", "–Ω–∞ –¥—É—à–µ —Ç—è–∂–µ–ª–æ", "–Ω–∞ –¥—É—à–µ –ø—É—Å—Ç–æ",
    "–≤–Ω—É—Ç—Ä–∏ –ø—É—Å—Ç–æ", "–∫–∞–∫ –±—É–¥—Ç–æ –ø—É—Å—Ç–æ—Ç–∞", "–æ—á–µ–Ω—å –ø—É—Å—Ç–æ –≤–Ω—É—Ç—Ä–∏", "–Ω–µ –≤–∏–∂—É —Ä–∞–¥–æ—Å—Ç–∏", "—Ä–∞–¥–æ—Å—Ç–∏ –Ω–µ—Ç",
    "–Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ", "–Ω–µ –∑–∞ —á—Ç–æ –∑–∞—Ü–µ–ø–∏—Ç—å—Å—è", "–Ω–µ –∫ —á–µ–º—É –ø—Ä–∏–∂–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏", "–≤—Å–µ —Å–µ—Ä–æ–µ",
    "—Å–ø–ª–æ—à–Ω–∞—è —Å–µ—Ä–∞—è –º–∞—Å—Å–∞", "–æ—â—É—â–µ–Ω–∏–µ –±–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç–∏", "–±–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç—å", "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —Ä–∞–∑–±–∏—Ç–æ–π",
    "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —Ä–∞–∑–±–∏—Ç—ã–º", "—Ä–∞–∑–±–∏—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ", "–≤—Å–µ –ø—Ä–æ–ø–∞–ª–æ", "–≤—Å—ë –ø—Ä–æ–ø–∞–ª–æ", "–≤—Å–µ –∫–æ–Ω—á–µ–Ω–æ",
    "–≤—Å—ë –∫–æ–Ω—á–µ–Ω–æ", "–Ω–µ—Ç –≤—ã—Ö–æ–¥–∞", "–Ω–µ –≤–∏–∂—É –≤—ã—Ö–æ–¥–∞", "–±–µ–∑–≤—ã—Ö–æ–¥–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è", "–æ–ø—É—Å–∫–∞—é—Ç—Å—è —Ä—É–∫–∏",
    "—Ä—É–∫–∏ –æ–ø—É—Å–∫–∞—é—Ç—Å—è", "–æ–ø—É—Å—Ç–∏–ª —Ä—É–∫–∏", "–æ–ø—É—Å—Ç–∏–ª–∞ —Ä—É–∫–∏", "–Ω–µ—Ç –Ω–∞–¥–µ–∂–¥—ã", "–Ω–∞–¥–µ–∂–¥—ã –Ω–µ—Ç",
    "–ø–æ—Ç–µ—Ä—è–ª –Ω–∞–¥–µ–∂–¥—É", "–ø–æ—Ç–µ—Ä—è–ª–∞ –Ω–∞–¥–µ–∂–¥—É", "–≤—Å–µ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ", "–≤—Å—ë –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ",
    "–∂–∏–∑–Ω—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–∞", "–Ω–µ—Ç —Å–∏–ª –±–æ—Ä–æ—Ç—å—Å—è", "–Ω–µ –º–æ–≥—É –±–æ—Ä–æ—Ç—å—Å—è", "—É—Å—Ç–∞–ª –±–æ—Ä–æ—Ç—å—Å—è",
    "—É—Å—Ç–∞–ª–∞ –±–æ—Ä–æ—Ç—å—Å—è", "–≤—Å–µ –Ω–∞–¥–æ–µ–ª–æ", "–≤—Å—ë –Ω–∞–¥–æ–µ–ª–æ", "–∂–∏–∑–Ω—å –Ω–∞–¥–æ–µ–ª–∞", "–≤—Å–µ –¥–æ—Å—Ç–∞–ª–æ",
    "–Ω–µ—Ç —Ä–∞–¥–æ—Å—Ç–∏", "—Ä–∞–¥–æ—Å—Ç–∏ –Ω–µ —á—É–≤—Å—Ç–≤—É—é", "–Ω–µ –º–æ–≥—É —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è", "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–ª–∞—á—É",
    "—Å–ª–µ–∑—ã –Ω–∞–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è", "–≥–æ—Ç–æ–≤ —Ä–∞—Å–ø–ª–∞–∫–∞—Ç—å—Å—è", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –±–æ–ª—å", "–¥—É—à–µ–≤–Ω–∞—è –±–æ–ª—å",
    "–±–æ–ª—å –≤ –¥—É—à–µ", "—Å–µ—Ä–¥—Ü–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è", "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ–Ω—É–∂–Ω—ã–º", "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ–Ω—É–∂–Ω–æ–π",
    "–æ—â—É—â–∞—é —Å–≤–æ—é –Ω–µ–Ω—É–∂–Ω–æ—Å—Ç—å", " –Ω–∏–∫—Ç–æ –Ω–µ —Ü–µ–Ω–∏—Ç", "–º–µ–Ω—è –Ω–µ —Ü–µ–Ω–∏—Ç", "–Ω–µ —Ü–µ–Ω—è—Ç –º–æ–∏ —É—Å–∏–ª–∏—è",
    "–ø–æ—Ç–µ—Ä—è–ª —Å–º—ã—Å–ª", "–ø–æ—Ç–µ—Ä—è–ª–∞ —Å–º—ã—Å–ª", "—Å–º—ã—Å–ª –∂–∏–∑–Ω–∏ –ø–æ—Ç–µ—Ä—è–Ω", "–≤—Å–µ –≤–∞–ª–∏—Ç—Å—è –∏–∑ —Ä—É–∫",
    "–≤—Å—ë –≤–∞–ª–∏—Ç—Å—è –∏–∑ —Ä—É–∫", "–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è", "–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –Ω–µ—É–¥–∞—á–∏", "–æ–¥–Ω–∏ –Ω–µ—É–¥–∞—á–∏",
    "–Ω–µ –≤–µ–∑–µ—Ç", "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ—É–¥–∞—á–Ω–∏–∫–æ–º", "—è –Ω–µ—É–¥–∞—á–Ω–∏–∫", "—è –Ω–µ—É–¥–∞—á–Ω–∏—Ü–∞", "–≤—Å–µ –ø—Ä–æ—Ç–∏–≤ –º–µ–Ω—è",
    "–≤—Å—ë –ø—Ä–æ—Ç–∏–≤ –º–µ–Ω—è", "–º–∏—Ä –ø—Ä–æ—Ç–∏–≤ –º–µ–Ω—è", "–Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ", "–∂–∏–∑–Ω—å –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞",
    "–≤—Å–µ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ", "–ø–æ—Ç–µ—Ä—è–ª –≤–µ—Ä—É", "–ø–æ—Ç–µ—Ä—è–ª–∞ –≤–µ—Ä—É", "–≤–µ—Ä–∞ –ø–æ—Ç–µ—Ä—è–Ω–∞", "–≤—Å–µ —Ä—É—Ö–Ω—É–ª–æ",
    "–≤—Å—ë —Ä—É—Ö–Ω—É–ª–æ", "–º–∏—Ä —Ä—É—Ö–Ω—É–ª", "–Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏", "–Ω–µ –Ω–∞ –∫–æ–≥–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è", "–Ω–µ–∫–æ–º—É –ø–æ–º–æ—á—å",
    "–æ–¥–∏–Ω –Ω–∞ –æ–¥–∏–Ω —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏", "–æ–¥–Ω–∞ –Ω–∞ –æ–¥–Ω–∞ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏", "–≤—Å–µ —Å–ª–æ–∂–Ω–æ", "–≤—Å—ë —Å–ª–æ–∂–Ω–æ",
    "—Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ", "–Ω–µ –º–æ–≥—É —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è", "–Ω–µ —Å–ø—Ä–∞–≤–ª—è—é—Å—å", "–Ω–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞—é", "–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Å—Ç—Ä–µ—Å—Å",
    "—Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç—Ä–µ—Å—Å", "–∂–∏–≤—É –≤ —Å—Ç—Ä–µ—Å—Å–µ", "–Ω–µ—Ç –ø–æ–∫–æ—è", "–ø–æ–∫–æ—è –Ω–µ—Ç", "–Ω–µ –º–æ–≥—É —É—Å–ø–æ–∫–æ–∏—Ç—å—Å—è",
    "–≤—Å–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç", "–≤—Å—ë —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç", "—Ä–∞–∑–¥—Ä–∞–∂–∞—é—Ç –≤—Å–µ", "–Ω–µ—Ç —Ç–µ—Ä–ø–µ–Ω–∏—è", "—Ç–µ—Ä–ø–µ–Ω–∏—è –Ω–µ—Ç",
    "–ø–æ—Ç–µ—Ä—è–ª —Ç–µ—Ä–ø–µ–Ω–∏–µ", "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –∑–∞–≥–Ω–∞–Ω–Ω—ã–º", "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –∑–∞–≥–Ω–∞–Ω–Ω–æ–π", "–≤ —Ç—É–ø–∏–∫–µ",
    "–∑–∞—à–µ–ª –≤ —Ç—É–ø–∏–∫", "–∑–∞—à–ª–∞ –≤ —Ç—É–ø–∏–∫", "–Ω–µ—Ç –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤", "–ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤ –Ω–µ—Ç", "–±—É–¥—É—â–µ–µ –ø—É–≥–∞–µ—Ç"
]

# –£—Å—Ç–∞–ª–æ—Å—Ç—å, –≤—ã–≥–æ—Ä–∞–Ω–∏–µ
TIRED_PATTERNS = [
    "—É—Å—Ç–∞–ª–∞", "—É—Å—Ç–∞–ª", "—è —Ç–∞–∫ —É—Å—Ç–∞–ª–∞", "—è —Ç–∞–∫ —É—Å—Ç–∞–ª", "–æ—á–µ–Ω—å —É—Å—Ç–∞–ª–∞", "–æ—á–µ–Ω—å —É—Å—Ç–∞–ª",
    "—Å–∏–ª—å–Ω–æ —É—Å—Ç–∞–ª–∞", "—Å–∏–ª—å–Ω–æ —É—Å—Ç–∞–ª", "—Å–µ–≥–æ–¥–Ω—è –≤–æ–æ–±—â–µ –±–µ–∑ —Å–∏–ª", "—Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç —Å–∏–ª", "—Å–∏–ª –Ω–µ—Ç",
    "–Ω–µ—Ç —Å–∏–ª", "–Ω–∏ –Ω–∞ —á—Ç–æ –Ω–µ—Ç —Å–∏–ª", "—Å–æ–≤—Å–µ–º –Ω–µ—Ç —Å–∏–ª", "–Ω–∏ –∫–∞–ø–ª–∏ —Å–∏–ª", "—è –≤—ã–º–æ—Ç–∞–ª–∞—Å—å", "—è –≤—ã–º–æ—Ç–∞–ª—Å—è",
    "–≤—ã–º–æ—Ç–∞–ª–∞—Å—å", "–≤—ã–º–æ—Ç–∞–ª—Å—è", "–≤—ã–≥–æ—Ä–µ–ª–∞", "–≤—ã–≥–æ—Ä–µ–ª", " —è –≤—ã–≥–æ—Ä–µ–ª–∞", " —è –≤—ã–≥–æ—Ä–µ–ª", "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–≥–æ—Ä–µ–ª–∞",
    "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–≥–æ—Ä–µ–ª", "–º–æ—Ä–∞–ª—å–Ω–æ —É—Å—Ç–∞–ª–∞", "–º–æ—Ä–∞–ª—å–Ω–æ —É—Å—Ç–∞–ª", "—è –æ—á–µ–Ω—å —É—Å—Ç–∞–ª–∞ –º–æ—Ä–∞–ª—å–Ω–æ",
    "—è –æ—á–µ–Ω—å —É—Å—Ç–∞–ª –º–æ—Ä–∞–ª—å–Ω–æ", "–æ–±–µ—Å—Å–∏–ª–µ–Ω–∞", "–æ–±–µ—Å—Å–∏–ª–µ–Ω", "–æ–±–µ—Å—Å–∏–ª–µ–Ω–Ω—ã–π", "–æ–±–µ—Å—Å–∏–ª–µ–Ω–Ω–∞—è", "–º–Ω–µ —Ç—è–∂–µ–ª–æ",
    "–æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ", "–Ω–µ–≤—ã–Ω–æ—Å–∏–º–æ —Ç—è–∂–µ–ª–æ", "—á—É–≤—Å—Ç–≤—É—é —Å–∏–ª—å–Ω—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å", "—á—É–≤—Å—Ç–≤—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å",
    "–Ω–∏–∫–∞–∫–∏—Ö —Å–∏–ª", "—Å–∏–ª –±—É–∫–≤–∞–ª—å–Ω–æ –Ω–æ–ª—å", "–ø—É—Å—Ç–∞—è –∫–∞–∫ –≤—ã–∂–∞—Ç—ã–π –ª–∏–º–æ–Ω", "–∫–∞–∫ –≤—ã–∂–∞—Ç—ã–π –ª–∏–º–æ–Ω",
    "–ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏", "—ç–Ω–µ—Ä–≥–∏—è –Ω–∞ –Ω—É–ª–µ", "–∏—Å—Ç–æ—â–µ–Ω–∞", "–∏—Å—Ç–æ—â–µ–Ω", "–æ—á–µ–Ω—å –∏—Å—Ç–æ—â–µ–Ω–∞", "–æ—á–µ–Ω—å –∏—Å—Ç–æ—â–µ–Ω",
    "–Ω–µ –º–æ–≥—É –±–æ–ª—å—à–µ", "–Ω–µ –º–æ–≥—É —Ç—è–Ω—É—Ç—å", "–Ω–µ —Ç—è–Ω—É", "–Ω–µ —Ö–æ—á—É –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å", "–Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–∞",
    "–Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–∞ –≤–æ–æ–±—â–µ", "–Ω–∞–¥–æ–µ–ª–æ –≤—Å–µ —Ç–∞—â–∏—Ç—å", "—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–∞–≥—Ä—É–∑–∫–∏", "–Ω–µ—Ç –±–æ–ª—å—à–µ —Å–∏–ª",
    "—Å–∏–ª—ã –Ω–∞ –∏—Å—Ö–æ–¥–µ", "–Ω–∞ –ø—Ä–µ–¥–µ–ª–µ", "–≤—ã–∂–∞—Ç–∞ –∫–∞–∫ –ª–∏–º–æ–Ω", "–≤—ã–∂–∞—Ç –∫–∞–∫ –ª–∏–º–æ–Ω", "–≤—ã–∂–∞—Ç—ã–π –ª–∏–º–æ–Ω",
    "–±–∞—Ç–∞—Ä–µ–π–∫–∞ —Å–µ–ª–∞", "—ç–Ω–µ—Ä–≥–∏—è –Ω–∞ –Ω—É–ª–µ", "—Ä–∞–∑—Ä—è–¥–∏–ª—Å—è", "—É–ø–∞–¥–æ–∫ —Å–∏–ª", "—É–ø–∞–¥–æ–∫ —ç–Ω–µ—Ä–≥–∏–∏", "–Ω–µ—Ç –±–æ–¥—Ä–æ—Å—Ç–∏",
    "–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å", "—Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å", "—Å–∏–Ω–¥—Ä–æ–º —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏", "—Ü—Ñ—Å",
    "—Ñ–∏–±—Ä–æ–º–∏–∞–ª–≥–∏—è", "–±–æ–ª–∏ –æ—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏", "–º—ã—à–µ—á–Ω–∞—è —Å–ª–∞–±–æ—Å—Ç—å", "–Ω–æ–≥–∏ –Ω–µ –¥–µ—Ä–∂–∞—Ç", "—Ä—É–∫–∏ –Ω–µ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è",
    "—Ç—è–∂–µ–ª–æ –¥–≤–∏–≥–∞—Ç—å—Å—è", "–Ω–µ—Ç —Ç–æ–Ω—É—Å–∞", "–º—ã—à—Ü—ã –≤—è–ª—ã–µ", "—Ç–µ–ª–æ –≤–∞—Ç–Ω–æ–µ", "—Ä–∞–∑–±–∏—Ç–æ—Å—Ç—å", "–æ—â—É—â–µ–Ω–∏–µ —Ä–∞–∑–±–∏—Ç–æ–Ω–æ—Å—Ç–∏",
    "—Ä–∞–∑–±–∏—Ç—ã–π –∫–æ—Ä—ã—Ç–æ–º", "—Ä–∞–∑–±–∏—Ç–∞—è –∫–æ—Ä—ã—Ç–æ–º", "—É—Å—Ç–∞–ª –∫–∞–∫ —Å–æ–±–∞–∫–∞", "—É—Å—Ç–∞–ª–∞ –∫–∞–∫ —Å–æ–±–∞–∫–∞", "—É—Å—Ç–∞–ª–æ—Å—Ç—å —Å —É—Ç—Ä–∞",
    "–ø—Ä–æ—Å—ã–ø–∞—é—Å—å —É—Å—Ç–∞–≤—à–∏–º", "–Ω–µ –≤—ã—Å–ø–∞–ª–∞—Å—å", "–Ω–µ –≤—ã—Å–ø–∞–ª—Å—è", "–Ω–µ–¥–æ—Å—ã–ø", "–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞", "–ø–ª–æ—Ö–æ —Å–ø–ª—é",
    "–Ω–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞", "–ø—Ä–µ—Ä—ã–≤–∏—Å—Ç—ã–π —Å–æ–Ω", "–Ω–µ –º–æ–≥—É —É—Å–Ω—É—Ç—å", "—Ä–∞–Ω–Ω–µ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ", "–¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å",
    "—Ö–æ—á–µ—Ç—Å—è —Å–ø–∞—Ç—å –¥–Ω–µ–º", "–∑–∞—Å—ã–ø–∞—é –Ω–∞ —Ö–æ–¥—É", "–∫–ª—é—é –Ω–æ—Å–æ–º", "–±–æ—Ä—é—Å—å —Å–æ —Å–Ω–æ–º", "–∫–æ—Ñ–µ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç",
    "—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç", "–Ω–µ—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏", "–Ω–µ –º–æ–≥—É —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è", "–º–æ–∑–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç",
    "–º—ã—Å–ª–∏ –ø—É—Ç–∞—é—Ç—Å—è", "—Ç—É–º–∞–Ω –≤ –≥–æ–ª–æ–≤–µ", "–º–æ–∑–≥–æ–≤–æ–π —Ç—É–º–∞–Ω", "–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è", "–ø–∞–º—è—Ç—å —É—Ö—É–¥—à–∏–ª–∞—Å—å",
    "–≤–Ω–∏–º–∞–Ω–∏–µ —Ä–∞—Å—Å–µ—è–Ω–æ", "—Ä–∞—Å—Å–µ—è–Ω–Ω–æ—Å—Ç—å", "–∑–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å", "–≤—Å–µ –∑–∞–±—ã–≤–∞—é", "–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–æ–±—Ä–∞–∂–∞—é",
    "—Ç—É–≥–æ –¥—É–º–∞–µ—Ç—Å—è", "—É–º—Å—Ç–≤–µ–Ω–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å", "–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ", "—Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ",
    "–Ω–µ—Ç –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è", "–≤—ã–≥–æ—Ä–∞–Ω–∏–µ –Ω–∞ —Ä–∞–±–æ—Ç–µ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ", "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ",
    "–Ω–µ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–ª", "–∞–ø–∞—Ç–∏—è", "–±–µ–∑—Ä–∞–∑–ª–∏—á–∏–µ", "–Ω–∏—á–µ–≥–æ –Ω–µ —á—É–≤—Å—Ç–≤—É—é", "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—É—Å—Ç–æ—Ç–∞",
    "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –ø—É—Å—Ç—ã–º", "–Ω–µ—Ç –º–æ—Ç–∏–≤–∞—Ü–∏–∏", "–¥–µ–º–æ—Ç–∏–≤–∞—Ü–∏—è", "–Ω–∏—á–µ–≥–æ –Ω–µ —Ö–æ—á–µ—Ç—Å—è", "–ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è",
    "–æ—Ç–∫–ª–∞–¥—ã–≤–∞—é –≤—Å–µ", "–Ω–µ –º–æ–≥—É –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è", "–Ω–µ—Ç –≤–æ–ª–∏", "—Å–∏–ª–∞ –≤–æ–ª–∏ –Ω–∞ –Ω—É–ª–µ", "—Å–∞–º–æ–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç",
    "–ª–µ–Ω—å", "–ª–µ–Ω—å —á—Ç–æ-–ª–∏–±–æ –¥–µ–ª–∞—Ç—å", "–æ–±—â–∞—è –ª–µ–Ω—å", "—Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ", "—Ç–µ–ª–æ –∏—Å—Ç–æ—â–µ–Ω–æ",
    "–∏—Å—Ç–æ—â–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤", "—Ä–µ–∑–µ—Ä–≤—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã", "–ø–µ—Ä–µ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å", "—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
    "—Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å", "–º—ã—à—Ü—ã –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è", "–±–æ–ª—å –≤ –º—ã—à—Ü–∞—Ö", "–∫—Ä–µ–ø–∞—Ç—É—Ä–∞", "–º—ã—à—Ü—ã –±–æ–ª—è—Ç",
    "—Å—É—Å—Ç–∞–≤—ã –±–æ–ª—è—Ç", "–∫–æ—Å—Ç–∏ –Ω–æ—é—Ç", "–≤—Å–µ —Ç–µ–ª–æ –±–æ–ª–∏—Ç", "–≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å –æ—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏", "–≥–æ–ª–æ–≤–∞ —Ä–∞—Å–∫–∞–ª—ã–≤–∞–µ—Ç—Å—è",
    "–º–∏–≥—Ä–µ–Ω—å", "—Å–∏–ª—å–Ω–∞—è –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å", "–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ", "–∫—Ä—É–∂–∏—Ç—Å—è –≥–æ–ª–æ–≤–∞", "—Ç–æ—à–Ω–æ—Ç–∞ –æ—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏",
    "–ø–æ–¥—Ç–∞—à–Ω–∏–≤–∞–µ—Ç", "—Å–Ω–∏–∂–µ–Ω–∏–µ –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞", "—á–∞—Å—Ç–æ –±–æ–ª–µ—é", "–ø—Ä–æ—Å—Ç—É–¥—ã", "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ—Å—Ç—É–∂–∞—é—Å—å",
    "–æ–±–æ—Å—Ç—Ä–µ–Ω–∏–µ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏—Ö –±–æ–ª–µ–∑–Ω–µ–π", "–±–æ–ª—è—á–∫–∏ –≤—ã–ª–µ–∑–∞—é—Ç", "–ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ–º", "–∂–µ–ª—É–¥–æ–∫ —à–∞–ª–∏—Ç"
]

# –¢—Ä–µ–≤–æ–≥–∞, —Å—Ç—Ä–∞—Ö, –ø–∞–Ω–∏–∫–∞ (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)
ANXIETY_PATTERNS = [
    "–±–æ—é—Å—å", "–æ—á–µ–Ω—å –±–æ—é—Å—å", "–±–µ–∑—É–º–Ω–æ –±–æ—é—Å—å", "–º–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ", "—Å—Ç—Ä–∞—à–Ω–æ", "–¥–∏–∫–æ —Å—Ç—Ä–∞—à–Ω–æ",
    "–ø–µ—Ä–µ–∂–∏–≤–∞—é", "–æ—á–µ–Ω—å –ø–µ—Ä–µ–∂–∏–≤–∞—é", "—Å–∏–ª—å–Ω–æ –ø–µ—Ä–µ–∂–∏–≤–∞—é", "—è –ø–µ—Ä–µ–∂–∏–≤–∞—é", "—è –æ–ø—è—Ç—å –ø–µ—Ä–µ–∂–∏–≤–∞—é",
    "—Ç—Ä–µ–≤–æ–∂–Ω–æ", "–æ—á–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ", "–¥–∏–∫–æ —Ç—Ä–µ–≤–æ–∂–Ω–æ", "–º–µ–Ω—è —Ç—Ä—è—Å–µ—Ç", "–º–µ–Ω—è —Ç—Ä—è—Å—ë—Ç", "–ø–∞–Ω–∏–∫–∞",
    "–ø–∞–Ω–∏—á–µ—Å–∫—É—é", "–ø–∞–Ω–∏—á–µ—Å–∫–∏", "–ø–∞–Ω–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞", "–ø–∞–Ω–∏–∫—É—é", "–æ–ø—è—Ç—å –ø–∞–Ω–∏–∫—É—é", "–≤–¥—Ä—É–≥ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è",
    "–≤–¥—Ä—É–≥ –≤—Å—ë –∏—Å–ø–æ—Ä—á—É", "–≤–¥—Ä—É–≥ –≤—Å—ë –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫", "–≤–¥—Ä—É–≥ –≤—Å—ë –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫", "—è –Ω–µ —É–≤–µ—Ä–µ–Ω–∞",
    "—è –Ω–µ —É–≤–µ—Ä–µ–Ω", " —è –Ω–µ —É–≤–µ—Ä–µ–Ω–∞ –≤ —Å–µ–±–µ", "—è –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ —Å–µ–±–µ", "—è —Å–æ–º–Ω–µ–≤–∞—é—Å—å", "—Å–æ–º–Ω–µ–≤–∞—é—Å—å –≤ —Å–µ–±–µ",
    "–≤–æ–ª–Ω—É—é—Å—å", "—è –≤–æ–ª–Ω—É—é—Å—å", "–æ—á–µ–Ω—å –≤–æ–ª–Ω—É—é—Å—å", "—è –≤—Å–µ –∏—Å–ø–æ—Ä—Ç–∏–ª–∞", "—è –≤—Å–µ –∏—Å–ø–æ—Ä—Ç–∏–ª", "—è –≤—Å—ë –∏—Å–ø–æ—Ä—Ç–∏–ª–∞",
    "—è –≤—Å—ë –∏—Å–ø–æ—Ä—Ç–∏–ª", "–±–æ—é—Å—å –æ—à–∏–±–∏—Ç—å—Å—è", "–±–æ—é—Å—å —Å–¥–µ–ª–∞—Ç—å –æ—à–∏–±–∫—É", "—Å—Ç—Ä–∞—Ö, —á—Ç–æ –Ω–µ —Å–ø—Ä–∞–≤–ª—é—Å—å",
    "–±–æ—é—Å—å, —á—Ç–æ –Ω–µ —Å–ø—Ä–∞–≤–ª—é—Å—å", "—Å—Ç—Ä–∞—Ö –±—É–¥—É—â–µ–≥–æ", "—Å—Ç—Ä–∞—à–Ω–æ –∑–∞ –±—É–¥—É—â–µ–µ", "—Å–µ—Ä–¥—Ü–µ –∫–æ–ª–æ—Ç–∏—Ç—Å—è",
    "—Å–µ—Ä–¥—Ü–µ —Å—Ç—É—á–∏—Ç —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω–æ", "—Ä—É–∫–∏ —Ç—Ä—è—Å—É—Ç—Å—è", "–º–Ω–µ —Ç—è–∂–µ–ª–æ –¥—ã—à–∞—Ç—å –æ—Ç —Ç—Ä–µ–≤–æ–≥–∏",
    "–∫–∞–∫ –±—É–¥—Ç–æ –≤—Å—ë –≤–∞–ª–∏—Ç—Å—è", "–æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—Å—ë —Ä—É—Ö–Ω–µ—Ç", "–º–Ω–µ –Ω–µ –ø–æ —Å–µ–±–µ", "–æ—á–µ–Ω—å –Ω–µ –ø–æ —Å–µ–±–µ",
    "—Ç—Ä–µ–≤–æ–∂–Ω—ã–µ –º—ã—Å–ª–∏", "–Ω–∞–≤—è–∑—á–∏–≤—ã–µ –º—ã—Å–ª–∏", "–Ω–µ –º–æ–≥—É –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –¥—É–º–∞—Ç—å", "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ",
    "–≤–µ—á–Ω–æ –ø–µ—Ä–µ–∂–∏–≤–∞—é", "—Ç—Ä–µ–≤–æ–∂—É—Å—å –ø–æ –ª—é–±–æ–º—É –ø–æ–≤–æ–¥—É", "—Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å", "–±–æ—é—Å—å –ª—é–¥–µ–π",
    "—Å—Ç—Ä–∞—Ö –æ–±—â–µ–Ω–∏—è", "–ø–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏", "–ø—Ä–∏—Å—Ç—É–ø—ã –ø–∞–Ω–∏–∫–∏", "–≤–Ω–µ–∑–∞–ø–Ω—ã–π —Å—Ç—Ä–∞—Ö", "—Å–µ—Ä–¥—Ü–µ –≤—ã—Å–∫–∞–∫–∏–≤–∞–µ—Ç",
    "–ø—É–ª—å—Å –∑–∞—à–∫–∞–ª–∏–≤–∞–µ—Ç", "–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–æ–∑–¥—É—Ö–∞", "–∑–∞–¥—ã—Ö–∞—é—Å—å", "–æ–¥—ã—à–∫–∞ –æ—Ç —Å—Ç—Ä–∞—Ö–∞", "—Ç–æ—à–Ω–æ—Ç–∞ –æ—Ç —Ç—Ä–µ–≤–æ–≥–∏",
    "–º—É—Ç–∏—Ç –æ—Ç —Å—Ç—Ä–∞—Ö–∞", "–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ", "–∑–µ–º–ª—è —É—Ö–æ–¥–∏—Ç –∏–∑-–ø–æ–¥ –Ω–æ–≥", "–≤—Å–µ –ø–ª—ã–≤–µ—Ç",
]

# –û—á–µ–Ω—å —Ç—è–∂—ë–ª—ã–µ —Ñ—Ä–∞–∑—ã
SEVERE_SAD_PATTERNS = [
    "–Ω–µ —Ö–æ—á—É –∂–∏—Ç—å", "–Ω–µ —Ö–æ—á—É –±–æ–ª—å—à–µ –∂–∏—Ç—å", "–Ω–µ—Ç —Å–º—ã—Å–ª–∞ –∂–∏—Ç—å", "–Ω–µ –≤–∏–∂—É —Å–º—ã—Å–ª–∞ –∂–∏—Ç—å",
    "–Ω–µ –≤–∏–∂—É —Å–º—ã—Å–ª–∞", "–Ω–µ—Ç —Å–º—ã—Å–ª–∞", "–∂–∏–∑–Ω—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–∞", "–∂–∏–∑–Ω—å –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞",
    "–Ω–µ–Ω–∞–≤–∏–∂—É —Å–≤–æ—é –∂–∏–∑–Ω—å", "–Ω–µ–Ω–∞–≤–∏–∂—É –∂–∏–∑–Ω—å", "—Ö–æ—á—É —É–º–µ—Ä–µ—Ç—å", "—Ö–æ—á—É –ø—Ä–æ—Å—Ç–æ –∏—Å—á–µ–∑–Ω—É—Ç—å",
    "–ª—É—á—à–µ –±—ã –º–µ–Ω—è –Ω–µ –±—ã–ª–æ", "–ª—É—á—à–µ –±—ã —è –Ω–µ —Ä–æ–¥–∏–ª–∞—Å—å", "–ª—É—á—à–µ –±—ã —è –Ω–µ —Ä–æ–¥–∏–ª—Å—è",
    "–Ω–µ —Ö–æ—á—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å", "–Ω–µ —Ö–æ—á—É –Ω–∏—á–µ–≥–æ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å", "—è –Ω–∏—á—Ç–æ–∂–µ—Å—Ç–≤–æ", "—è –Ω–∏–∫—á–µ–º–Ω–∞—è",
    "—è –Ω–∏–∫—á–µ–º–Ω—ã–π", "—è –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è", "—è –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π", "–Ω–µ–Ω–∞–≤–∏–∂—É —Å–µ–±—è", "—Å–µ–±—è –Ω–µ–Ω–∞–≤–∏–∂—É",
    "–Ω–µ–Ω–∞–≤–∏–∂—É –≤—Å—ë", "–Ω–µ–Ω–∞–≤–∏–∂—É –≤—Å–µ—Ö", "–Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–Ω–∞", "–Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–µ–Ω", " –Ω–∏–∫—Ç–æ –º–µ–Ω—è –Ω–µ –ª—é–±–∏—Ç",
    "–º–µ–Ω—è –Ω–∏–∫—Ç–æ –Ω–µ –ª—é–±–∏—Ç", "–Ω–∏–∫—Ç–æ –º–µ–Ω—è –Ω–µ —Å–ª—ã—à–∏—Ç –≤–æ–æ–±—â–µ", "–º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—Å–µ–º –±–µ–∑ —Ä–∞–∑–Ω–∏—Ü—ã",
    "–≤—Å–µ–º –ø–ª–µ–≤–∞—Ç—å –Ω–∞ –º–µ–Ω—è", "–Ω–µ —Ö–æ—á—É –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è", "–Ω–µ —Ö–æ—á—É –≤—Å—Ç–∞–≤–∞—Ç—å –ø–æ —É—Ç—Ä–∞–º", "–±–æ–ª—å—à–µ –Ω–µ –≤–∏–∂—É –≤—ã—Ö–æ–¥–∞",
    "—Ö–æ—á—É –ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π", "–¥—É–º–∞—é –æ —Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–µ", "—Å—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –º—ã—Å–ª–∏", "–ø–ª–∞–Ω–∏—Ä—É—é —Å—É–∏—Ü–∏–¥",
    "–≥–æ—Ç–æ–≤–ª—é—Å—å –∫ —Å—É–∏—Ü–∏–¥—É", "—Ä–µ—à–∏–ª –ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π", "—Ä–µ—à–∏–ª–∞ –ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π", "–Ω–µ —Ö–æ—á—É –±–æ–ª—å—à–µ —Ç–∞–∫ –∂–∏—Ç—å",
    "–≤—Å–µ —Ä–∞–≤–Ω–æ —É–º—Ä—É", "—Å–∫–æ—Ä–æ —É–º—Ä—É", "–∂–¥—É —Å–º–µ—Ä—Ç–∏", "—Å–º–µ—Ä—Ç—å –±—É–¥–µ—Ç –∏–∑–±–∞–≤–ª–µ–Ω–∏–µ–º", "–ª—É—á—à–µ —É–º–µ—Ä–µ—Ç—å",
    "–ø—Ä–æ—â–µ —É–º–µ—Ä–µ—Ç—å", "–Ω–µ –≤–∏–∂—É —Å–≤–µ—Ç–∞ –≤ –∫–æ–Ω—Ü–µ —Ç–æ–Ω–Ω–µ–ª—è", "–ø–æ—Ç–µ—Ä—è–ª –Ω–∞–¥–µ–∂–¥—É –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ",
    "–Ω–∞–¥–µ–∂–¥—ã –±–æ–ª—å—à–µ –Ω–µ—Ç", "–≤—Å–µ –∫–æ–Ω—á–µ–Ω–æ", "–≤—Å–µ –ø—Ä–æ–ø–∞–ª–æ", "–∂–∏–∑–Ω—å –∑–∞–∫–æ–Ω—á–µ–Ω–∞", " —è –æ–±—É–∑–∞ –¥–ª—è –≤—Å–µ—Ö",
    "—è —Ç–æ–ª—å–∫–æ –º–µ—à–∞—é", "–≤—Å–µ–º –±—É–¥–µ—Ç –ª—É—á—à–µ –±–µ–∑ –º–µ–Ω—è", "—è –Ω–µ–¥–æ—Å—Ç–æ–∏–Ω –∂–∏—Ç—å", "–Ω–µ –∑–∞—Å–ª—É–∂–∏–≤–∞—é –∂–∏–∑–Ω–∏",
    "–Ω–µ –∏–º–µ—é –ø—Ä–∞–≤–∞ –∂–∏—Ç—å", "–º–∏—Ä —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ –±–µ–∑ –º–µ–Ω—è", " –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç –º–æ–µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è",
    "—è —É–∂–µ –º–µ—Ä—Ç–≤ –≤–Ω—É—Ç—Ä–∏", "–≤–Ω—É—Ç—Ä–∏ –≤—Å–µ —É–º–µ—Ä–ª–æ", "–¥—É—à–∞ –º–µ—Ä—Ç–≤–∞", "–Ω–µ —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –∂–∏–≤—ã–º",
    "—Å—É—â–µ—Å—Ç–≤—É—é –Ω–æ –Ω–µ –∂–∏–≤—É", "–∂–∏–∑–Ω—å - —ç—Ç–æ –±–æ–ª—å", "—Å–ø–ª–æ—à–Ω—ã–µ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è", "–æ–¥–Ω–∞ –±–æ–ª—å", "–Ω–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞—é –±–æ–ª—å—à–µ",
    "–±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É —Ç–µ—Ä–ø–µ—Ç—å", "–¥–æ—à–µ–ª –¥–æ –ø—Ä–µ–¥–µ–ª–∞", "–¥–æ—à–ª–∞ –¥–æ –ø—Ä–µ–¥–µ–ª–∞", "–Ω–∞ –≥—Ä–∞–Ω–∏",
    "—Å–æ–±–∏—Ä–∞—é—Å—å —Å–æ–≤–µ—Ä—à–∏—Ç—å —Å—É–∏—Ü–∏–¥", "–ø–ª–∞–Ω–∏—Ä—É—é —É–π—Ç–∏ –∏–∑ –∂–∏–∑–Ω–∏"
]

# –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ/–ø—É—Å—Ç—ã–µ —Ñ—Ä–∞–∑—ã ¬´–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å¬ª
NO_JOY_PATTERNS = [
    "–Ω–µ –∑–Ω–∞—é —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é —á—Ç–æ –ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –ø–∏—Å–∞—Ç—å",
    "–Ω–µ –∑–Ω–∞—é —á—Ç–æ –µ—â–µ –Ω–∞–ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –µ—â—ë –Ω–∞–ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é —á—Ç–æ –µ—â–µ –ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –µ—â—ë –ø–∏—Å–∞—Ç—å",
    "–≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞—é —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å", "–≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å", "–≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞—é —á—Ç–æ –ø–∏—Å–∞—Ç—å",
    "–≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é –∫–∞–∫ –ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é –æ —á–µ–º –ø–∏—Å–∞—Ç—å", "–Ω–µ—á–µ–≥–æ –ø–∏—Å–∞—Ç—å",
    "–Ω–µ—á–µ–≥–æ —Å–∫–∞–∑–∞—Ç—å", "–Ω–µ—á–µ–≥–æ –¥–æ–±–∞–≤–ª—è—Ç—å", "—Å–æ–≤—Å–µ–º –Ω–µ—á–µ–≥–æ –ø–∏—Å–∞—Ç—å", "–≤–æ–æ–±—â–µ –Ω–µ—á–µ–≥–æ –ø–∏—Å–∞—Ç—å", "–Ω–µ—á–µ–≥–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å",
    "–Ω–∏—á–µ–≥–æ –Ω–µ –º–æ–≥—É –≤—Å–ø–æ–º–Ω–∏—Ç—å", "–Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø–æ–º–Ω–∏–ª–æ—Å—å", "–Ω–∏—á–µ–≥–æ —Ç–∞–∫–æ–≥–æ –Ω–µ –≤—Å–ø–æ–º–Ω–∏–ª–∞",
    "–æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å", "–Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –Ω–µ –±—ã–ª–æ", "–Ω–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –Ω–µ –±—ã–ª–æ", "–Ω–∏—á–µ–≥–æ —Ç–∞–∫–æ–≥–æ –Ω–µ –±—ã–ª–æ",
    "–æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å –±–µ–∑ —Ä–∞–¥–æ—Å—Ç–µ–π", "–ø—É—Å—Ç–æ–π –¥–µ–Ω—å", "—Å–µ—Ä—ã–π –¥–µ–Ω—å", "–º–Ω–µ –≤—Å–µ —Ä–∞–≤–Ω–æ", "–Ω–µ —á—É–≤—Å—Ç–≤—É—é –Ω–∏—á–µ–≥–æ",
    "–Ω–∏–∫–∞–∫–∏—Ö —ç–º–æ—Ü–∏–π", "–ø—Ä–æ—Å—Ç–æ –¥–µ–Ω—å –∏ –¥–µ–Ω—å", "–Ω–∏—á–µ–≥–æ –Ω–µ —á—É–≤—Å—Ç–≤—É—é", "—ç–º–æ—Ü–∏–π –Ω–µ—Ç", "–Ω–µ —Å–µ–π—á–∞—Å", "–ø–æ–∑–∂–µ –Ω–∞–ø–∏—à—É",
    "–ø–æ—Ç–æ–º –Ω–∞–ø–∏—à—É", "–º–æ–∂–µ—Ç –ø–æ–∑–∂–µ –≤—Å–ø–æ–º–Ω—é", "–Ω–µ –≥–æ—Ç–æ–≤–∞ –ø–∏—Å–∞—Ç—å", "–Ω–µ –∑–Ω–∞—é —Ä–∞–¥–æ—Å—Ç—å –ª–∏ —ç—Ç–æ", "–Ω–µ —É–≤–µ—Ä–µ–Ω–∞ —á—Ç–æ —ç—Ç–æ —Ä–∞–¥–æ—Å—Ç—å",
    "—Å–æ–º–Ω–µ–≤–∞—é—Å—å —á—Ç–æ —ç—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è", "—ç—Ç–æ –≤—Ä–æ–¥–µ –Ω–µ —Ä–∞–¥–æ—Å—Ç—å", "–Ω–µ —É–≤–µ—Ä–µ–Ω–∞ —Å—Ç–æ–∏—Ç –ª–∏ —ç—Ç–æ –ø–∏—Å–∞—Ç—å", "–Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ",
    "–Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–¥—É–µ—Ç", "–Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –±—ã–ª–æ", "—è–≤–Ω–æ –Ω–µ—á–µ–º—É —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è", "–Ω–µ –∑–∞ —á—Ç–æ –∑–∞—Ü–µ–ø–∏—Ç—å—Å—è",
    "–Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–∏—Å–∞—Ç—å", "–Ω–µ—Ç –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è", "–ø–æ–∫–∞ –Ω–µ –¥–æ —Ä–∞–¥–æ—Å—Ç–µ–π", "–Ω–µ –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–¥–æ—Å—Ç–µ–π",
    "–Ω–µ –º–æ–≥—É —Å–æ–±—Ä–∞—Ç—å—Å—è —Å –º—ã—Å–ª—è–º–∏", "—á–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è –Ω–µ—á–µ–≥–æ", "–≤—Ä–æ–¥–µ —á—Ç–æ-—Ç–æ –±—ã–ª–æ",
    "–º–æ–∂–µ—Ç –∑–∞–≤—Ç—Ä–∞ –≤—Å–ø–æ–º–Ω—é", "—Ä–∞–Ω–æ –ø–∏—Å–∞—Ç—å", "–Ω–∏—á–µ–≥–æ –ø–æ–∫–∞", "–ª–µ–Ω—å –¥—É–º–∞—Ç—å", "–ª–µ–Ω—å –ø–∏—Å–∞—Ç—å",
    "–º–Ω–µ –ª–µ–Ω—å", "–æ–∫", "—Ç–∞–∫–æ–µ —Å–µ–±–µ", "–æ–±—ã—á–Ω–æ", "–Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ—á–µ–≥–æ –ø–∏—Å–∞—Ç—å",
    "–Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å", "–Ω–µ –∑–Ω–∞—é", "–≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞—é", "–∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ –∑–Ω–∞—é"
]

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä + –æ–ø–µ—á–∞—Ç–∫–∏ + —Ä–∞—Å–∫–ª–∞–¥–∫–∞
GREETING_PATTERNS = [
    "–ø—Ä–∏–≤–µ—Ç", "–ø—Ä–∏–≤–µ—Ç!", "–ø—Ä–∏–≤–µ—Ç–∏–∫", "–ø—Ä–∏–≤–µ—Ç–∏–∫–∏", "–ø—Ä–∏–≤–µ—Ç)", "–ø—Ä–∏–≤–µ—Ç))", "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é",
    "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ)", "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å", "–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä", "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ",
    "–¥–æ–±—Ä–æ–π –Ω–æ—á–∏", "—Ö–∞–π", "—Ö–∞–π!", "—Ö–∞–π)", "—Ö—ç–π", "—Ö–µ–π", "—Ö–µ–ª–ª–æ", "—Ö–µ–ª–ª–æ—É", "hello", "hi", "hey",
    "–π–æ—É", " –π–æ", "–π–æ—É)", "–π–æ—É!", "–∫—É", "–∫—É!", "–∫—É)", "–∑–¥–æ—Ä–æ–≤–æ", "–∑–¥–æ—Ä–æ–≤", "–∑–¥–∞—Ä–æ–≤–∞", "–∑–¥–∞—Ä–æ–≤",
    "–∑–¥–æ—Ä–æ–≤–∞", "—Å–∞–ª—é—Ç", "—à–∞–ª–æ–º", "–±–æ–Ω–∂—É—Ä", "—Ö–æ–ª–∞", "–¥–æ–±—Ä–æ–≥–æ –¥–Ω—è", "–¥–æ–±—Ä–æ–≥–æ –≤–µ—á–µ—Ä–∞", "—Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å",
    "—Ä–∞–¥–∞ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å", "—Å–Ω–æ–≤–∞ —è", "—ç—Ç–æ —è —Å–Ω–æ–≤–∞", "–ø—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π-–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π",
    "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è", "—Ä–∞–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å", "—Ä–∞–¥–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å", "–¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å",
    "—Å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º", "–∫–∞–∫ –¥–µ–ª–∞", "–∫–∞–∫ —Ç—ã", "–∫–∞–∫ –∂–∏–∑–Ω—å", "—á—Ç–æ –Ω–æ–≤–æ–≥–æ", "–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ",
    "–ø—Ä–∏–≤–µ—Ç–∏–∫–∏-–ø—Ä–∏–≤–µ—Ç–∏–∫–∏", "–∑–¥—Ä–∞—Å—å—Ç–µ", "–∑–¥—Ä–∞—Å—Ç–µ", "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å", "–¥–æ–±—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫",
    "–¥–æ–±—Ä–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è", "–º–æ–µ –ø–æ—á—Ç–µ–Ω–∏–µ", "–∑–¥—Ä–∞–≤–∏—è –∂–µ–ª–∞—é",
    # –æ–ø–µ—á–∞—Ç–∫–∏ –∏ —Ä–∞—Å–∫–ª–∞–¥–∫–∞
    "–ø—Ä–≤–∏–µ—Ç", "–ø—Ä–µ–≤–µ—Ç", "–ø—Ä–∏–≤—Ç–µ", "–ø—Ä—é–≤–µ—Ç", "–ø—Ä–∏–≤", "ghbdtn", "ghbdtn!", "ghbdtn)", "privet", "privet!", "privetik",
    "privetik!", "privet)", "privetik)"
]

# –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–º–µ–Ω—ã
CANCEL_PATTERNS = [
    "–æ—Ç–º–µ–Ω–∞", "–æ—Ç–º–µ–Ω–∏—Ç—å", "—è –ø–µ—Ä–µ–¥—É–º–∞–ª–∞", "—è –ø–µ—Ä–µ–¥—É–º–∞–ª", "–Ω–µ —Ö–æ—á—É –ø–∏—Å–∞—Ç—å", "–Ω–µ —Ö–æ—á—É –ø–∏—Å—å–º–æ",
    "–Ω–µ —Ö–æ—á—É –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å", "–Ω–µ –±—É–¥—É –ø–∏—Å–∞—Ç—å", "/cancel"
]

# --------------------------
# –¢–ï–ö–°–¢–û–í–´–ï –û–¢–í–ï–¢–´
# --------------------------

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (greeting)
GREETING_RESPONSES = [
    "–ü—Ä–∏–≤–µ—Ç! –ë–æ–ª—å—à–æ–µ —Å—á–∞—Å—Ç—å–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–≥–Ω–æ–≤–µ–Ω–∏–π. –ö–∞–∫–æ–µ –∏–∑ –Ω–∏—Ö –∑–∞–ø–æ–º–Ω–∏–ª–æ—Å—å —Ç–µ–±–µ —Å–µ–≥–æ–¥–Ω—è?",
    "–°–∞–ª—é—Ç! –Ø –∑–¥–µ—Å—å. –ü—Ä–∏—à–ª–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–¥–∏–Ω —Ö–æ—Ä–æ—à–∏–π –º–æ–º–µ–Ω—Ç - –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–º–µ—à–Ω–æ–π –º–µ–º, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —É–≤–∏–¥–µ–ª–∞.",
    "–û–æ–æ–æ–æ)) –†–∞–¥–∞ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å –∑–¥–µ—Å—å. –î–∞–≤–∞–π –æ—Ç–º–µ—Ç–∏–º —á—Ç–æ-–Ω–∏–±—É–¥—å –ø—Ä–∏—è—Ç–Ω–æ–µ –∏–∑ —ç—Ç–æ–≥–æ –¥–Ω—è?",
    "–ü—Ä–∏–≤–µ—Ç! –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ —Å–∞–º—ã–π –æ–±—ã—á–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ç–≤–æ–µ–≥–æ –¥–Ω—è –∏ –Ω–∞–π—Ç–∏ –≤ –Ω—ë–º —á—Ç–æ-—Ç–æ —Ö–æ—Ä–æ—à–µ–µ.",
    "–¢–∞–∫, —è —Ç—É—Ç. –ó–∞–≥—Ä—É–∑–∏ —Å—é–¥–∞ —Å–≤–æ—é –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –¥–Ω–µ–≤–Ω—É—é —Ä–∞–¥–æ—Å—Ç—å - –∫–æ—Ñ–µ, –º—É–∑—ã–∫—É –∏–ª–∏ —á—å—é-—Ç–æ —Å–ª—É—á–∞–π–Ω—É—é –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç—å.",
    "–ü—Ä–∏–≤–µ—Ç. –ù–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ: —Ç—ã –¥–æ–±—Ä–∞–ª–∞—Å—å –¥–æ —ç—Ç–æ–≥–æ —á–∞—Ç–∞ - —É–∂–µ —É—Å–ø–µ—Ö. –ß—Ç–æ –µ—â—ë —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ –Ω–µ –ø—Ä–æ–≤–∞–ª–æ–º?)",
    "–•–µ–π! –ü–µ—Ä–≤–∞—è —Ä–∞–¥–æ—Å—Ç—å - —Ç—ã. –í—Ç–æ—Ä–∞—è - —Ç–æ, —á—Ç–æ —Ç—ã —Å–µ–π—á–∞—Å –º–Ω–µ —Ä–∞—Å—Å–∫–∞–∂–µ—à—å.",
    "–û–æ–æ, –≤—ã–≥–ª—è–Ω—É–ª–∞! –î–∞–≤–∞–π –¥–µ–ª–∏—Ç—å—Å—è —á–µ–º-—Ç–æ —Ö–æ—Ä–æ—à–∏–º ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–æ —Ä–∞–∑–º–µ—Ä–æ–º —Å –∫—Ä–æ—à–∫—É –æ—Ç –∫—Ä—É–∞—Å—Å–∞–Ω–∞.",
    "–ü—Ä–∏–≤–µ—Ç! –î–∞–≤–∞–π —á–µ—Å—Ç–Ω–æ: —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –∏ –Ω–µ –±–µ—Å–∏–ª–æ? –¢–∞–∫–∏–µ –≤–µ—â–∏ –Ω–∞–¥–æ —É–≤–∞–∂–∞—Ç—å.",
    "–û–æ–æ, —Ç—ã –∑–¥–µ—Å—å! –ü–æ–¥–∫–∏–Ω—å —Å–æ–±—ã—Ç–∏–µ, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –Ω–µ –∑–∞–∫–∞—Ç–∏–ª–∞ –≥–ª–∞–∑–∞. –≠—Ç–æ —Ä–µ–¥–∫–æ—Å—Ç—å, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä!",
    "–û–æ–æ))) –°–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Ä–∞–¥–æ—Å—Ç—å —Å–ª—É—á–∏–ª–∞—Å—å - —Ç—ã –ø–æ—è–≤–∏–ª–∞—Å—å! –¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π –≤—Ç–æ—Ä—É—é, –ø–æ–∫–∞ –ø–æ–±–µ–¥–∞ –Ω–µ –∏—Å–ø–∞—Ä–∏–ª–∞—Å—å.",
    "–ü—Ä–∏–≤–µ—Ç! –ü—Ä–µ–¥–ª–∞–≥–∞—é —Å—Ç–∞—Ä—Ç–∞–Ω—É—Ç—å —Å —á–µ–≥–æ-—Ç–æ –æ—á–µ–≤–∏–¥–Ω–æ–≥–æ: —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ —Ç–≤–æ–∏–º –±–∞–∑–æ–≤—ã–º –º–∏–Ω–∏–º—É–º–æ–º? –ï–¥–∞, –º—É–∑—ã–∫–∞ –∏–ª–∏ –∫–æ—Ñ–µ?",
    "–Ø —Ç—É—Ç! –ö–∏–¥–∞–π —Å–≤–æ—é –ø–æ–±–µ–¥—É –¥–Ω—è. –î–∞–∂–µ –µ—Å–ª–∏ –ø–æ–±–µ–¥–∏–ª–∞ —Ç–æ–ª—å–∫–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ª–µ–Ω—å - –º—ã —Ç–∞–∫–æ–µ —É–≤–∞–∂–∞–µ–º!",
    "–†–∞–¥, —á—Ç–æ —Ç—ã –∑–∞–≥–ª—è–Ω—É–ª–∞! –î–∞–≤–∞–π, –≤—Å–ø–æ–º–∏–Ω–∞–π: —á—Ç–æ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å –±—ã–ª–æ —Ö–æ—Ä–æ—à–µ–≥–æ? –•–æ—Ç—å —á—Ç–æ-—Ç–æ? –•–æ—Ç—å –∫—Ç–æ-—Ç–æ?",
]

JOY_EMOJIS = ["‚ú®", "üòä", "üåà", "üíõ", "üåü"]
REMINDER_EMOJIS = ["‚ú®", "üìå", "üòä"]
STATS_EMOJIS = ["üìä", "üìà", "‚≠ê"]
CALM_EMOJIS = ["üôÇ", "üåø", "‚ú®", "‚òï", "üïä", "üçÉ"]

# –û—Ç–≤–µ—Ç—ã –Ω–∞ –≥—Ä—É—Å—Ç—å
SAD_RESPONSES = [
    "–ó–≤—É—á–∏—Ç –∫–∞–∫ –æ—á–µ–Ω—å –Ω–µ–ø—Ä–æ—Å—Ç–æ–π –¥–µ–Ω—å. –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –∏—Å–∫–∞—Ç—å –≤ –Ω—ë–º –ø–ª—é—Å—ã.",
    "–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ—è–≤–∏—Ç—Å—è –º—ã—Å–ª—å –≤—Ä–æ–¥–µ ¬´–∫–æ—Ñ–µ –ø–æ–º–æ–≥¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏. –Ø —Å–æ—Ö—Ä–∞–Ω—é.",
    "–ï—Å–ª–∏ –ø–æ–∑–∂–µ –≤—Å–ø–æ–º–Ω–∏—Ç—Å—è –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –Ω–∞ –¥—É—à–µ —Å—Ç–∞–ª–æ —Å–≤–µ—Ç–ª–µ–µ ‚Äî –ø—Ä–æ—Å—Ç–æ –∫–∏–Ω—å –µ–≥–æ —Å—é–¥–∞. –Ø –∑–∞–ø–æ–º–Ω—é.",
    "–ü–æ–Ω–∏–º–∞—é, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –º–æ–≥–ª–æ –±—ã—Ç—å —Ç—è–∂–µ–ª–æ. –¢—ã –≤—Å–µ–≥–¥–∞ —É–º–Ω–∏—Ü–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∞–º–æ–π —Ç–∞–∫ –Ω–µ –∫–∞–∂–µ—Ç—Å—è.",
    "–ü–æ–Ω–∏–º–∞—é, –¥–µ–Ω—å –º–æ–≥ –±—ã—Ç—å —Ç—è–∂–∫–æ–≤–∞—Ç—ã–º ‚Äî –∂–∏–∑–Ω—å –∏–Ω–æ–≥–¥–∞ –ª—é–±–∏—Ç –¥—Ä–∞–º—É. –ù–æ —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ —É–º–Ω–∏—Ü–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ö–æ–¥–∏—à—å –≤ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–µ–º —Ä–µ–∂–∏–º–µ.",
    "–ú–æ–∂–µ—à—å –¥–∞–∂–µ –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º –æ–ø–∏—Å–∞—Ç—å –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ —Å–µ–≥–æ–¥–Ω—è —Å—Ç–∞–ª–æ —á—É—Ç—å —Å–ø–æ–∫–æ–π–Ω–µ–µ ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –¥–ª–∏–ª—Å—è —Å–µ–∫—É–Ω–¥—É. –Ø –∑–∞–ø–æ–º–Ω—é.",
    "–ü–æ–Ω–∏–º–∞—é, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ —Ç—è–∂–µ–ª–æ–≤–∞—Ç–æ. –ù–µ –∑–∞—Å—Ç–∞–≤–ª—è–π —Å–µ–±—è –∏—Å–∫–∞—Ç—å –ø–ª—é—Å—ã.",
    "–ï—Å–ª–∏ –≤–µ—á–µ—Ä–æ–º –≤—Å–ø–æ–º–Ω–∏—Ç—Å—è —á—Ç–æ-—Ç–æ, —á—Ç–æ —Ö–æ—Ç—å –Ω–∞ –º–∏–Ω—É—Ç—É –æ—Ç–ø—É—Å—Ç–∏–ª–æ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–≥–æ—Ä—è—á–∏–π –¥—É—à¬ª –∏–ª–∏ ¬´—Ç–∏—à–∏–Ω–∞¬ª ‚Äî –ø—Ä–∏—à–ª–∏, —è –∑–∞–ø–∏—à—É.",
    "–í–∏–∂—É, —á—Ç–æ –¥–µ–Ω—å –±—ã–ª –Ω–µ —Å–∞—Ö–∞—Ä. –ò –Ω–∏—á–µ–≥–æ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.",
    "–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–π–º–∞–µ—à—å —Å–µ–±—è –Ω–∞ —á—ë–º-—Ç–æ –≤—Ä–æ–¥–µ ¬´–∫–æ—Ñ–µ –ø–æ–º–æ–≥¬ª –∏–ª–∏ ¬´–±–µ—Å—Ç–∏—Å –ø—Ä–∏—Å–ª–∞–ª–∞ —Å–º–µ—à–Ω–æ–π –º–µ–º¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ. –Ø –∑–∞–ø–æ–º–Ω—é.",
    "–ß—É–≤—Å—Ç–≤—É—é, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ –Ω–µ–ª–µ–≥–∫–æ. –ù–µ —Å—Ç–æ–∏—Ç —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å —Ö–æ—Ä–æ—à–µ–µ.",
    "–ï—Å–ª–∏ –Ω–µ–≤–∑–Ω–∞—á–∞–π –≤—Å–ø–æ–º–Ω–∏—Ç—Å—è –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ —Å—Ç–∞–ª–æ —á—É—Ç—å –ª–µ–≥—á–µ ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö. –Ø —Å–æ—Ö—Ä–∞–Ω—é –∫–∞–∫ –µ—Å—Ç—å.",
]

# –û—Ç–≤–µ—Ç—ã –Ω–∞ —É—Å—Ç–∞–ª–æ—Å—Ç—å
TIRED_RESPONSES = [
    "–õ–æ–≤–ª—é —Ç–≤–æ—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –±–µ–∑ —Å–ª–æ–≤. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–∑–∂–µ –≤—Å–ø–æ–º–Ω–∏—Ç—Å—è —á—Ç–æ-—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ –≤—Ä–æ–¥–µ ¬´–¥–æ–∂–¥—å –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –∫–∞–∫ –ø–æ –∑–∞–∫–∞–∑—É¬ª ‚Äî —è –Ω–∞ –ø–æ–¥—Ö–≤–∞—Ç–µ!",
    "–í—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —è —Ä—è–¥–æ–º. –ù–µ —Ç—ã —Å–ª–∞–±–∞—è ‚Äî –¥–µ–Ω—å –±—ã–ª —Å–∏–ª—å–Ω—ã–º. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–π–º—ë—à—å, —á—Ç–æ —É–∂–∏–Ω —Å–µ–≥–æ–¥–Ω—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –±—ã–ª –≤–∫—É—Å–Ω—ã–º ‚Äî —ç—Ç–æ —Ç–æ–∂–µ —Ä–∞–¥–æ—Å—Ç—å. –ü–∏—à–∏ ‚Äî —è –∑–∞–ø–æ–º–Ω—é!",
    "–¢—ã –Ω–µ —É—Å—Ç–∞–≤—à–∞—è ‚Äî —Ç—ã –≥–µ—Ä–æ–π –±–µ–∑ –ø–∞—Ñ–æ—Å–∞. –ú–æ–∂–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç—å. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–π–º–∞–µ—à—å —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏ ¬´–£ –º–µ–Ω—è –∂–µ –æ—Å—Ç–∞–ª–∏—Å—å –∫–æ–Ω—Ñ–µ—Ç—ã!¬ª ‚Äî —ç—Ç–æ —É–∂–µ –ø–æ–≤–æ–¥ –¥–ª—è –Ω–∞—à–µ–≥–æ —á–∞—Ç–∞!",
    "–û–∫–µ–π, –≤–∏–∂—É, —á—Ç–æ —Å–ª–æ–≤ –Ω–µ—Ç. –ú–æ–ª—á—É –∫–∞–∫ —Ä—ã–±–∞. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –≤—Å–ø–æ–º–Ω–∏—à—å, –∫–∞–∫ —Ç–≤–æ–π –∫–æ—Ç–∏–∫ —Å–ø–∞–ª —Ä—è–¥–æ–º ‚Äî —è –Ω–∞ –Ω–∏–∑–∫–æ–º —Å—Ç–∞—Ä—Ç–µ! –û—Ç–ø—Ä–∞–≤–ª—é –≤ –Ω–∞—à—É –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ä–∞–¥–æ—Å—Ç–µ–π.",
    "–¢—ã –Ω–µ —Å–¥–∞—ë—à—å—Å—è ‚Äî —Ç—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ–º–Ω–æ–≥–æ —É—Å—Ç–∞–ª–∞. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –≤—Å–ø–æ–º–Ω–∏—Ç—Å—è –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ —Å—Ç–∞–ª–æ —Ö–æ—Ç—å —á—É—Ç—å-—á—É—Ç—å —Å–≤–µ—Ç–ª–µ–µ ‚Äî —ç—Ç–æ —É–∂–µ –ø—Ä–æ—Ä—ã–≤! –°–æ–æ–±—â–∏ ‚Äî –∑–∞–ø–∏—à–µ–º –≤ –Ω–∞—à –∞—Ä—Ö–∏–≤ –ø–æ–±–µ–¥.",
]

# –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ç—Ä–µ–≤–æ–≥—É
ANXIETY_RESPONSES = [
    "–ü–æ—Ö–æ–∂–µ, —Ç–≤–æ—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å —Ä–µ—à–∏–ª–∞ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º —Å—Ä–∞–∑—É. –ù–æ —ç—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ç—ã —É–º–µ–µ—à—å –∑–∞—Ä–∞–Ω–µ–µ –≤–∏–¥–µ—Ç—å —Ç–æ, —á—Ç–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é.",
    "–¢–∞–∫, —Å–ª—ã—à—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–π –∑–≤—É–∫: ¬´–∑–∞–≥—Ä—É–∑–∏–ª—Å—è –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–≥–∏¬ª. –ù–æ –µ—Å–ª–∏ –ø—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è ‚Äî —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å —Ç–≤–æ—è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —á—É—Ç—å –ø–µ—Ä–µ–≥–Ω—É–ª–∞ –ø–∞–ª–∫—É.",
    "–¢–∞–∫-—Ç–∞–∫, —Ç—Ä–µ–≤–æ–≥–∞ –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ! –ù–æ –µ—Å–ª–∏ –ø—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–±–æ—Ç–∞ –æ —Ç–æ–º, —á—Ç–æ —Ç–µ–±–µ –¥–æ—Ä–æ–≥–æ.",
    "–°–ª—É—à–∞–π, –∞ –≤–µ–¥—å —Ç–≤–æ—è —Ç—Ä–µ–≤–æ–∂–∫–∞ ‚Äî —ç—Ç–æ –∫–∞–∫ —Å—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å ‚Äî –≥–∏–ø–µ—Ä–∑–∞–±–æ—Ç–∞ –æ –≤–∞–∂–Ω–æ–º. –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞ –ø—Ä–æ–∫–∞—á–∞–Ω–∞ –Ω–µ –¥–æ –∫–æ–Ω—Ü–∞.",
    "–≠—Ö, —Å–º–æ—Ç—Ä—é, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—Ä–∏—Ç–∏–∫ –æ–ø—è—Ç—å —É—Å—Ç—Ä–æ–∏–ª –¥—Ä–∞–º—É, –∫–∞–∫ –≤ —Å–µ—Ä–∏–∞–ª–µ. –ê –≤–µ–¥—å —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞ ‚Äî –∑–∞–º–µ—á–∞—Ç—å –∫–∞–∂–¥—É—é –º–µ–ª–æ—á—å!",
]

# –û—Ç–≤–µ—Ç—ã, –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –ø–∏—à–µ—Ç ¬´–Ω–µ –∑–Ω–∞—é, —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å¬ª
NO_JOY_RESPONSES = [
    "–ù–∏—á–µ–≥–æ, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –Ω–µ—á–µ–≥–æ –Ω–∞–ø–∏—Å–∞—Ç—å. –ë—ã–≤–∞–µ—Ç. –ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π. –ï—Å–ª–∏ –≤–µ—á–µ—Ä–æ–º –≤—Å–ø–æ–º–Ω–∏—à—å, —á—Ç–æ –∏–≥—Ä–∞–ª–∞ –ª—é–±–∏–º–∞—è –ø–µ—Å–Ω—è –∏–ª–∏ –±—ã–ª–∏ –∫–ª–∞—Å—Å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ WB ‚Äî –Ω–∞–ø–∏—à–∏ –º–Ω–µ. –Ø —Å–æ—Ö—Ä–∞–Ω—é.",
    "–ü—É—Å—Ç–æ—Ç–∞ –≤ –¥–Ω—è—Ö ‚Äî —ç—Ç–æ –∫–∞–∫ –ø–∞—É–∑–∞ –≤ –º—É–∑—ã–∫–µ. –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—ë –∑–∞–ø–æ–ª–Ω—è—Ç—å.",
    "–ù–∏–∫–∞–∫–∏—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–¥–æ—Å—Ç–µ–π! –ù–æ –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤—Å–ø–æ–º–Ω–∏—à—å –≥–æ–ª—É–±—è —Å–æ —Å–º–µ—à–Ω–æ–π –ø–æ—Ö–æ–¥–∫–æ–π –∏–ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç ‚Äî —ç—Ç–æ –ø–æ–≤–æ–¥ –Ω–∞–ø–∏—Å–∞—Ç—å –º–Ω–µ!",
    "–ù–∏—á–µ–≥–æ, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å –∫–∞–∫ —á–∏—Å—Ç—ã–π –ª–∏—Å—Ç. –ë—ã–≤–∞–µ—Ç –∏ —Ç–∞–∫–æ–µ. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –≤–µ—á–µ—Ä–æ–º –≤—Å–ø–æ–º–Ω–∏—Ç—Å—è —á—Ç–æ-—Ç–æ ‚Äî —è –Ω–∞ –Ω–∏–∑–∫–æ–º —Å—Ç–∞—Ä—Ç–µ.",
    "–†–∞–∑—Ä–µ—à–∞—é —Ç–µ–±–µ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–æ—Å—Ç–æ –ø–æ–±—ã—Ç—å.",
    "–ü—É—Å—Ç–æ—Ç–∞ ‚Äî —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞. –≠—Ç–æ –ø–∞—É–∑–∞, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ–∂–µ –Ω—É–∂–Ω–∞.",
    "–ë—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ ¬´–Ω–∏—á–µ–≥–æ¬ª ‚Äî —ç—Ç–æ –ª—É—á—à–µ–µ, —á—Ç–æ –º–∏—Ä –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å.",
    "–ï—Å–ª–∏ –ø–æ—Å–ª–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è –ø–æ—è–≤–∏—Ç—Å—è —á—Ç–æ-—Ç–æ –º–∞–ª–µ–Ω—å–∫–æ–µ –∏ –ø—Ä–∏—è—Ç–Ω–æ–µ ‚Äî —è —Ö–æ—á—É –æ–± —ç—Ç–æ–º –∑–Ω–∞—Ç—å.",
]

# –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ä–∞–¥–æ—Å—Ç–∏
JOY_RESPONSES = [
    "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∞ –∏ –ø–æ—Å—Ç–∞–≤–∏–ª–∞ –ø–µ—á–∞—Ç—å: –º–æ–º–µ–Ω—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏–∑–Ω–∞–Ω –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º.",
    "–¢–≤–æ–π –º–æ–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é ¬´–¢–∞–∫–∏–µ —à—Ç—É–∫–∏ –∏ —Å–ø–∞—Å–∞—é—Ç¬ª.",
    "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –Ω–∞—à —Ñ–æ–Ω–¥ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ ‚Äî —Ç–µ–ø–µ—Ä—å —Ç–∞–º –Ω–∞ –æ–¥–Ω—É —Ä–∞–¥–æ—Å—Ç—å –±–æ–ª—å—à–µ.",
    "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∞! –ó–∞–Ω–µ—Å–µ–Ω–æ –≤ —Ä–µ–µ—Å—Ç—Ä —É–ª—ã–±–æ–∫!",
    "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª –≤–Ω–µ–∑–∞–ø–Ω—ã—Ö —Ä–∞–¥–æ—Å—Ç–µ–π! –¢–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω –æ—Ç –ø–ª–æ—Ö–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–µ—Ä–≤–æ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.",
    "–ü–µ—Ä–µ–¥–∞–Ω–æ –≤ –æ—Ç–¥–µ–ª —Ü–µ–Ω–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π!",
    "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∞, –∫–∞–∫ –≤–∞–∂–Ω–æ —É–º–µ—Ç—å —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –¥–∞–∂–µ –≤ –º–µ–ª–æ—á–∞—Ö. –≠—Ç–æ —Å—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å!",
    "–ó–∞–ª–æ–∂–∏–ª–∞ –≤ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –Ω–∞—à–µ–≥–æ –æ–±—â–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è!",
    "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–ø–∏–ª–∫—É! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—É–¥–µ—Ç —Ç–µ–º —è–∫–æ—Ä–µ–º, —á—Ç–æ –¥–µ—Ä–∂–∏—Ç –Ω–∞ –ø–ª–∞–≤—É –≤ –±—É—Ä–Ω—ã–π –¥–µ–Ω—å.",
    "–û—Ç–ø—Ä–∞–≤–∏–ª–∞ –≤ –Ω–∞—à—É –ø–∞–ø–∫—É —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –º–µ–ª–æ—á–µ–π! –¢–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Äî –∑–∞—â–∏—â—ë–Ω –æ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Ö–∞–æ—Å–∞ –∏ –ø–ª–æ—Ö–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.",
    "–°–æ—Ö—Ä–∞–Ω–∏–ª–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é. –¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –∑–∞–ø–∞—Å —Ä–∞–¥–æ—Å—Ç–∏!",
    "–ü–µ—Ä–µ–¥–∞–ª–∞ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Ä–µ–±—ë–Ω–∫—É! –¢–µ–ø–µ—Ä—å —ç—Ç–æ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±—É–¥–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ —Å–µ–±–µ –≤ —Å–∞–º—ã–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.",
    "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∞ –≤ –∂—É—Ä–Ω–∞–ª–µ –ø–æ–≤–æ–¥–æ–≤ –¥–ª—è —É–ª—ã–±–∫–∏!",
    "–ü–µ—Ä–µ–¥–∞–Ω–æ –≤ –æ—Ç–¥–µ–ª —Ü–µ–Ω–Ω—ã—Ö –º–≥–Ω–æ–≤–µ–Ω–∏–π! –≠—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –∑–∞–ø–∞—Å–∞ —Ö–æ—Ä–æ—à–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.",
    "–ó–∞–ø–∏—Å–∞–ª–∞! –¢—ã, –∫–∞–∫ –≤—Å–µ–≥–¥–∞, –∑–∞–º–µ—Ç–∏–ª–∞ —Ç–æ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –±—ã –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏.",
    "–¢–∞–∫, —ç—Ç–æ –∑–≤—É—á–∏—Ç –∫–∞–∫ —Ä–∞–¥–æ—Å—Ç—å. –ü–æ—Å—Ç–∞–≤–∏–ª–∞ –ø–µ—á–∞—Ç—å: ¬´–Ω–µ —Å—Ç—ã–¥–Ω–æ –ø—Ä–∏–∑–Ω–∞—Ç—å¬ª",
    "–ö–∏–Ω—É–ª–∞ –≤ –ø–∞–ø–∫—É ¬´–Ω—É –Ω–∏—á–µ–≥–æ —Å–µ–±–µ¬ª. –ù–µ –ø–æ—Ç–µ—Ä—è–π —Ç–∞–∫–æ–π —Ç–µ–º–ø üôÑ",
    "–û—É, –≤–∏–∂—É, —Ç—ã —Å–µ–≥–æ–¥–Ω—è –æ–ø–∞—Å–Ω–æ –±–ª–∏–∑–∫–∞ –∫ —Å—á–∞—Å—Ç—å—é. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ üòà",
    "–õ–µ–≥–µ–Ω–¥–∞ –≥–ª–∞—Å–∏—Ç, —á—Ç–æ —Ç–∞–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –ª–µ—á–∞—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –°–æ—Ö—Ä–∞–Ω–∏–ª–∞!",
    "–ó–∞–ø–∏—Å–∞–ª–∞. –í–æ—Ç –≤–∏–¥–∏—à—å ‚Äî –∂–∏–∑–Ω—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ö–∞–æ—Å –∏ –∫–æ—Ñ–µ üòä",
    "–≠—Ç–æ –±—ã–ª–æ –¥–æ—Å—Ç–æ–π–Ω–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∞–ø–ª–æ–¥–∏—Å–º–µ–Ω—Ç–∞. –ó–∞–ø–∏—Å–∞–Ω–æ üëè",
    "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ ‚úîÔ∏è –¢—ã —Å–Ω–æ–≤–∞ –≤ –∫–ª—É–±–µ –ø–æ–±–µ–¥!",
    "–î–æ–±–∞–≤–∏–ª–∞. –ò –¥–∞, —Ç—ã –º–æ–ª–æ–¥–µ—Ü, —á—Ç–æ —ç—Ç–æ —É–≤–∏–¥–µ–ª–∞ üíõ",
    "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ ‚Äî —è –∑–Ω–∞–ª–∞, —á—Ç–æ —Ç–≤–æ–π –¥–µ–Ω—å –Ω–µ –ø–æ–¥–≤–µ–¥—ë—Ç ‚ú®",
    "–ó–∞–ø–∏—Å–∞–ª–∞ –∫–∞–∫ –ø–æ–±–µ–¥—É ‚Äî —Ç–∞–∫–∏—Ö —É —Ç–µ–±—è –±—É–¥–µ—Ç –µ—â—ë –º–Ω–æ–≥–æ!",
    "–ü–æ–º–µ—Ç–∏–ª–∞. –¢—ã –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å —Å–≤–æ–π –º–∏—Ä –Ω–∞ —Ç–µ–ø–ª–æ üåø",
    "–û—Ç–º–µ—á–µ–Ω–æ! –¢—ã —É—á–∏—à—å—Å—è –ª—é–±–∏—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–µ –≤–µ—â–∏ ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–æ.",
]

LAST_JOY_INDEX: Dict[int, int] = {}

# –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
_LAST_MESSAGE_CACHE: Dict[int, Tuple[str, float]] = {}

# --------------------------
# Telegram API
# --------------------------

def get_updates(offset: Optional[int] = None, timeout: int = POLL_TIMEOUT) -> List[dict]:
    params = {"timeout": timeout}
    if offset is not None:
        params["offset"] = offset
    try:
        resp = requests.get(f"{API_URL}/getUpdates", params=params, timeout=timeout + 5)
        data = resp.json()
        if not data.get("ok"):
            print("getUpdates error:", data)
            return []
        return data.get("result", [])
    except Exception as e:
        print("getUpdates exception:", e)
        return []


def send_message(chat_id: int, text: str):
    try:
        requests.post(
            f"{API_URL}/sendMessage",
            json={"chat_id": chat_id, "text": text},
            timeout=10,
        )
    except Exception as e:
        print("sendMessage error:", e)

# --------------------------
# DB
# --------------------------

def init_db():
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()

    # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
    cur.execute("""
        CREATE TABLE IF NOT EXISTS joys (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            chat_id INTEGER NOT NULL,
            text TEXT NOT NULL,
            created_at TEXT NOT NULL
        )
    """)

    # –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö update_id
    cur.execute("""
        CREATE TABLE IF NOT EXISTS processed_updates (
            update_id INTEGER PRIMARY KEY,
            processed_at TEXT NOT NULL
        )
    """)

    # –î–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –æ—Ç—á—ë—Ç–æ–≤
    cur.execute("""
        CREATE TABLE IF NOT EXISTS sent_reminders (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            chat_id INTEGER NOT NULL,
            reminder_date TEXT NOT NULL,
            reminder_type TEXT NOT NULL,
            sent_at TEXT NOT NULL,
            UNIQUE(chat_id, reminder_date, reminder_type)
        )
    """)

    # –î–ª—è –¥–∏–∞–ª–æ–≥–∞ –ø–∏—Å—å–º–∞ –≤ –±—É–¥—É—â–µ–µ
    cur.execute("""
        CREATE TABLE IF NOT EXISTS dialog_state (
            chat_id INTEGER PRIMARY KEY,
            state TEXT,
            meta TEXT,
            updated_at TEXT
        )
    """)

    conn.commit()
    conn.close()


def add_joy(chat_id: int, text: str):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    created_at = datetime.now().isoformat(timespec="seconds")
    cur.execute(
        "INSERT INTO joys (chat_id, text, created_at) VALUES (?, ?, ?)",
        (chat_id, text, created_at),
    )
    conn.commit()
    conn.close()


def get_joy_count(chat_id: int) -> int:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute(
        "SELECT COUNT(*) FROM joys WHERE chat_id = ?",
        (chat_id,),
    )
    count = cur.fetchone()[0]
    conn.close()
    return count


def get_todays_joys(chat_id: int) -> List[str]:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    today = date.today().isoformat()
    cur.execute(
        """
        SELECT text
        FROM joys
        WHERE chat_id = ?
          AND substr(created_at, 1, 10) = ?
        ORDER BY created_at ASC
        """,
        (chat_id, today),
    )
    joys = [row[0] for row in cur.fetchall()]
    conn.close()
    return joys


def get_all_joys(chat_id: int) -> List[Tuple[str, str]]:
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–∞–¥–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–∞—Ç–∞–º–∏."""
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute(
        """
        SELECT text, created_at
        FROM joys
        WHERE chat_id = ?
        ORDER BY created_at DESC
        """,
        (chat_id,),
    )
    joys = [(row[0], row[1]) for row in cur.fetchall()]
    conn.close()
    return joys


def has_joy_for_date(chat_id: int, date_obj: date) -> bool:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    date_str = date_obj.isoformat()
    cur.execute(
        """
        SELECT COUNT(*)
        FROM joys
        WHERE chat_id = ?
          AND substr(created_at, 1, 10) = ?
        """,
        (chat_id, date_str),
    )
    count = cur.fetchone()[0]
    conn.close()
    return count > 0


def get_all_user_ids() -> List[int]:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute("SELECT DISTINCT chat_id FROM joys")
    rows = cur.fetchall()
    conn.close()
    return [r[0] for r in rows]


def mark_update_processed(update_id: int) -> bool:
    """
    –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–º–µ—Ç–∏—Ç—å update –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–ø–µ—Ä–≤—ã–µ.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç False, –µ—Å–ª–∏ —Ç–∞–∫–æ–π update_id —É–∂–µ –µ—Å—Ç—å.
    """
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    processed_at = datetime.now().isoformat(timespec="seconds")
    try:
        cur.execute(
            "INSERT INTO processed_updates (update_id, processed_at) VALUES (?, ?)",
            (update_id, processed_at)
        )
        conn.commit()
        return True
    except sqlite3.IntegrityError:
        return False
    finally:
        conn.close()


def has_sent_reminder_today(chat_id: int, reminder_type: str) -> bool:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    today = date.today().isoformat()
    cur.execute(
        """
        SELECT COUNT(*)
        FROM sent_reminders
        WHERE chat_id = ?
          AND reminder_date = ?
          AND reminder_type = ?
        """,
        (chat_id, today, reminder_type),
    )
    count = cur.fetchone()[0]
    conn.close()
    return count > 0


def mark_reminder_sent(chat_id: int, reminder_type: str):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    today = date.today().isoformat()
    sent_at = datetime.now().isoformat(timespec="seconds")
    try:
        cur.execute(
            """
            INSERT INTO sent_reminders (chat_id, reminder_date, reminder_type, sent_at)
            VALUES (?, ?, ?, ?)
            """,
            (chat_id, today, reminder_type, sent_at),
        )
        conn.commit()
    except sqlite3.IntegrityError:
        pass
    finally:
        conn.close()


def set_dialog_state(chat_id: int, state: str, meta: Optional[dict] = None):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    now = datetime.now().isoformat(timespec="seconds")
    meta_json = json.dumps(meta) if meta is not None else None
    cur.execute(
        """
        INSERT INTO dialog_state (chat_id, state, meta, updated_at)
        VALUES (?, ?, ?, ?)
        ON CONFLICT(chat_id) DO UPDATE SET
            state = excluded.state,
            meta = excluded.meta,
            updated_at = excluded.updated_at
        """,
        (chat_id, state, meta_json, now),
    )
    conn.commit()
    conn.close()


def get_dialog_state(chat_id: int) -> Tuple[Optional[str], Optional[dict]]:
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute(
        "SELECT state, meta FROM dialog_state WHERE chat_id = ?",
        (chat_id,),
    )
    row = cur.fetchone()
    conn.close()
    if not row:
        return None, None
    state, meta_json = row
    meta = None
    if meta_json:
        try:
            meta = json.loads(meta_json)
        except Exception:
            meta = None
    return state, meta


def clear_dialog_state(chat_id: int):
    conn = sqlite3.connect(DB_PATH)
    cur = conn.cursor()
    cur.execute("DELETE FROM dialog_state WHERE chat_id = ?", (chat_id,))
    conn.commit()
    conn.close()

# --------------------------
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
# --------------------------

def normalize_text_for_match(text: str) -> str:
    lower = text.lower().replace("—ë", "–µ")
    normalized = re.sub(r"[^\w\s]+", " ", lower)
    normalized = " ".join(normalized.split())
    return normalized


def _is_duplicate_message(chat_id: int, text: str, window_seconds: float = 2.0) -> bool:
    """
    –ü—Ä–æ—Å—Ç–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –æ—Ç–≤–µ—Ç–æ–≤:
    –µ—Å–ª–∏ –æ—Ç –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ chat_id –ø—Ä–∏–ª–µ—Ç–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∞–ª–æ–≥–æ –æ–∫–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî —Å—á–∏—Ç–∞–µ–º –µ–≥–æ –¥—É–±–ª–µ–º –∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ–º.
    """
    now = time.time()
    normalized = text.strip()
    last = _LAST_MESSAGE_CACHE.get(chat_id)
    if last:
        last_text, last_ts = last
        if normalized == last_text and (now - last_ts) <= window_seconds:
            return True
    _LAST_MESSAGE_CACHE[chat_id] = (normalized, now)
    return False


def contains_profanity(text: str) -> bool:
    normalized = normalize_text_for_match(text)
    for bad_word in BAD_WORDS:
        if bad_word in normalized:
            return True
    return False


def clean_profanity(text: str) -> str:
    words = text.split()
    cleaned_words = []

    for word in words:
        lower_word = word.lower()
        word_cleaned = False

        for bad_root in BAD_WORDS:
            if bad_root in lower_word:
                cleaned_word = ""
                for char in word:
                    if char.isalpha():
                        cleaned_word += "*"
                    else:
                        cleaned_word += char
                cleaned_words.append(cleaned_word)
                word_cleaned = True
                break

        if not word_cleaned:
            cleaned_words.append(word)

    return " ".join(cleaned_words)


def clean_text_pipeline(text: str) -> str:
    text = text.strip()
    if not text:
        return text
    text = clean_profanity(text)
    return text

# --------------------------
# –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
# --------------------------

def is_severe_sad_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in SEVERE_SAD_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_sad_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in SAD_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_tired_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in TIRED_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_anxiety_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in ANXIETY_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_no_joy_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in NO_JOY_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_cancel_message(text: str) -> bool:
    lower = normalize_text_for_match(text)
    for pattern in CANCEL_PATTERNS:
        if pattern in lower:
            return True
    return False


def is_greeting_message(text: str) -> bool:
    """
    –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —É—á—ë—Ç–æ–º:
    - –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑
    - –æ–ø–µ—á–∞—Ç–æ–∫ —Ç–∏–ø–∞ '–ø—Ä–≤–∏–µ—Ç'
    - —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–µ ('ghbdtn')
    - –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ 'privet'
    """
    lower = normalize_text_for_match(text)

    if len(lower) > 25:
        return False

    exact_greetings = {
        # –±–∞–∑–æ–≤—ã–µ
        "–ø—Ä–∏–≤–µ—Ç", "–ø—Ä–∏–≤–µ—Ç–∏–∫", "–ø—Ä–∏–≤–µ—Ç–∏–∫–∏", "–ø—Ä–∏–≤–µ—Ç)", "–ø—Ä–∏–≤–µ—Ç))",
        "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ)",
        "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å", "–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä", "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ", "–¥–æ–±—Ä–æ–π –Ω–æ—á–∏",
        "—Ö–∞–π", "—Ö–µ–π", "—Ö–µ–ª–ª–æ", "—Ö–µ–ª–ª–æ—É",
        "hello", "hi", "hey",
        "–π–æ—É", "–π–æ", "–∫—É",
        "–∑–¥–æ—Ä–æ–≤–æ", "–∑–¥–æ—Ä–æ–≤", "–∑–¥–∞—Ä–æ–≤–∞", "–∑–¥–∞—Ä–æ–≤", "–∑–¥–æ—Ä–æ–≤–∞",
        "—Å–∞–ª—é—Ç", "—à–∞–ª–æ–º", "–±–æ–Ω–∂—É—Ä", "—Ö–æ–ª–∞",
        "–¥–æ–±—Ä–æ–≥–æ –¥–Ω—è", "–¥–æ–±—Ä–æ–≥–æ –≤–µ—á–µ—Ä–∞",
        "—Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å", "—Ä–∞–¥–∞ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å",
        "—Å–Ω–æ–≤–∞ —è", "—ç—Ç–æ —è —Å–Ω–æ–≤–∞",
        # –æ–ø–µ—á–∞—Ç–∫–∏
        "–ø—Ä–≤–∏–µ—Ç", "–ø—Ä–µ–≤–µ—Ç", "–ø—Ä–∏–≤—Ç–µ", "–ø—Ä–∏–≤",
        # –ª–∞—Ç–∏–Ω–∏—Ü–∞
        "privet", "privetik",
        # —Ä—É—Å—Å–∫–æ–µ —Å–ª–æ–≤–æ –≤ –∞–Ω–≥–ª. —Ä–∞—Å–∫–ª–∞–¥–∫–µ
        "ghbdtn", "ghbdtn)", "ghbdtn!"
    }

    if lower in exact_greetings:
        return True

    words = lower.split()
    if not words:
        return False

    greeting_starts = {
        "–ø—Ä–∏–≤–µ—Ç", "–ø—Ä–≤–∏–µ—Ç", "–ø—Ä–µ–≤–µ—Ç", "–ø—Ä–∏–≤—Ç–µ", "–ø—Ä–∏–≤",
        "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ", "–¥–æ–±—Ä—ã–π", "–¥–æ–±—Ä–æ–µ", "–¥–æ–±—Ä–æ–π",
        "—Ö–∞–π", "—Ö—ç–π", "—Ö–µ–π", "—Ö–µ–ª–ª–æ", "hello", "hi", "hey",
        "privet", "privetik",
        "ghbdtn",
        "–π–æ—É", "–π–æ", "–∫—É",
        "–∑–¥–æ—Ä–æ–≤–æ", "–∑–¥–∞—Ä–æ–≤–∞", "—Å–∞–ª—é—Ç", "—à–∞–ª–æ–º", "–±–æ–Ω–∂—É—Ä", "—Ö–æ–ª–∞"
    }

    return words[0] in greeting_starts and len(words) <= 3


def is_wantnow_message(text: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–º –Ω–∞ –æ—Ç—á–µ—Ç 'wantnow'."""
    lower = normalize_text_for_match(text)
    return lower == "wantnow"

# --------------------------
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
# --------------------------

def add_emoji_prefix(text: str) -> str:
    return f"{random.choice(CALM_EMOJIS)} {text}"


def get_sad_response() -> str:
    return add_emoji_prefix(random.choice(SAD_RESPONSES))


def get_tired_response() -> str:
    return add_emoji_prefix(random.choice(TIRED_RESPONSES))


def get_anxiety_response() -> str:
    return add_emoji_prefix(random.choice(ANXIETY_RESPONSES))


def get_greeting_response() -> str:
    return add_emoji_prefix(random.choice(GREETING_RESPONSES))


def get_no_joy_response() -> str:
    return add_emoji_prefix(random.choice(NO_JOY_RESPONSES))


def get_joy_response(chat_id: int) -> str:
    if not JOY_RESPONSES:
        return add_emoji_prefix("–ó–∞–ø–∏—Å–∞–ª–∞ —ç—Ç–æ –∫–∞–∫ —Ç–≤–æ—é —Ä–∞–¥–æ—Å—Ç—å.")
    last_idx = LAST_JOY_INDEX.get(chat_id)
    idx = random.randrange(len(JOY_RESPONSES))
    if last_idx is not None and len(JOY_RESPONSES) > 1:
        for _ in range(3):
            if idx != last_idx:
                break
            idx = random.randrange(len(JOY_RESPONSES))
    LAST_JOY_INDEX[chat_id] = idx
    return add_emoji_prefix(JOY_RESPONSES[idx])


def get_wantnow_report(chat_id: int) -> str:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç –æ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–¥–æ—Å—Ç—è—Ö."""
    joys = get_all_joys(chat_id)

    if not joys:
        return add_emoji_prefix(
            "–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–¥–æ—Å—Ç–µ–π. –ù–æ —ç—Ç–æ –Ω–µ –±–µ–¥–∞ ‚Äî –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!"
        )

    # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ä–∞–¥–æ—Å—Ç–∏ –ø–æ –¥–∞—Ç–∞–º
    joys_by_date: Dict[str, List[str]] = {}
    for text, created_at in joys:
        date_str = created_at.split("T")[0]  # YYYY-MM-DD
        joys_by_date.setdefault(date_str, []).append(text)

    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞—Ç—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
    sorted_dates = sorted(joys_by_date.keys(), reverse=True)

    report = f"{random.choice(JOY_EMOJIS)} –í–æ—Ç –≤—Å–µ —Ç–≤–æ–∏ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Ä–∞–¥–æ—Å—Ç–∏:\n\n"

    today = date.today()
    for date_str in sorted_dates:
        date_obj = datetime.strptime(date_str, "%Y-%m-%d").date()

        if date_obj == today:
            date_display = "–°–µ–≥–æ–¥–Ω—è"
        elif date_obj == today - timedelta(days=1):
            date_display = "–í—á–µ—Ä–∞"
        elif date_obj == today - timedelta(days=2):
            date_display = "–ü–æ–∑–∞–≤—á–µ—Ä–∞"
        else:
            date_display = date_obj.strftime("%d.%m.%Y")

        report += f"üìÖ {date_display}:\n"
        for i, joy in enumerate(joys_by_date[date_str], 1):
            report += f"  {i}. {joy}\n"
        report += "\n"

    total_count = len(joys)
    report += f"\n–í—Å–µ–≥–æ —Ä–∞–¥–æ—Å—Ç–µ–π: {total_count}"

    return report

# --------------------------
# –ü–∏—Å—å–º–æ —Å–µ–±–µ –≤ –±—É–¥—É—â–µ–µ
# --------------------------

def handle_letter_command(chat_id: int):
    clear_dialog_state(chat_id)
    send_message(
        chat_id,
        add_emoji_prefix(
            "–î–∞–≤–∞–π —É—Å—Ç—Ä–æ–∏–º –º–∞–ª–µ–Ω—å–∫–æ–µ –ø–∏—Å—å–º–æ –≤ –±—É–¥—É—â–µ–µ.\n\n"
            "–í—ã–±–µ—Ä–∏, –∫–æ–≥–¥–∞ —Ö–æ—á–µ—à—å –µ–≥–æ –ø–æ–ª—É—á–∏—Ç—å:\n"
            "‚Ä¢ 7 ‚Äî —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é\n"
            "‚Ä¢ 14 ‚Äî —á–µ—Ä–µ–∑ –¥–≤–µ –Ω–µ–¥–µ–ª–∏\n"
            "‚Ä¢ 30 ‚Äî —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü\n\n"
            "–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —Ü–∏—Ñ—Ä—É: 7, 14 –∏–ª–∏ 30.\n"
            "–ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å ‚Äî –Ω–∞–ø–∏—à–∏ /cancel."
        )
    )
    set_dialog_state(chat_id, "await_letter_period", None)


def handle_letter_period(chat_id: int, text: str):
    if is_cancel_message(text):
        clear_dialog_state(chat_id)
        send_message(chat_id, add_emoji_prefix("–•–æ—Ä–æ—à–æ, –æ—Ç–ª–æ–∂–∏–º –ø–∏—Å—å–º–æ."))
        return

    norm = normalize_text_for_match(text)
    if norm not in ["7", "14", "30"]:
        send_message(
            chat_id,
            add_emoji_prefix("–ù–∞–ø–∏—à–∏ —Ü–∏—Ñ—Ä—É: 7, 14 –∏–ª–∏ 30.")
        )
        return

    days = int(norm)
    set_dialog_state(chat_id, "await_letter_text", {"days": days})
    send_message(
        chat_id,
        add_emoji_prefix(
            "–•–æ—Ä–æ—à–æ. –ù–∞–ø–∏—à–∏ —Å–µ–π—á–∞—Å –ø–∏—Å—å–º–æ —Å–µ–±–µ.\n\n"
            "–ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å ‚Äî –Ω–∞–ø–∏—à–∏ /cancel."
        )
    )


def handle_letter_text(chat_id: int, text: str, meta: dict):
    if is_cancel_message(text):
        clear_dialog_state(chat_id)
        send_message(chat_id, add_emoji_prefix("–û–∫–µ–π, –±–µ–∑ –ø–∏—Å—å–º–∞."))
        return

    days = meta.get("days", 7)
    cleaned = text.strip()
    if not cleaned:
        send_message(
            chat_id,
            add_emoji_prefix("–ü–∏—Å—å–º–æ –ø—É—Å—Ç–æ–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ /cancel.")
        )
        return

    # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ —Ä–∞–¥–æ—Å—Ç—å
    add_joy(chat_id, f"–ü–∏—Å—å–º–æ –≤ –±—É–¥—É—â–µ–µ ({days} –¥–Ω–µ–π): {cleaned}")
    clear_dialog_state(chat_id)
    send_message(
        chat_id,
        add_emoji_prefix(
            f"–û—Ç–ª–∏—á–Ω–æ! –°–æ—Ö—Ä–∞–Ω–∏–ª–∞ —Ç–≤–æ—ë –ø–∏—Å—å–º–æ. –ù–∞–ø–æ–º–Ω—é –æ –Ω—ë–º —á–µ—Ä–µ–∑ {days} –¥–Ω–µ–π."
        )
    )

# --------------------------
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π - –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
# --------------------------

def handle_message(chat_id: int, text: str) -> bool:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ.
    –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ç–æ–ª—å–∫–æ –û–î–ù–û–ì–û –æ—Ç–≤–µ—Ç–∞.
    """
    if not text or not text.strip():
        return True

    stripped = text.strip()

    # –ê–Ω—Ç–∏-–¥—É–±–ª–∏–∫–∞—Ç: –µ—Å–ª–∏ —Ç–æ—Ç –∂–µ —Ç–µ–∫—Å—Ç –ø—Ä–∏–ª–µ—Ç–µ–ª –¥–≤–∞–∂–¥—ã –ø–æ–¥—Ä—è–¥ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –≤—Ç–æ—Ä–æ–π
    if _is_duplicate_message(chat_id, stripped):
        return True

    # 1. –ö–æ–º–∞–Ω–¥—ã —Å —Å–∞–º—ã–º –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
    if stripped.startswith("/start"):
        send_message(
            chat_id,
            "–ü—Ä–∏–≤–µ—Ç. –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –∑–∞–º–µ—á–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–µ —Ä–∞–¥–æ—Å—Ç–∏.\n\n"
            "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å—é–¥–∞ —á—Ç–æ-—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ–µ –∏–∑ –¥–Ω—è: –≤—Å—Ç—Ä–µ—á—É, –≤–∫—É—Å–Ω—ã–π –∫–æ—Ñ–µ, —Å–ø–æ–∫–æ–π–Ω—ã–π –≤–µ—á–µ—Ä.\n"
            "–í 18:00 —è –Ω–∞–ø–æ–º–Ω—é, –µ—Å–ª–∏ —Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª–∞, –∞ –≤ 21:00 –ø—Ä–∏—à–ª—é –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—á—ë—Ç –∑–∞ –¥–µ–Ω—å.\n\n"
            "–ê –µ—â—ë –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ —Å–µ–±–µ –≤ –±—É–¥—É—â–µ–µ ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ /letter.\n"
            "–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ —Ö–æ–¥—É –¥–∏–∞–ª–æ–≥–∞ –∏–ª–∏ –ø–∏—Å—å–º–∞ —Ç—ã –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ /cancel.\n\n"
            "–ú–æ–∂–µ—à—å –Ω–∞—á–∞—Ç—å —É–∂–µ —Å–µ–π—á–∞—Å: –Ω–∞–ø–∏—à–∏ –æ–¥–Ω—É –º–∞–ª–µ–Ω—å–∫—É—é —Ä–∞–¥–æ—Å—Ç—å –∏–ª–∏ —Ç—ë–ø–ª—ã–π –º–æ–º–µ–Ω—Ç –∏–∑ —ç—Ç–æ–≥–æ –¥–Ω—è."
        )
        return True

    if stripped.startswith("/stats"):
        total = get_joy_count(chat_id)
        if total == 0:
            send_message(
                chat_id,
                f"{random.choice(STATS_EMOJIS)} –ü–æ–∫–∞ —É —Ç–µ–±—è –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–¥–æ—Å—Ç–µ–π."
            )
        else:
            send_message(
                chat_id,
                f"{random.choice(STATS_EMOJIS)} –£ —Ç–µ–±—è —É–∂–µ {total} –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–¥–æ—Å—Ç–µ–π!"
            )
        return True

    if stripped.startswith("/letter"):
        handle_letter_command(chat_id)
        return True

    if stripped.startswith("/cancel"):
        state, _ = get_dialog_state(chat_id)
        clear_dialog_state(chat_id)
        if state:
            send_message(chat_id, add_emoji_prefix("–û–∫–µ–π, –æ—Ç–º–µ–Ω–∏–ª–∞."))
        else:
            send_message(chat_id, add_emoji_prefix("–ù–µ—á–µ–≥–æ –æ—Ç–º–µ–Ω—è—Ç—å."))
        return True

    # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ (–ø–∏—Å—å–º–æ –≤ –±—É–¥—É—â–µ–µ)
    state, meta = get_dialog_state(chat_id)
    if state == "await_letter_period":
        handle_letter_period(chat_id, text)
        return True
    if state == "await_letter_text":
        handle_letter_text(chat_id, text, meta or {})
        return True

    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∞—Ç ‚Äî –û–î–ò–ù –æ—Ç–≤–µ—Ç –∏ –≤—ã—Ö–æ–¥–∏–º
    if contains_profanity(text):
        send_message(
            chat_id,
            add_emoji_prefix(
                "–ü–æ—Ö–æ–∂–µ, —Å–µ–≥–æ–¥–Ω—è –±—ã–ª —Ç—Ä—É–¥–Ω—ã–π –¥–µ–Ω—å. –Ø –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä—è–¥–æ–º, –Ω–æ –¥–∞–≤–∞–π –ø–æ–ø—Ä–æ–±—É–µ–º –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ —Ä–µ–∑–∫–∏—Ö —Å–ª–æ–≤."
            )
        )
        return True

    # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –æ—Ç—á–µ—Ç–∞ "wantnow"
    if is_wantnow_message(stripped):
        report = get_wantnow_report(chat_id)
        send_message(chat_id, report)
        return True

    # 5. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
    if is_greeting_message(stripped):
        send_message(chat_id, get_greeting_response())
        return True

    # 6. –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è - –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
    if is_severe_sad_message(stripped):
        send_message(
            chat_id,
            add_emoji_prefix(
                "–°–ª—ã—à—É, —á—Ç–æ —Ç–µ–±–µ —Å–µ–π—á–∞—Å –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ.\n\n"
                "–° —Ç–∞–∫–∏–º–∏ —á—É–≤—Å—Ç–≤–∞–º–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –æ–¥–Ω–æ–π. "
                "–ü–æ—Å—Ç–∞—Ä–∞–π—Å—è –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å —Ç–µ–º, –∫–æ–º—É –¥–æ–≤–µ—Ä—è–µ—à—å: –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫, –¥—Ä—É–≥, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç.\n"
                "–¢—ã –≤–∞–∂–Ω–∞ –∏ –∏–º–µ–µ—à—å –ø—Ä–∞–≤–æ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É."
            )
        )
        return True

    if is_anxiety_message(stripped):
        send_message(chat_id, get_anxiety_response())
        return True

    if is_tired_message(stripped):
        send_message(chat_id, get_tired_response())
        return True

    if is_sad_message(stripped):
        send_message(chat_id, get_sad_response())
        return True

    if is_no_joy_message(stripped):
        send_message(chat_id, get_no_joy_response())
        return True

    # 7. –û–±—ã—á–Ω–∞—è —Ä–∞–¥–æ—Å—Ç—å
    cleaned = clean_text_pipeline(text)
    if cleaned:
        add_joy(chat_id, cleaned)
        send_message(chat_id, get_joy_response(chat_id))
        return True

    # 8. –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ
    send_message(chat_id, add_emoji_prefix("–ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª–∞... –ú–æ–∂–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ-—Ç–æ –µ—â—ë?"))
    return True

# --------------------------
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –æ—Ç—á—ë—Ç—ã
# --------------------------

def send_reminder(chat_id: int):
    today = date.today()

    if has_sent_reminder_today(chat_id, "reminder"):
        return

    if not has_joy_for_date(chat_id, today):
        send_message(
            chat_id,
            f"{random.choice(REMINDER_EMOJIS)} –ü—Ä–∏–≤–µ—Ç! –ù–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è —Ç—ã –µ—â—ë –Ω–µ –∑–∞–ø–∏—Å–∞–ª–∞ –Ω–∏ –æ–¥–Ω–æ–π —Ä–∞–¥–æ—Å—Ç–∏."
        )
        mark_reminder_sent(chat_id, "reminder")


def send_daily_report(chat_id: int):
    today = date.today()

    if has_sent_reminder_today(chat_id, "report"):
        return

    joys = get_todays_joys(chat_id)

    if joys:
        report = f"{random.choice(JOY_EMOJIS)} –í–æ—Ç –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –∫–æ–Ω—Ü—É —ç—Ç–æ—Ç –¥–µ–Ω—å.\n\n"
        report += "–í–æ—Ç —Ç–≤–æ–∏ —Ä–∞–¥–æ—Å—Ç–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:\n\n"
        for i, joy in enumerate(joys, 1):
            report += f"{i}. {joy}\n"
        report += "\n–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏!"
    else:
        report = f"{random.choice(CALM_EMOJIS)} –î–µ–Ω—å –ø–æ–¥–æ—à—ë–ª –∫ –∫–æ–Ω—Ü—É. –ó–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –Ω–æ–≤—ã–π —à–∞–Ω—Å!"

    send_message(chat_id, report)
    mark_reminder_sent(chat_id, "report")


def daily_scheduler():
    """–û—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –æ—Ç—á—ë—Ç–æ–≤."""
    last_reminder_day = None
    last_report_day = None

    while True:
        now = datetime.now()
        today = now.date()

        # –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ 18:00
        if now.hour == 18 and now.minute == 0:
            if last_reminder_day != today:
                print(f"–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ {now}")
                for user_id in get_all_user_ids():
                    try:
                        send_reminder(user_id)
                    except Exception as e:
                        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}: {e}")
                last_reminder_day = today
                time.sleep(61)
            else:
                time.sleep(30)

        # –û—Ç—á—ë—Ç –≤ 21:00
        elif now.hour == 21 and now.minute == 0:
            if last_report_day != today:
                print(f"–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—á—ë—Ç—ã –≤ {now}")
                for user_id in get_all_user_ids():
                    try:
                        send_daily_report(user_id)
                    except Exception as e:
                        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á—ë—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}: {e}")
                last_report_day = today
                time.sleep(61)
            else:
                time.sleep(30)

        else:
            time.sleep(30)

# --------------------------
# –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏
# --------------------------

def main_loop():
    """–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π."""
    last_update_id = 0

    while True:
        try:
            updates = get_updates(last_update_id + 1 if last_update_id else None, POLL_TIMEOUT)

            for update in updates:
                update_id = update.get("update_id")
                if update_id is None:
                    continue

                # –ü–æ–º–µ—á–∞–µ–º update –∫–∞–∫ –Ω–æ–≤—ã–π. –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å ‚Äî —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.
                if not mark_update_processed(update_id):
                    print(f"Update {update_id} —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
                    continue

                if update_id > last_update_id:
                    last_update_id = update_id

                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                if "message" in update:
                    msg = update["message"]
                    chat = msg.get("chat") or {}
                    chat_id = chat.get("id")
                    text = msg.get("text", "")

                    if chat_id and text is not None:
                        print(f"–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ {update_id}: '{text[:50]}...'")
                        handle_message(chat_id, text)

            time.sleep(POLL_SLEEP)

        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ: {e}")
            time.sleep(POLL_SLEEP)

# --------------------------
# MAIN
# --------------------------

def main():
    print("–ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞...")
    init_db()

    scheduler_thread = threading.Thread(target=daily_scheduler, daemon=True)
    scheduler_thread.start()

    main_loop()


if __name__ == "__main__":
    main()


